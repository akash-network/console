(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[8333],{766993:($e,se,s)=>{"use strict";s.d(se,{Z:()=>P});var F=s(99610),i=s(64125),k=s(508181),S=s(202784);const P=({children:Se,title:fe,className:re,leftIcon:de,initialOpen:z=!1})=>{const[ie,ue]=(0,S.useState)(z),t=(0,S.useCallback)(()=>{ue(Ne=>!Ne)},[]);return S.createElement("div",{className:"rounded-2xl p-4 mt-4 dark:bg-gray-900 bg-white-100"},S.createElement("button",{className:"flex items-center w-full",onClick:t},de?S.createElement("img",{src:de,className:"mr-2 h-5 w-5"}):null,S.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},fe),S.createElement("div",{className:"p-2 ml-auto cursor-pointer"},S.createElement("img",{src:k.r.Misc.DownArrow,alt:"Down Arrow",className:`transition-transform ${ie?"rotate-180":""}`}))),S.createElement(F.M,null,ie?S.createElement(i.E.div,{style:{overflow:"hidden"},initial:{height:0},animate:{height:"auto"},transition:{duration:.25},exit:{height:0},key:"container",className:re},Se):null))}},425355:($e,se,s)=>{"use strict";s.d(se,{m:()=>S});var F=s(294184),i=s.n(F),k=s(202784);const S=({tabsList:n,tabsContent:P,className:Se})=>{const[fe,re]=k.useState(n[0].id);return k.createElement("div",{className:i()("w-full",Se)},k.createElement("div",{className:"w-full flex items-center justify-start border-b border-gray-900"},n.map(({id:de,label:z})=>k.createElement("button",{key:de,className:`px-4 py-2 cursor-pointer transition-colors border-b-2 ${fe===de?"dark:border-white-100 border-gray-900 font-bold text-gray-900 dark:text-white-100":"border-transparent text-gray-700 dark:text-gray-400"}`,onClick:()=>re(de)},z))),k.createElement("div",{className:"w-full"},P[fe]))}},675335:($e,se,s)=>{"use strict";s.d(se,{u:()=>F});var F=(i=>(i.signResponse="sign-response",i.signingPopupOpen="signing-popup-open",i.signTransaction="sign-transaction",i.signSeiEvmResponse="sign-sei-evm-response",i))(F||{})},367738:($e,se,s)=>{"use strict";s.d(se,{_d:()=>Re,qe:()=>Pe});var F=s(964266),i=s(564510),k=s(395362),S=s(389320),n=s(675335),P=s(164012),Se=s(336023),fe=s.n(Se),re=s(789405),de=s(105959),z=s(472565),ie=s.n(z),ue=s(348834).Buffer;const t=400,Ne=600;ie().tabs.onRemoved.addListener(()=>{});async function he(){const l=await ie().storage.local.get([P.Pw]);if(l[P.Pw])return JSON.parse(l[P.Pw])}const Re=async()=>{const l=await he()??{};return Object.assign(i.NOo,Object.keys(l).reduce((m,u)=>(m[l[u].chainId]=u,m),{}),{"elgafar-1":"stargaze"})},Ie=async l=>{const m=await(0,F.eli)(),u=Object.values(m).filter(v=>v.enabled).map(v=>v.chainId),f=Object.values(m).filter(v=>v.enabled).map(v=>v.testnetChainId),h=await he()??{},M=Object.values(h).filter(v=>v.enabled).map(v=>v.chainId),R=[...u,...f,...M];return l.reduce((v,K)=>(v[K]=R.indexOf(K)!==-1,v),{})};async function Pe(l,m,u,f){const h=u.origin===S.x3||u.origin===S.s3;let M=!f;f&&l.forEach(K=>{(m?.[f]?.[K]||[]).includes(u?.origin)||(M=!0)});const R=await Ie(l),v=Object.keys(R).filter(K=>!!R[K]);return v.length&&h&&(M=!1,await(0,re.E)(l,[f],u.origin)),{validChainIds:v,isNewChainPresent:M}}const ye=async()=>{const{connections:l={}}=await browser.storage.local.get(CONNECTIONS);return l},Me=async()=>{const{"active-wallet":l={}}=await browser.storage.local.get([ACTIVE_WALLET]);return l},Ge=async()=>(await browser.storage.local.get([ACTIVE_WALLET_ID]))[ACTIVE_WALLET_ID];async function ce(l,m){const[u,f]=await Promise.all([Ge(),ye()]);return await Pe(l,f,m,u)}const ee={},le={};async function rt(){return ee.length===0?void 0:[await browser.windows.get(ee[0],{populate:!0})]}function Ke(l){return l?l.find(m=>m.id?m.type==="popup"&&Object.values(ee).includes(m.id):!1):void 0}async function Ze(l,m){let u="index.html#/";l!=="login"&&(u=u+l),m&&(u=u+m);const f={width:t,height:Ne,type:"popup",left:0,top:0,url:u};if(ee[u]||le[u])try{let h=ee[u];if(!h){const R=await le[u];R.id&&(h=R.id)}const M=await browser.windows.get(h,{populate:!0});if(M.tabs?.length){const[R]=M.tabs;if(R?.id)await browser.tabs.update(R.id,{active:!0,url:u});else throw new Error("No tabs")}else throw new Error("No tabs")}catch(h){try{if(h.message.includes("No tab with id")){const M=browser.windows.create(f);le[u]=M;const R=await M;R.id&&(ee[u]=R.id)}}finally{delete le[u]}}else try{const h=browser.windows.create(f);le[u]=h;const M=await h;return M.id&&(ee[u]=M.id),M}finally{delete le[u]}}ie().windows.onRemoved.addListener(l=>{Object.entries(ee).forEach(([u,f])=>{f===l&&delete ee[u]})});async function Je(l){const[m,u]=await Promise.all([Me(),ye()]);return!!(u?.[m.id]?.[l?.chainId]||[]).includes(l.origin)}async function it(l){const[m,u]=await Promise.all([Me(),ye()]);let f=u[m.id]?.[l?.chainId]||[];return f.includes(l.origin)?(f=f.filter(h=>h!==l.origin),u[m.id][l.chainId]=f,await browser.storage.local.set({[CONNECTIONS]:u}),!0):!1}async function ct(){const l=await getChains();try{const u=(await browser.storage.local.get([BETA_CHAINS]))[BETA_CHAINS];return{...l,...JSON.parse(u??"{}")}}catch{return l}}async function Qe(l){const{"active-wallet":m}=await browser.storage.local.get([ACTIVE_WALLET]);let f=(await Re())[l];return f=f==="cosmoshub"?"cosmos":f,m.addresses[f]}async function ke(l){const m=await Me(),u=`seed-phrase/${m.id}`,h=(await chrome.storage.local.get([u]))[u];if(h){const me=ue.from(h,"hex");if(me.length===32)return me}const M=await Qe("secret-4"),R=getStorageAdapter();initStorage(R);const v=await KeyChain.getSigner(m.id,l,{addressPrefix:"secret",coinType:"529"}),K=CryptoJs.SHA256(await v.signAmino(M,ue.from(JSON.stringify({account_number:0,chain_id:"secret-4",fee:[],memo:"Create leap Secret encryption key. Only approve requests by Leap.",msgs:[],sequence:0}))));return await chrome.storage.local.set({[`seed-phrase/${m.id}`]:K.toString()}),ue.from(K.toString())}function lt(l){const m=new RegExp(/^(http|https):\/\/[^ "]+$/),u=new RegExp(/^\d+$/);if(!m.test(l.rpc))throw new Error("Invalid RPC URL");if(!m.test(l.rest))throw new Error("Invalid REST URL");if(!u.test(l.bip44.coinType))throw new Error("Invalid bip44 coin type");if(l.feeCurrencies?.length<1)throw new Error("Invalid fee currencies")}function Le(l){const m=(u,f)=>{if(f.id!==browser.runtime.id)throw new Error("Invalid sender");u.type==="approval-popup-open"&&(browser.runtime.sendMessage({type:"enable-access",payload:l}),browser.runtime.onMessage.removeListener(m))};browser.runtime.onMessage.addListener(m)}async function dt(l){return new Promise((m,u)=>{const f=h=>{h.type===l&&(h.payload.status==="success"?m("success"):u("failed"),browser.runtime.onMessage.removeListener(f))};browser.runtime.onMessage.addListener(f)})}async function ut(l){return new Promise((m,u)=>{const f=async(h,M)=>{M.id!==browser.runtime.id&&u("Invalid sender"),h.type==="chain-enabled"&&h.payload.payloadId===l?m({status:"success",payloadId:h.payload.payloadId}):h.type==="chain-approval-rejected"&&h.payload.payloadId===l?(u({status:"rejected",payloadId:h.payload.payloadId}),browser.runtime.onMessage.removeListener(f)):h.type==="popup-closed"?(m("popup-closed"),browser.runtime.onMessage.removeListener(f)):h.type==="user-logged-in"&&h.status!=="success"&&(u("failed"),browser.runtime.onMessage.removeListener(f))};browser.runtime.onMessage.addListener(f)})}function xe(l){const m=(u,f)=>{if(f.id!==browser.runtime.id)throw new Error("Invalid Sender");u.type===MessageTypes.signingPopupOpen&&(browser.runtime.sendMessage({type:MessageTypes.signTransaction,payload:l}),browser.runtime.onMessage.removeListener(m))};browser.runtime.onMessage.addListener(m)}async function mt(l){return new Promise((m,u)=>{const f=h=>{h.type===l&&(h.payload.status==="success"?m(h.payload.data):u(h.payload.data),browser.runtime.onMessage.removeListener(f))};browser.runtime.onMessage.addListener(f)})}},743522:($e,se,s)=>{"use strict";s.r(se),s.d(se,{default:()=>yn});var F=s(370836),i=s(964266),k=s(564510),S=s(339279),n=s(345231),P=s(726089),Se=s(294184),fe=s.n(Se),re=s(593723),de=s(472415),z=s(608740),ie=s(892742),ue=s(240483),t=s(202784),Ne=s(511034),he=s(94608);function Re({showLedgerPopup:e,onClose:o}){return t.createElement(ue.Z,{isOpen:e,onClose:o,title:"Confirm on Ledger"},t.createElement("div",{className:"flex flex-col items-center"},t.createElement("div",{className:"my-10"},t.createElement(Ne.Z,null)),t.createElement(he.Z,{size:"md",className:"font-bold mb-7"},"Approve transaction on your hardware wallet")))}var Ie=s(128844),Pe=s(389320),ye=s(634680),Me=s(625890),Ge=s(244876),ce=s(508181),ee=s(789405),le=s(712878),rt=s(606367),Ke=s(347703),Ze=s(111819),Je=s(861111);const it=Ge.w.useWallets;function ct({isOpen:e,onClose:o,title:a,currentWalletInfo:r}){const c=it(),d=(0,ye.a7)(),{activeWallet:g,setActiveWallet:y}=(0,Me.ZP)(),C=(0,t.useMemo)(()=>c?Object.values(c).map(E=>E).sort((E,B)=>E.name.localeCompare(B.name)):[],[c]),b=r?.wallets?.[0]?.name,w=r?.wallets?.[0]?.addresses?.[d],W=r?.wallets?.[0]?.colorIndex,Z=r?.origin?.split("//")?.at(-1)?.split(".")?.at(-2)||r?.origin?.split("//")?.at(-1),te=(0,Ke.G)(r?.origin);return t.createElement(t.Fragment,null,t.createElement(ue.Z,{isOpen:e,onClose:o,title:a,closeOnBackdropClick:!0},t.createElement("div",null,r&&t.createElement("div",{className:"flex flex-col p-4 mb-4 rounded-2xl bg-white-100 dark:bg-gray-900 min-h-[100px] justify-center items-center"},t.createElement("div",{className:"mt-2 flex flex-row items-center"},t.createElement("img",{src:ce.r.Misc.getWalletIconAtIndex(W),className:"z-10 border-2 border-gray-900 rounded-full relative left-2"}),t.createElement(S.Avatar,{avatarImage:te,avatarOnError:(0,Je._)(ce.r.Misc.DefaultWebsiteIcon),size:"sm",className:"-left-2 z-0 rounded-full overflow-hidden"})),t.createElement(he.Z,{size:"md",color:"text-green-600",className:"font-bold my-2"},Z),t.createElement(he.Z,{size:"xl",className:"my-0 font-extrabold"},b," Connected"),w?t.createElement("p",{className:"text-sm font-medium dark:text-gray-400 text-gray-700"},(0,le.Hn)(w)):null),t.createElement("div",{className:"flex flex-col rounded-2xl bg-white-100 dark:bg-gray-900 h-fit max-h-[250px] overflow-y-auto"},C.map((E,B,ne)=>{const J=B===ne.length-1;if(E.id===r?.wallets?.[0]?.id)return null;let N="";E.walletType===i._KQ.LEDGER&&(N=` \xB7 /0'/0/${E.addressIndex}`),(E.walletType===i._KQ.PRIVATE_KEY||E.walletType===i._KQ.SEED_PHRASE_IMPORTED)&&(N=" \xB7 Imported");const V=E.walletType==i._KQ.LEDGER&&!rt.li.test(E.name)?`${Pe.dN[E.walletType]} Wallet ${E.addressIndex+1}`:(0,Ze.k)(E.name),G=V.length>16?V.slice(0,16)+"...":V;return t.createElement("div",{className:"relative min-h-[56px] w-full",key:E.id},t.createElement(S.Card,{onClick:async()=>{const Q=r?.wallets.map(Ae=>Ae.id);await(0,ee.E)(r?.chainIds,Q??[],r?.origin),y(E),o()},className:"!w-full",key:E.name,title:G,subtitle:`${(0,le.Hn)(E.addresses[d])}${N}`,iconSrc:g?.id===E.id?ce.r.Misc.CheckCosmos:void 0,imgSrc:ce.r.Misc.getWalletIconAtIndex(E.colorIndex),isRounded:!0}),J?null:t.createElement(S.CardDivider,null))})))))}var Qe=s(425355),ke=s(675335),lt=s(164012),Le=s(229639),dt=s(367738),ut=s(378268),xe=s(507445),mt=s(8891),l=s.n(mt),m=s(610675),u=s(953718);const f=e=>new Uint8Array(atob(e).split("").map(o=>o.charCodeAt(0))),h=e=>{const o=e;return btoa(String.fromCharCode.apply(null,o))},M=e=>new TextEncoder().encode(e);var R=s(472565),v=s.n(R),K=s(910416),me=s(15815),Mt=s(435148);const Lt=({gasPriceOption:e,gasPriceError:o})=>{const{viewAdditionalOptions:a}=(0,Mt.R)();return a?t.createElement("div",{className:"rounded-2xl p-4 mt-3 dark:bg-[#141414] bg-white-100"},t.createElement("div",{className:"flex items-center"},t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},"Gas Fees ",t.createElement("span",{className:"capitalize"},"(",e.option,")")),t.createElement(re.Z,{content:t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm"},"You can choose higher gas fees for faster transaction processing.")},t.createElement("div",{className:"relative ml-2"},t.createElement("img",{src:ce.r.Misc.InfoCircle,alt:"Hint"})))),t.createElement(z.ZP.Selector,{className:"mt-2",preSelected:!1}),t.createElement(z.ZP.AdditionalSettings,{className:"mt-5 p-0",showGasLimitWarning:!0}),o?t.createElement("p",{className:"text-red-300 text-sm font-medium mt-2 px-1"},o):null):null};var Ot=s(884459),Bt=s(611049);const $t=({memo:e,setMemo:o,disabled:a})=>{const r=(0,i.a74)(),[c,d]=(0,t.useState)(e),g=(0,i.NrF)(c,200);return(0,t.useEffect)(()=>{g!==e&&o(g)},[g,e,o]),t.createElement("div",{className:"rounded-2xl p-4 mt-3 dark:bg-gray-900 bg-white-100 space-y-2"},t.createElement("div",{className:"flex items-center"},t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},"Memo"),t.createElement(re.Z,{content:t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm"},"An optional short message that can be attached to a transaction, can be viewed by anyone.")},t.createElement("div",{className:"relative ml-2"},t.createElement("img",{src:ce.r.Misc.InfoCircle,alt:"Hint"})))),t.createElement(Bt.q,{disabled:a,buttonText:(()=>c.trim().length>0?"Clear":"")(),rightElement:c.trim().length>0?void 0:" ",buttonTextColor:m.w.getChainColor(r),value:c,onChange:y=>d(y.target.value),onAction:(y,C)=>{C==="clear"&&(d(""),o(""))},action:(()=>c.trim().length>0?"clear":"save")()}),t.createElement("p",{className:"text-gray-700 dark:text-gray-100 text-xs text-left mt-1"},a?"The dApp has set the memo, you cannot change it":"Edit the memo here"))};var Rt=s(766993),pt=s(360431),Gt=s(206391),Te=s.n(Gt);const $=async(e,o,a)=>{try{const r=await i.ic7.fetchDenomTrace(e.denomination,o,a);if(!r)throw new Error("No");return`${(0,i.dpr)(new(Te())(e.quantity).dividedBy(10**r.coinDecimals))} ${r.coinDenom}`}catch{return e?.denomination?.startsWith("u")??!1?`${e.quantity} ${e.denomination.slice(1)}`:`${e?.quantity??""} ${(0,i.Hnh)(e?.denomination??"")}`}},ve=async(e,o,a)=>(await Promise.all(e.map(c=>$(c,o,a)))).join(", ");function gt(e){const o=(e?.startsWith("/")?e?.split("."):e?.split("/"))??[];return o[o.length-1]??""}const Ce=(e,o)=>{if(!e)return"unknown";const a=gt(e);if(a.trim()==="SendAuthorization")return"Send";if(a.trim()==="StakeAuthorization")switch(o){case 0:return"Unspecified";case 1:return"Delegate";case 2:return"Undelegate";case 3:return"Redelegate";case 4:return"Cancel Unbonding Delegation";default:return"unknown"}return a.trim()==="GenericAuthorization"?gt(o):a},Ut=e=>{switch(e.__type){case n.ax.AuthzExec:return"Execute Authorized Message";case n.ax.AuthzGrant:return"Grant Authorization";case n.ax.AuthzRevoke:return"Revoke Execution Authorization";case n.ax.BankMultiSend:return"Multi Send Tokens";case n.ax.BankSend:return"Send Tokens";case n.ax.FeeGrantGrantAllowance:return"Grant Fee Allowance";case n.ax.FeeGrantRevokeAllowance:return"Revoke Fee Allowance";case n.ax.GammCreatePool:return"Create Balancer Pool";case n.ax.GammJoinPool:return"Join Pool";case n.ax.GammExitPool:return"Exit Pool";case n.ax.GammSwapExact:case n.ax.GammSwapMax:case n.ax.PMSwapExactIn:case n.ax.PMSwapExactOut:case n.ax.PMSplitSwapExactIn:case n.ax.PMSplitSwapExactOut:return"Swap Tokens";case n.ax.GammSwapExactAndExit:case n.ax.GammSwapMaxAndExit:return"Swap Tokens and Exit Pool";case n.ax.PMSetDenomPairTakerFee:return"Set Denom Pair Taker Fee";case n.ax.GammSwapExactAndJoin:case n.ax.GammSwapMaxAndJoin:return"Swap Tokens and Join Pool";case n.ax.GovSubmitProposal:return"Submit Governance Proposal";case n.ax.GovVote:return"Vote on Governance Proposal";case n.ax.GovDeposit:return"Deposit on Governance Proposal";case n.ax.IbcReceive:return"Receive IBC Packet";case n.ax.IbcSend:return"Send Tokens via IBC";case n.ax.LockupLock:return"Lock Tokens";case n.ax.LockupUnlock:return"Unlock Token";case n.ax.LockupUnlockAll:return"Unlock All Tokens";case n.ax.SlashingUnjail:return"Unjail Validator";case n.ax.StakingDelegate:return"Delegate Tokens";case n.ax.StakingUndelegate:return"Undelegate Tokens";case n.ax.StakingCreateValidator:return"Create Validator";case n.ax.StakingEditValidator:return"Edit Validator";case n.ax.StakingBeginRedelegate:return"Redelegate Tokens";case n.ax.StakingCancelUnbondingDelegation:return"Cancel Unbonding Delegation";case n.ax.SuperfluidDelegate:return"Delegate Tokens (Superfluid)";case n.ax.SuperfluidLockAndDelegate:return"Lock and Delegate Tokens (Superfluid)";case n.ax.SuperfluidUnlockAndUndelegate:return"Unlock and Undelegate Tokens (Superfluid)";case n.ax.SuperfluidUndelegate:return"Undelegate Tokens (Superfluid)";case n.ax.LiquidStakingDelegate:return"Delegate Tokens (Liquid Staking)";case n.ax.PStakeLiquidStake:return"Liquid Stake (P Stake)";case n.ax.StakeIBCAddValidators:return"Add Validators (Liquid Staking)";case n.ax.StakeIBCChangeValidatorWeight:return"Change Validator Weight (Liquid Staking)";case n.ax.StakeIBCDeleteValidator:return"Delete Validator (Liquid Staking)";case n.ax.StakeIBCLiquidStake:return"Liquid Stake (Liquid Staking)";case n.ax.StakeIBCClearBalance:return"Clear Balance (Liquid Staking)";case n.ax.StakeIBCRedeemStake:return"Redeem Staked Tokens (Liquid Staking)";case n.ax.StakeIBCClaimUndelegatedTokens:return"Claim Undelegated Tokens (Liquid Staking)";case n.ax.StakeIBCRegisterHostZone:return"Register Host Zone (Liquid Staking)";case n.ax.StakeIBCRebalanceValidators:return"Rebalance Validators (Liquid Staking)";case n.ax.StakeIBCRestoreInterchainAccount:return"Restore Interchain Account (Liquid Staking)";case n.ax.StakeIBCUpdateValidatorSharesExchRate:return"Update Validator Shares Exchange Rate (Liquid Staking)";case n.ax.IbcPacketReceive:return"Receive IBC Packet";case n.ax.ClaimReward:return`Claim reward from ${(0,i.Hnh)(e.validatorAddress)}`;case n.ax.WasmxExecuteContractCompat:return"Execute Contract";case n.ax.Unimplemented:return Ce(e.message["@type"]??e.message.type??e.message.type_url??e.message.typeUrl)}},Ht=e=>{switch(e){case"basic":return"Basic";case"periodic":return"Periodic";case"allowedMsg":return"Allowed Message"}},Wt=async(e,o,a)=>{switch(e.__type){case n.ax.AuthzExec:return Promise.resolve(`${(0,i.Hnh)(e.grantee)} shall execute the following authorized message ${e.messages.map(r=>Ce("type"in r?r.type:r["@type"])).join(", ")} on behalf of you`);case n.ax.AuthzGrant:return Promise.resolve(`Grant authorization for ${(0,i.Hnh)(e.grantee)} to execute ${Ce(e.grant.authorization.$type_url??e.grant.authorization["@type"],e.grant.authorization.msg??e.grant.authorization.authorization_type)} on behalf of you`);case n.ax.AuthzRevoke:return Promise.resolve(`Revoke authorization for ${(0,i.Hnh)(e.grantee)} to execute ${Ce(e.permission)} on behalf of you`);case n.ax.BankMultiSend:return Promise.resolve(`Send ${e.inputs.length} coins to ${e.outputs.length} recipients`);case n.ax.BankSend:return`Send ${await ve(e.tokens,o,a)} to ${(0,i.Hnh)(e.toAddress)}`;case n.ax.FeeGrantGrantAllowance:return Promise.resolve(`Grant ${Ht(e.allowance)} allowance to ${(0,i.Hnh)(e.grantee)}`);case n.ax.IbcPacketReceive:return Promise.resolve(`Receive IBC packet from ${(0,i.Hnh)(e.sourcePort)}/${(0,i.Hnh)(e.sourceChannel)}`);case n.ax.FeeGrantRevokeAllowance:return Promise.resolve(`Revoke allowance from ${(0,i.Hnh)(e.grantee)}`);case n.ax.GammCreatePool:return`Create a Balancer pool with ${await ve(e.tokens,o,a)} assets`;case n.ax.GammJoinPool:return`Join pool ${e.poolId} with ${await ve(e.tokens,o,a)} assets in return for ${e.shares} shares`;case n.ax.GammExitPool:return`Exit pool ${e.poolId} with ${e.shares} shares in return for ${await ve(e.tokens,o,a)} assets`;case n.ax.GammSwapExact:case n.ax.PMSwapExactIn:{const r={quantity:e.tokenOutAmount,denomination:e.routes[e.routes.length-1].tokenOutDenomination};return`Swap ${await $(e.tokenIn,o,a)} for ${await $(r,o,a)}`}case n.ax.PMSplitSwapExactIn:{const r=e.routes[e.routes.length-1].pools,c=r[r.length-1].tokenOutDenomination,d={quantity:e.tokenOutAmount,denomination:c};return`Swap ${await $(e.tokenIn,o,a)} for ${await $(d,o,a)}`}case n.ax.GammSwapMax:case n.ax.PMSwapExactOut:{const r={quantity:e.tokenInAmount,denomination:e.routes[0].tokenInDenomination};return`Swap ${await $(r,o,a)} for ${await $(e.tokenOut,o,a)}`}case n.ax.PMSplitSwapExactOut:{const c=e.routes[e.routes.length-1].pools[0].tokenInDenomination,d={quantity:e.tokenInAmount,denomination:c};return`Swap ${await $(d,o,a)} for ${await $(e.tokenOut,o,a)}`}case n.ax.GammSwapExactAndExit:case n.ax.GammSwapMaxAndExit:return`Sell ${e.shares} shares for ${await $(e.tokenOut,o,a)} and exit pool ${e.poolId}`;case n.ax.GammSwapExactAndJoin:case n.ax.GammSwapMaxAndJoin:return`Buy ${e.shares} shares for ${await $(e.tokenIn,o,a)} and join pool ${e.poolId}`;case n.ax.GovSubmitProposal:return Promise.resolve(`Submit proposal with deposit of ${await ve(e.initialDeposit,o,a)}`);case n.ax.GovVote:{const r=["number","string"].includes(typeof e.proposalId)?e.proposalId:e.proposalId?.low??JSON.stringify(e.proposalId);return Promise.resolve(`Vote ${e.option} on proposal ${r}`)}case n.ax.GovDeposit:return Promise.resolve(`Deposit ${await ve(e?.amount??[],o,a)} on proposal ${e.proposalId}`);case n.ax.IbcSend:return`Send ${await $(e.token,o,a)} to ${(0,i.Hnh)(e.toAddress)} via IBC`;case n.ax.IbcReceive:return`Receive ${await $(e.token,o,a)} from ${(0,i.Hnh)(e.fromAddress)} via IBC`;case n.ax.LockupLock:return`Lock ${await ve(e.tokens,o,a)} for ${e.duration} seconds`;case n.ax.LockupUnlock:return Promise.resolve(`Unlock token from lock ${e.id}`);case n.ax.LockupUnlockAll:return Promise.resolve("Unlock all tokens from all locks");case n.ax.SlashingUnjail:return Promise.resolve(`Unjail validator ${(0,i.Hnh)(e.validatorAddress)}`);case n.ax.StakingCreateValidator:return Promise.resolve(`Create ${e.moniker} validator with commission rate ${e.rate}`);case n.ax.StakingEditValidator:return Promise.resolve(`Edit ${e.moniker} validator`);case n.ax.StakingDelegate:return`Delegate ${await $({quantity:e.quantity,denomination:e.denomination},o,a)} to ${(0,i.Hnh)(e.validatorAddress)}`;case n.ax.StakingUndelegate:return`Undelegate ${await $({quantity:e.quantity,denomination:e.denomination},o,a)} from ${(0,i.Hnh)(e.validatorAddress)}`;case n.ax.StakingBeginRedelegate:return`Redelegate ${await $({quantity:e.quantity,denomination:e.denomination},o,a)} from ${(0,i.Hnh)(e.sourceValidatorAddress)} to ${(0,i.Hnh)(e.destinationValidatorAddress)}`;case n.ax.StakingCancelUnbondingDelegation:return Promise.resolve(`Cancel unbonding delegation for ${$({quantity:e.quantity,denomination:e.denomination},o,a)} from ${(0,i.Hnh)(e.validatorAddress)}`);case n.ax.SuperfluidLockAndDelegate:return`Lock ${await ve(e.tokens,o,a)} and delegate to ${(0,i.Hnh)(e.validatorAddress)}`;case n.ax.SuperfluidUnlockAndUndelegate:return Promise.resolve(`Remove lock ${e.lockId} and undelegate`);case n.ax.SuperfluidDelegate:return Promise.resolve(`Delegate tokens with lock ${e.lockId}`);case n.ax.SuperfluidUndelegate:return Promise.resolve(`Undelegate tokens with lock ${e.lockId}`);case n.ax.StakeIBCAddValidators:return Promise.resolve(`Add liquid staking validators - ${e.validators.join(", ")}`);case n.ax.StakeIBCChangeValidatorWeight:return Promise.resolve(`Change liquid staking validator ${e.validatorAddress}'s weight to ${e.weight}`);case n.ax.StakeIBCDeleteValidator:return Promise.resolve(`Delete liquid staking validator ${e.validatorAddress}`);case n.ax.StakeIBCLiquidStake:return`Liquid stake ${await $({denomination:e.denomination,quantity:e.quantity},o,a)}`;case n.ax.StakeIBCClearBalance:return Promise.resolve(`Clear liquid staking balance of ${e.quantity}`);case n.ax.StakeIBCRedeemStake:return Promise.resolve(`Redeem liquid stake of ${e.quantity} units to ${(0,i.Hnh)(e.receiver)}`);case n.ax.StakeIBCClaimUndelegatedTokens:return Promise.resolve("Claim undelegated tokens");case n.ax.StakeIBCRegisterHostZone:return Promise.resolve(`Register host zone via ${(0,i.Hnh)(e.account)} with host denomination ${e.hostDenom}`);case n.ax.StakeIBCRebalanceValidators:return Promise.resolve(`Rebalance ${e.numRebalance} liquid staking validators in ${e.hostZone} host zone`);case n.ax.StakeIBCRestoreInterchainAccount:return Promise.resolve(`Restore interchain account ${(0,i.Hnh)(e.creator)} of type ${e.accountType}`);case n.ax.StakeIBCUpdateValidatorSharesExchRate:return Promise.resolve(`Update liquid staking validator shares exchange rate for ${(0,i.Hnh)(e.validatorOperatorAddress)}`);case n.ax.ClaimReward:return Promise.resolve(`Claim staking reward from ${(0,i.Hnh)(e.validatorAddress)}`);case n.ax.Unimplemented:return Promise.resolve(Ce(e.message["@type"]??e.message.type??e.message.type_url??e.message.typeUrl))}},ft=(e,o)=>{const a=(0,i.a74)(),{chains:r}=(0,i._IL)(),{data:c,isLoading:d}=(0,pt.useQuery)({queryKey:["message-details",e],queryFn:()=>Wt(e,o,r[a].chainId),enabled:!!e});return{data:c,isLoading:d}},Ft=({isOpen:e,setIsOpen:o,message:a,onClose:r})=>{const{lcdUrl:c}=(0,i.U9i)(),{isLoading:d,data:g}=ft(a?.parsed,c??"");return a?t.createElement(ue.Z,{isOpen:e,onClose:()=>{o(!1),r()},title:`Message ${a.index+1}`,closeOnBackdropClick:!0},!d&&g?t.createElement(t.Fragment,null,t.createElement("div",{className:"w-full text-left dark:bg-gray-900 bg-white-100 p-4 rounded-2xl"},t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},"Description"),t.createElement("p",{className:"dark:text-white-100 text-gray-900 text-sm mt-1 font-bold"},g==="unknown"?a.parsed.__type===n.ax.Unimplemented?t.createElement("span",{className:"text-red-500"},Ce(a.parsed.message["@type"]??a.parsed.message.type??a.parsed.message.type_url??a.parsed.message.typeUrl)):"Unknown":g)),t.createElement(Rt.Z,{title:"Message Data",className:"overflow-x-auto mt-4 p-0",initialOpen:!0},t.createElement("pre",{className:"text-xs text-gray-900 dark:text-white-100 w-full overflow-x-auto"},JSON.stringify(a.raw,null,2)))):t.createElement("div",{className:"h-32 flex flex-col items-center justify-center"},t.createElement(Ie.T,{color:"white"}),t.createElement("p",{className:"text-gray-900 dark:text-white-100 text-xs mt-2"},"Loading message details"))):null};var ht=s(673708);const Vt=({message:e,isLast:o,onClick:a})=>{const r=Ut(e),c=e.__type===n.ax.Unimplemented?Ce(e.message["@type"]??e.message.type??e.message.type_url??e.message.typeUrl):r;return t.createElement("button",{className:`flex items-center justify-between dark:bg-gray-900 mt-2 bg-white-100 w-full cursor-pointer p-4 rounded-2xl ${o?"":"border-b dark:border-gray-800 border-gray-100"}`,onClick:a},t.createElement("div",{className:"flex flex-col flex-1 max-w-[90%]"},t.createElement("p",{className:"font-bold dark:text-white-100 text-gray-900 text-sm text-left"},c)),t.createElement("img",{src:ht.RightArrow,alt:"View Details",className:"block flex-shrink-0 mr-2"}))},jt=({parsedMessages:e,onMessageSelect:o,className:a})=>t.createElement("div",{className:fe()("",a)},e.map((r,c)=>t.createElement(Vt,{key:c,isLast:c===e.length-1,message:r,messageNumber:c+1,onClick:()=>{o(r,c)}}))),zt=(e,o)=>{const{amount:a}=e,r=a[0]?.amount??"",c=(0,k.t7o)(new(Te())(r).toString(),o),d=c.toFormat(5,Te().ROUND_DOWN),g=c.isLessThan("0.00001");return{amount:c,formattedAmount:g&&!c.isEqualTo(0)?"< 0.00001":d}},Kt=({fee:e,error:o,setError:a,disableBalanceCheck:r})=>{const c=(0,i.dco)(),[d]=(0,i.X$P)(),[g]=(0,i.fOz)(),{allAssets:y,nativeTokensStatus:C,s3IbcTokensStatus:b,nonS3IbcTokensStatus:w}=(0,i.zSw)(),W=(0,i.a74)(),Z=(0,i.xxU)(),{data:te,isFetching:E}=(0,i.oOU)(W),B=(0,t.useMemo)(()=>{const N=e?.amount[0]?.denom,V=te?.find(G=>G.ibcDenom?G.ibcDenom===N:G.denom.coinMinimalDenom===N),Y=y.find(G=>V?.ibcDenom||G?.ibcDenom?G?.ibcDenom===V?.ibcDenom:G?.coinMinimalDenom===V?.denom?.coinMinimalDenom)?.amount;return{...V,amount:Y}},[y,e?.amount,te]),{data:ne}=(0,pt.useQuery)(["fee-token-fiat-value",B?.denom?.coinDenom],async()=>(0,i.knL)("1",B?.denom?.coinGeckoId??"",B?.denom?.chain,i.r95[d].currencyPointer,`${Z}-${B?.denom?.coinMinimalDenom}`)),J=(0,t.useMemo)(()=>e?zt(e,B?.denom?.coinDecimals??0):null,[W,c,e,B?.denom?.coinDecimals]);return(0,t.useEffect)(()=>{const N=J?.amount?.toString();!r&&N&&(new(Te())(N).isGreaterThan(B?.amount??0)?a(`You don't have enough ${B?.denom?.coinDenom} to pay the gas fee`):a(null))},[B,J,r]),E||C==="loading"||b==="loading"||w==="loading"?t.createElement(Ie.Z,null):J?t.createElement("div",null,t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide flex items-center"},t.createElement("span",{className:"mr-3"},"Transaction Fee"),t.createElement(re.Z,{content:t.createElement("p",{className:"text-gray-700 dark:text-white-100 text-sm font-medium tracking-wide"},"This dApp does not allow you to edit the transaction fee.")},t.createElement("div",{className:"inline relative"},t.createElement("img",{src:ht.Warning,alt:"Get more context",className:"h-5 w-5"})))),t.createElement("p",{className:"text-gray-700 dark:text-white-100 text-sm font-medium tracking-wide mt-2"},t.createElement("span",{className:"mt-[2px] mr-[2px]"},J.formattedAmount," ",B?.denom?.coinDenom),ne?t.createElement("span",{className:"mr-[2px]"},"(",g(new(Te())(J?.amount??0).multipliedBy(ne)),")"):null),o?t.createElement("p",{className:"text-red-300 text-sm font-medium mt-2 px-1"},o):null):null},Zt=t.memo(Kt);var Jt=s(14080);const Qt=({message:e})=>{const{lcdUrl:o}=(0,i.U9i)(),{data:a,isLoading:r}=ft(e,o??"");return r?t.createElement(Jt.Z,null):t.createElement("li",{className:"font-bold dark:text-white-100 text-gray-900 text-sm mt-1 list-none ml-0"},a==="unknown"?e.__type===n.ax.Unimplemented?(c=>{const d=c.split("."),g=d[d.length-1];return t.createElement("span",{className:"text-red-500"},g)})(e.message["@type"]):"Unknown":a)},Yt=({parsedMessages:e})=>{const a=e===null||e.length===0?!0:e.every(c=>c.__type===n.ax.Unimplemented),r=(0,t.useMemo)(()=>{if(e){let c="",d=0;for(const g of e)g.__type===n.ax.ClaimReward&&(d===0&&(c=`Claim staking reward from ${(0,i.Hnh)(g.validatorAddress)}`),d+=1);return d>1&&(c+=` and +${d-1} more validator${d-1===1?"":"s"}`),c}return""},[e]);return a?null:t.createElement("div",{className:"rounded-2xl p-4 mt-3",style:{backgroundColor:"rgba(58, 207, 146, 0.17)"}},t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},"Transaction Summary"),t.createElement("ul",{className:"mt-2"},r?t.createElement("li",{className:"font-bold dark:text-white-100 text-gray-900 text-sm mt-1 list-none ml-0"},r):e?.map((c,d)=>t.createElement(Qt,{key:d,message:c}))??"No information available"))};function Xt(e){if(e===null||e.length===0)return"";let o="";for(const a of e)if(a.__type===n.ax.AuthzGrant){const r=a.grant.authorization.$type_url??a.grant.authorization["@type"]??a.grant.authorization.type;let c=!1;const d=r==="/cosmos.bank.v1beta1.SendAuthorization";(d||["/cosmos.authz.v1beta1.GenericAuthorization","cosmos-sdk/GenericAuthorization"].includes(r))&&(c=!0),c&&(d||a.grant.authorization?.value?.msg==="/cosmos.bank.v1beta1.MsgSend"?o="You are allowing another account to transfer assets from your wallet for the specific time period. Be aware of scammers and approve with caution.":o="I've verified the wallet I'm giving permissions to")}return o}var yt=s(395362);const Ue={send_immediately:!0,transport:"sendBeacon"},He=e=>{switch(e){case yt._K.LEDGER:return"ledger";case yt._K.PRIVATE_KEY:return"private-key";default:return"seed-phrase"}};var Ye=s(124658);function qt(e,o){return(0,Ye.calculateFee)(parseInt(e),o)}function _t(e,o,a){const r=(0,Ye.calculateFee)(parseInt(a||("gasLimit"in e?e.gasLimit:e.gas).toString()),o);return Le.Fee.fromPartial({gasLimit:r.gas,amount:r?.amount.map(c=>({amount:c.amount,denom:c.denom}))??[],granter:e?.granter,payer:e?.payer})}function en({signRequestData:e,gasPrice:o,gasLimit:a,isAdr36:r,memo:c,isGasOptionSelected:d}){const g=e["sign-request"].signDoc,y=e["sign-request"].signOptions,C=g.fee,b=g.memo,w={chain_id:g.chain_id??g.chainId,account_number:g.account_number??g.accountNumber,sequence:g.sequence,fee:C,memo:b,msgs:g.msgs,...g};if(!r){const W=new(Te())(a),Z=y?.preferNoSetFee&&!d?w.fee:qt(!W.isNaN()&&W.isGreaterThan(0)?W.toString():"gasLimit"in w.fee?w.fee.gasLimit:w.fee.gas,o);w.fee=Z,C.granter&&(w.fee.granter=C.granter),C.payer&&(w.fee.payer=C.payer)}return b||(w.memo=c),{signDoc:{...w},fee:w.fee,allowSetFee:!y?.preferNoSetFee,defaultFee:C,defaultMemo:b}}var Oe=s(128972);function xt(e){if(typeof e["sign-request"].signDoc.bodyBytes=="string"){const o=(0,Oe.fromBase64)(e["sign-request"].signDoc.bodyBytes),a=(0,Oe.fromBase64)(e["sign-request"].signDoc.authInfoBytes),r=e["sign-request"].signDoc.chainId,c=e["sign-request"].signDoc.accountNumber,d={bodyBytes:o,authInfoBytes:a,chainId:r,accountNumber:c};return new F.Gl(d)}else{const o={bodyBytes:new Uint8Array(Object.values(e["sign-request"].signDoc.bodyBytes)),authInfoBytes:new Uint8Array(Object.values(e["sign-request"].signDoc.authInfoBytes)),chainId:e["sign-request"].signDoc.chainId,accountNumber:e["sign-request"].signDoc.accountNumber};return new F.Gl(o)}}function tn({signRequestData:e,gasPrice:o,gasLimit:a,memo:r,isGasOptionSelected:c}){const d=e["sign-request"].signOptions,g=xt(e),y=g.authInfo.fee,C=y;let b;y&&(d&&d.preferNoSetFee&&!c?b=y:b=_t(y,o,a));const w=g.txBody.memo;return{signDoc:{...g.signDoc,bodyBytes:Le.TxBody.encode({...g.txBody,timeoutHeight:new xe.Z(Number(g.txBody.timeoutHeight)),memo:w||r}).finish(),authInfoBytes:Le.AuthInfo.encode({signerInfos:g.authInfo.signerInfos.map(Z=>({...Z,sequence:new xe.Z(Number(Z.sequence))})),fee:b}).finish(),accountNumber:new xe.Z(Number(g.signDoc.accountNumber))},fee:b,allowSetFee:!d?.preferNoSetFee,defaultFee:C,defaultMemo:w}}var nn=s(33359),an=s(379562),vt=s(862949),Xe=s(474087),wt=s(547505),q=s(123280),on=s(72574),sn=s(939337);const rn={...q.osmosisAminoConverters,"/osmosis.concentratedliquidity.poolmodel.concentrated.v1beta1.MsgCreateConcentratedPool":{...q.osmosisAminoConverters["/osmosis.concentratedliquidity.poolmodel.concentrated.v1beta1.MsgCreateConcentratedPool"],aminoType:"osmosis/cl-create-pool"},"/osmosis.valsetpref.v1beta1.MsgDelegateToValidatorSet":{...q.osmosisAminoConverters["/osmosis.valsetpref.v1beta1.MsgDelegateToValidatorSet"],aminoType:"osmosis/MsgDelegateToValidatorSet"},"/osmosis.valsetpref.v1beta1.MsgUndelegateFromValidatorSet":{...q.osmosisAminoConverters["/osmosis.valsetpref.v1beta1.MsgUndelegateFromValidatorSet"],aminoType:"osmosis/MsgUndelegateFromValidatorSet"}},cn={...q.ibcAminoConverters,"/ibc.applications.transfer.v1.MsgTransfer":{...q.ibcAminoConverters["/ibc.applications.transfer.v1.MsgTransfer"],toAmino:({sourcePort:e,sourceChannel:o,token:a,sender:r,receiver:c,timeoutHeight:d})=>({source_port:e,source_channel:o,token:{denom:a?.denom,amount:a?.amount??"0"},sender:r,receiver:c,timeout_height:d?{revision_height:d.revisionHeight?.toString(),revision_number:d.revisionNumber?.toString()}:{}}),fromAmino:({source_port:e,source_channel:o,token:a,sender:r,receiver:c,timeout_height:d,timeout_timestamp:g,memo:y=""})=>({memo:y,sourcePort:e,sourceChannel:o,token:{denom:a?.denom??"",amount:a?.amount??""},sender:r,receiver:c,timeoutHeight:d?{revisionHeight:xe.Z.fromString(d.revision_height||"0",!0),revisionNumber:xe.Z.fromString(d.revision_number||"0",!0)}:void 0,timeoutTimestamp:xe.Z.fromString(g??"0")})}},ln=new Ye.AminoTypes({...q.cosmosAminoConverters,...cn,...rn,...q.cosmwasmAminoConverters,...sn.Lk}),dn=new Xe.Registry([...q.cosmosProtoRegistry,...q.osmosisProtoRegistry,...q.cosmwasmProtoRegistry,...q.ibcProtoRegistry]),Mn=i.rNU.LogCosmosDappTx,un=["cosmos.leapwallet.io","swapfast.app"];function Et(e){return un.some(o=>e.trim().toLowerCase().includes(o))}function St(e){return(0,k.Hum)({authInfoBytes:e.signed.authInfoBytes,bodyBytes:e.signed.bodyBytes,signatures:[(0,Oe.fromBase64)(e.signature.signature)]})}async function mn(e,o,a,r,c,d,g,y){if(Et(a))return;const C=St(e);await g({txHash:C,txType:i.pb0.Dapp,metadata:{dapp_url:a,tx_message:o.map(b=>b?.parsed??b)},feeQuantity:r?.amount[0]?.amount,feeDenomination:r?.amount[0]?.denom,chain:c,chainId:y,address:d})}function kt(e,o){const r={typeUrl:"/cosmos.tx.v1beta1.TxBody",value:{messages:e.signed.msgs.map(w=>ln.fromAmino(w)),memo:e.signed.memo,timeoutHeight:e.signed.timeout_height}},c=dn.encode(r),d=vt.Int53.fromString(e.signed.fee.gas).toNumber(),g=vt.Int53.fromString(e.signed.sequence).toNumber(),y=(0,Xe.encodePubkey)((0,nn.encodeSecp256k1Pubkey)(o)),C=(0,Xe.makeAuthInfoBytes)([{pubkey:y,sequence:g}],e.signed.fee.amount,d,e.signed.fee.granter,e.signed.fee.payer,on.SignMode.SIGN_MODE_LEGACY_AMINO_JSON);return(0,k.Hum)({authInfoBytes:C,bodyBytes:c,signatures:[(0,Oe.fromBase64)(e.signature.signature)]})}async function pn(e,o,a,r,c,d){if(Et(d)||e.signed.msgs.find(y=>y.type==="query_permit"))return;const g=kt(e,o);await a({txHash:g,txType:i.pb0.Dapp,metadata:{dapp_url:d,tx_message:e.signed.msgs},feeQuantity:e.signed.fee?.amount[0]?.amount,feeDenomination:e.signed.fee?.amount[0]?.denom,chain:r,chainId:e.signed.chain_id,address:c})}async function gn(e,o,a,r,c,d,g){const y=e.signed,C=(0,Oe.toBase64)(an.Secp256k1.compressPubkey(o)),b={message:(0,k.dN$)(y.msgs),memo:y.memo,signMode:wt.fk_,pubKey:C,timeoutHeight:parseInt(y.timeout_height,10),sequence:parseInt(y.sequence,10),accountNumber:parseInt(y.account_number,10),chainId:y.chain_id,fee:y.fee},{txRaw:w}=(0,wt._Xw)(b),W=(0,k.N44)({signature:e.signature.signature,ethereumChainId:parseInt(r??"1"),txRaw:w});await a({txHash:W,txType:i.pb0.Dapp,metadata:{dapp_url:g,tx_message:e.signed.msgs},feeQuantity:e.signed.fee?.amount[0]?.amount,feeDenomination:e.signed.fee?.amount[0]?.denom,chain:c,chainId:e.signed.chain_id,address:d})}var Ct=s(348834).Buffer;const fn=Ge.w.useGetWallet,bt=new n.tX,hn=({data:e,chainId:o,isSignArbitrary:a})=>{const r=(0,t.useRef)(!1),c=(0,t.useRef)(!1),d=(0,t.useRef)(!1),[g,y]=(0,t.useState)(!1),[C,b]=(0,t.useState)(!1),[w,W]=(0,t.useState)(null),[Z,te]=(0,t.useState)(!1),[E,B]=(0,t.useState)(),[ne,J]=(0,t.useState)(null),[N,V]=(0,t.useState)(null),[Y,G]=(0,t.useState)(""),[Q,Ae]=(0,t.useState)(""),[qe,xn]=(0,t.useState)(!1),U=(0,i.QSC)(),I=(0,i.rTu)(),_e=fn(),L=(0,ye.a7)(),et=(0,z.e7)({activeChain:L}),We=i.rNU.useLogCosmosDappTx(),vn=(0,i.dco)(),Fe=(0,t.useRef)(!1),[Ve,wn]=(0,t.useState)(null),[tt,En]=(0,t.useState)(!1),{setDefaultFee:Sn}=(0,i.ezp)(),nt=(0,t.useRef)(null),Tt=(0,Ot.r)(L);(0,t.useEffect)(()=>{!Ve&&nt.current&&setTimeout(()=>{nt.current.scrollIntoView({behavior:"smooth",block:"nearest"})},10)},[Ve]);const[be,kn]=(0,t.useState)({gasPrice:et.gasPrice,option:i.j1p.LOW});(0,u.h)(I!==null,"activeWallet is null");const Cn=(0,t.useMemo)(()=>I.walletType===i._KQ.LEDGER?`${Pe.dN[I.walletType]} Wallet ${I.addressIndex+1}`:(0,Ze.k)(I.name),[I.addressIndex,I.name,I.walletType]),{isAmino:we,isAdr36:At,ethSignType:pe,signOptions:je,eip712Types:at}=(0,t.useMemo)(()=>{const p=!!e?.isAmino,A=!!e?.isAdr36,j=e?.ethSignType,x=e?.eip712Types,oe=e?.signOptions;return{isAmino:p,isAdr36:A,ethSignType:j,signOptions:oe,eip712Types:x}},[e]),[ot,T,Dt,ge,De,ae,st]=(0,t.useMemo)(()=>{if(we){const p=en({signRequestData:{"sign-request":e},gasPrice:be.gasPrice,gasLimit:Y,isAdr36:!!At,memo:Q,isGasOptionSelected:Fe.current});let A;return a?A=e?.signOptions?.isADR36WithString?Ct.from(p.signDoc.msgs[0].value.data,"base64").toString("utf-8"):p.signDoc.msgs[0].value.data:pe?A=[{raw:p.signDoc.msgs,parsed:{__type:"sign/MsgSignData",message:p.signDoc.msgs[0].value.data}}]:A=p.signDoc.msgs.map(j=>{let x;try{if(x=F.uA.convertFromAminoToDirect(j.type,j),!x)throw new Error("unable to convert amino message to direct");return{raw:j,parsed:bt.parse({"@type":x.typeUrl,...j.value})}}catch{return{raw:j,parsed:{__type:n.ax.Unimplemented,message:j}}}}),[p.allowSetFee,A,p.signDoc,p.signDoc,p.fee,p.defaultFee,p.defaultMemo]}else{const p=tn({signRequestData:{"sign-request":e},gasPrice:be.gasPrice,gasLimit:Y,memo:Q,isGasOptionSelected:Fe.current}),A=xt({"sign-request":{signDoc:p.signDoc}}),j=A.txMsgs.map(x=>{if(x instanceof F.dj){const O=x.toJSON();return{raw:O,parsed:{__type:n.ax.Unimplemented,message:{"@type":O.type_url,body:O.value}}}}if(x.unpacked.msg instanceof Uint8Array){const O=h(x.unpacked.msg),_=Ct.from(O,"base64").toString();try{const D=JSON.parse(_);x.unpacked.msg=D}catch{x.unpacked.msg=_}}const oe=(0,F.$c)(x.unpacked);return{raw:{"@type":x.typeUrl,...oe},parsed:bt.parse({"@type":x.typeUrl,...oe})}});return[p.allowSetFee,j,A.toJSON(),p.signDoc,p.fee,p.defaultFee,p.defaultMemo]}},[we,e,be.gasPrice,Y,At,Q,a,pe]),H=e?.origin,bn=H?.split("//")?.at(-1)?.split(".")?.at(-2),Tn=(0,Ke.G)(H),Be=(0,t.useMemo)(()=>{if(Array.isArray(T))return T.map(p=>p.raw["@type"]??p.raw.type).filter(Boolean)},[T]),Ee=(0,t.useCallback)(async()=>{if(!(c.current||d.current)){if(c.current=!0,!(0,me.l)())try{l().track(K.B_.DappTxnRejected,{dAppURL:H,transactionTypes:Be,signMode:we?"sign-amino":"sign-direct",walletType:He(I.walletType),chainId:U.chainId,chainName:U.chainName,productVersion:v().runtime.getManifest().version,time:Date.now()/1e3},Ue)}catch(p){(0,P.Tb)(p)}v().runtime.sendMessage({type:ke.u.signResponse,payload:{status:"error",data:"Transaction cancelled by the user."}}),await(0,k._vH)(100),setTimeout(async()=>{window.close()},10)}},[H,Be,we,I.walletType,U.chainId,U.chainName]),An=(0,t.useMemo)(()=>{if(!(!I||!o||!H))return{wallets:[I],chainIds:[o],origin:H}},[I,o,H]),Nt=(0,t.useMemo)(()=>ae?"gasLimit"in ae?ae.gasLimit.toString():ae.gas.toString():vn[L].DEFAULT_GAS_IBC.toString(),[L,ae]),It=(0,t.useMemo)(()=>{if(ae&&ae?.amount[0]){const{denom:p}=ae.amount[0];return p}return et.gasPrice.denom},[ae,et.gasPrice]),Dn=(0,t.useCallback)(async()=>{const p=I.addresses[L];if(!L||!ge||!p)return;const A=a||pe,j=x=>()=>{};if(we){J(null);try{if(!A){let D=null;try{const X=ge.fee;D=await Tt({feeDenom:X.amount[0].denom,feeAmount:X.amount[0].amount,gaslimit:xe.Z.fromString(X.gas),chain:L},j(X))}catch(X){(0,P.Tb)(X)}if(D===!1)throw new Error("Unusually high fees detected, could not process transaction. Please try again.")}const x=await _e(L,!!(pe||at));I.walletType===i._KQ.LEDGER&&te(!0);const O=(await x.getAccounts())[0].pubkey,_=await(async()=>{try{return pe?(0,k.Xei)(p,x,ge,pe):at?await(0,k.Da1)(p,x,ge,at):x.signAmino(p,ge,{extraEntropy:je?.enableExtraEntropy?je?.enableExtraEntropy:!1})}catch(D){return(0,P.Tb)(D),null}})();if(!_)throw new Error("Could not sign transaction");if(!a)try{if(U.bip44.coinType==="60"&&L==="injective"){const D=U.chainId===ge.chain_id?U.evmChainId:U.evmChainIdTestnet;await gn(_,O,We,D??"1",L,p,H??origin)}else await pn(_,O,We,L,p,H??origin)}catch(D){(0,P.Tb)(D)}try{const D={dAppURL:H,transactionTypes:Array.isArray(T)?T?.map(X=>X.raw.type).filter(Boolean):[],signMode:"sign-amino",walletType:He(I.walletType),chainId:U.chainId,chainName:U.chainName,productVersion:v().runtime.getManifest().version,time:Date.now()/1e3};try{const X=kt(_,O);D.txHash=X}catch{}(0,me.l)()||l().track(K.B_.DappTxnApproved,D,Ue)}catch(D){(0,P.Tb)(D)}d.current=!0,await(0,k._vH)(100);try{v().runtime.sendMessage({type:ke.u.signResponse,payload:{status:"success",data:_}})}catch{throw new Error("Could not send transaction to the dApp")}setTimeout(async()=>{window.close()},10)}catch(x){x instanceof Error&&(x instanceof k.KW8?(B(x.message),x.message===k.KHu&&Ee()):x.message===k.KHu?Ee():J(x.message))}finally{te(!1)}}else try{if(!A){let O=null;const D=new F.Gl(ge).authInfo.fee;if(!D)throw new Error("Transaction does not have fee");try{O=await Tt({feeDenom:D.amount[0].denom,feeAmount:D.amount[0].amount,gaslimit:D.gasLimit,chain:L},j(D))}catch(X){(0,P.Tb)(X)}if(O===!1)throw new Error("Unusually high fees detected, could not process transaction. Please try again.")}const x=await _e(L),oe=await(async()=>{try{return typeof x.signDirect=="function"?x.signDirect(p,Le.SignDoc.fromPartial(ge)):null}catch(O){return(0,P.Tb)(O),null}})();if(!oe)throw new Error("Could not sign transaction");d.current=!0,mn(oe,T??[],H??origin,De,L,I?.addresses[L],We,Dt.chain_id).catch(O=>{(0,P.Tb)(O)});try{const O=St(oe);(0,me.l)()||l().track(K.B_.DappTxnApproved,{dAppURL:H,transactionTypes:Array.isArray(T)?T?.map(_=>_.raw["@type"]??_.raw.type).filter(Boolean):[],signMode:"sign-direct",walletType:He(I.walletType),txHash:O,chainId:U.chainId,chainName:U.chainName,productVersion:v().runtime.getManifest().version,time:Date.now()/1e3},Ue)}catch(O){(0,P.Tb)(O)}await(0,k._vH)(100);try{v().runtime.sendMessage({type:ke.u.signResponse,payload:{status:"success",data:oe}})}catch{throw new Error("Could not send transaction to the dApp")}setTimeout(async()=>{window.close()},10)}catch(x){x instanceof Error&&(x.message===k.KHu?Ee():J(x.message))}},[I.addresses,L,ge,we,_e,H,De,We,Ee,pe]);(0,t.useEffect)(()=>{Sn(ae)},[ae]),(0,t.useEffect)(()=>(window.addEventListener("beforeunload",Ee),v().storage.local.remove(lt.u1),()=>{window.removeEventListener("beforeunload",Ee)}),[Ee]),(0,t.useEffect)(()=>{if(!(!H||!Be)&&!r.current)try{(0,me.l)()||l().track(K.B_.DappTxnInit,{dAppURL:H,transactionTypes:Be,signMode:we?"sign-amino":"sign-direct",walletType:He(I.walletType),chainId:U.chainId,chainName:U.chainName,productVersion:v().runtime.getManifest().version,time:Date.now()/1e3},Ue),r.current=!0}catch(p){(0,P.Tb)(p)}},[I.walletType,U.chainId,U.chainName,we,H,Be]);const ze=(0,t.useMemo)(()=>a?"":Array.isArray(T)?Xt(Array.isArray(T)?T?.map(p=>p.parsed):null):"",[a,T]),Pt=!It||!!ne||!!N||!!ze&&qe===!1||Ve===!1&&!tt;return t.createElement("div",{className:"w-[400px] h-full relative self-center justify-self-center flex justify-center items-center mt-2"},t.createElement("div",{className:"relative w-[400px] overflow-clip rounded-md border border-gray-300 dark:border-gray-900"},t.createElement(ie.Z,{header:t.createElement("div",{className:"w-[396px]"},t.createElement(S.Header,{imgSrc:U.chainSymbolImageUrl??ut.GenericLight,title:t.createElement(S.Buttons.Wallet,{brandLogo:(0,me.l)()?t.createElement("img",{className:"w-[24px] h-[24px] mr-1",src:ce.r.Logos.CompassCircle}):void 0,title:(0,le.fy)(Cn,10),className:"pr-4 cursor-default"})}))},t.createElement("div",{className:"px-7 py-3 overflow-y-auto relative",style:{height:`calc(100% - 72px - ${ze?"152px":"72px"})`}},t.createElement("h2",{className:"text-center text-lg font-bold dark:text-white-100 text-gray-900 w-full"},"Approve Transaction"),t.createElement("div",{className:"flex items-center mt-3 rounded-2xl dark:bg-gray-900 bg-white-100 p-4"},t.createElement(S.Avatar,{avatarImage:Tn,avatarOnError:(0,Je._)(ce.r.Misc.Globe),size:"sm",className:"rounded-full overflow-hidden"}),t.createElement("div",{className:"ml-3"},t.createElement("p",{className:"capitalize text-gray-900 dark:text-white-100 text-base font-bold"},bn),t.createElement("p",{className:"lowercase text-gray-500 dark:text-gray-400 text-xs font-medium"},H))),!pe&&!a&&t.createElement(Yt,{parsedMessages:Array.isArray(T)?T?.map(p=>p.parsed):null}),!pe&&!a?t.createElement(z.ZP,{initialFeeDenom:It,gasLimit:Y||Nt,setGasLimit:p=>G(p.toString()),recommendedGasLimit:Nt,gasPriceOption:Fe.current||ot?be:{...be,option:""},onGasPriceOptionChange:p=>{Fe.current=!0,kn(p)},error:N,setError:V,considerGasAdjustment:!1,disableBalanceCheck:De.granter||je.disableBalanceCheck,fee:De,chain:L,validateFee:!0,onInvalidFees:(p,A)=>{try{A===!1&&wn(!1)}catch(j){(0,P.Tb)(j)}},notUpdateInitialGasPrice:!ot},t.createElement(Qe.m,{className:"mt-3",tabsList:[{id:"fees",label:"Fees"},{id:"messages",label:`Messages${T?.length?` (${T.length})`:""}`},{id:"data",label:"Data"}],tabsContent:{fees:ot?t.createElement("div",{className:"rounded-2xl p-4 mt-3 dark:bg-gray-900 bg-white-100"},t.createElement("div",{className:"flex items-center"},t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},"Gas Fees ",t.createElement("span",{className:"capitalize"},"(",be.option,")")),t.createElement(re.Z,{content:t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm"},"You can choose higher gas fees for faster transaction processing.")},t.createElement("div",{className:"relative ml-2"},t.createElement("img",{src:ce.r.Misc.InfoCircle,alt:"Hint"})))),t.createElement(z.ZP.Selector,{className:"mt-2"}),t.createElement("div",{className:"flex items-center justify-end"},t.createElement(z.ZP.AdditionalSettingsToggle,{className:"p-0 mt-3"})),t.createElement(z.ZP.AdditionalSettings,{className:"mt-2",showGasLimitWarning:!0}),N?t.createElement("p",{className:"text-red-300 text-sm font-medium mt-2 px-1"},N):null):t.createElement(t.Fragment,null,t.createElement("div",{className:"rounded-2xl p-4 mt-3 dark:bg-gray-900 bg-white-100"},t.createElement(Zt,{fee:De,error:N,setError:V,disableBalanceCheck:De.granter||je.disableBalanceCheck}),t.createElement("div",{className:"flex items-center justify-end"},t.createElement(z.ZP.AdditionalSettingsToggle,{className:"p-0 mt-3"})),t.createElement(Lt,{gasPriceOption:be,gasPriceError:N}))),memo:t.createElement("div",{className:"mt-3"},t.createElement($t,{disabled:!!st,memo:st||Q,setMemo:p=>{Ae(p)}})),messages:t.createElement("div",{className:"mt-3"},T?t.createElement(jt,{parsedMessages:T.map(p=>p.parsed),onMessageSelect:(p,A)=>{W({index:A,parsed:T[A].parsed,raw:T[A].raw}),b(!0)}}):t.createElement("div",null,t.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm"},"No information available. The transaction can still be approved."))),data:t.createElement("pre",{className:"text-xs text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl"},JSON.stringify(Dt,(p,A)=>typeof A=="bigint"?A.toString():A,2))}})):t.createElement("pre",{className:fe()("text-xs text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl",{"whitespace-pre-line break-words":a})},a?T:JSON.stringify(JSON.parse(Array.isArray(T)?T?.[0].parsed?.message:null),null,2)),t.createElement("div",{className:"mt-3"},ne??E?t.createElement(de._,{text:ne??E}):null),t.createElement(Re,{showLedgerPopup:Z,onClose:()=>{te(!1)}}),t.createElement(ct,{isOpen:g,onClose:()=>y(!1),currentWalletInfo:An,title:"Select Wallet"}),t.createElement(Ft,{isOpen:C,setIsOpen:b,onClose:()=>W(null),message:w}),Ve===!1&&t.createElement("div",{ref:nt,className:"flex dark:bg-gray-900 bg-white-100 px-4 py-3 w-full rounded-2xl items-center mt-3"},t.createElement("div",{className:"mr-3",onClick:()=>En(!tt)},tt?t.createElement("span",{className:"material-icons-round cursor-pointer",style:{color:m.w.getChainColor(L)}},"check_box"):t.createElement("span",{className:"material-icons-round text-gray-700 cursor-pointer"},"check_box_outline_blank")),t.createElement(he.Z,{size:"sm",color:"text-gray-400"},"The selected fee amount is unusually high.",t.createElement("br",null),"I confirm and agree to proceed"))),t.createElement("div",{className:"absolute bottom-0 left-0 py-3 px-7 dark:bg-black-100 bg-gray-50 w-full"},ze&&t.createElement("div",{className:"flex flex-row items-start mb-3 border border-yellow-600 rounded-lg p-[4px]"},t.createElement("div",{className:"mr-2",onClick:()=>xn(!qe)},qe?t.createElement("span",{className:"material-icons-round cursor-pointer",style:{color:m.w.getChainColor(L)}},"check_box"):t.createElement("span",{className:"material-icons-round text-gray-900 cursor-pointer relative"},"indeterminate_check_box",t.createElement("span",{className:"absolute w-[10px] h-[6px] bg-gray-900 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2"}))),t.createElement(he.Z,{color:"text-gray-400 text-[15px]"},ze)),t.createElement("div",{className:"flex items-center justify-center w-full space-x-3"},t.createElement(S.Buttons.Generic,{title:"Reject Button",color:m.w.gray900,onClick:Ee},"Reject"),t.createElement(S.Buttons.Generic,{title:"Approve Button",color:m.w.getChainColor(L),onClick:Dn,disabled:Pt,className:`${Pt?"cursor-not-allowed opacity-50":""}`},"Approve"))))))},yn=(e=>{const o=()=>{const[a,r]=(0,t.useState)(),[c,d]=(0,t.useState)(k.NOo),[g,y]=(0,t.useState)(!1),[C,b]=(0,t.useState)(null),[w,W]=(0,t.useState)(),[Z]=(0,t.useState)(null),te=(0,ye.a7)(),E=(0,ye.N8)(),B=(0,i.obn)(),ne=(0,i.g8j)();(0,t.useEffect)(()=>{(0,dt._d)().then(d).catch(P.Tb)},[]);const J=(N,V)=>{if(V.id===v().runtime.id&&N.type===ke.u.signTransaction){const Y=N.payload,G=Y.chainId?Y.chainId:Y.signDoc?.chainId,Q=G?c[G]:void 0;if(!Q){v().runtime.sendMessage({type:ke.u.signResponse,payload:{status:"error",data:`Invalid chainId ${G}`}}),setTimeout(async()=>{window.close()},10);return}if(Y.signOptions.isSignArbitrary&&y(!0),r(Q),W(G),b(Y),Q&&Q!==te&&E(Q),Q){const Ae=k.oCA[Q]?.testnetChainId===G;!Ae&&B==="testnet"?ne("mainnet"):Ae&&B==="mainnet"&&ne("testnet")}}};if((0,t.useEffect)(()=>(v().runtime.sendMessage({type:ke.u.signingPopupOpen}),v().runtime.onMessage.addListener(J),()=>{v().runtime.onMessage.removeListener(J)}),[]),a===te&&C&&w)return t.createElement(e,{data:C,chainId:w,isSignArbitrary:g});if(Z){const N=(V=>{switch(V){case"no-data":return"No Transaction Data";default:return"Something Went Wrong"}})(Z.code);return t.createElement(ie.Z,{className:"self-center justify-self-center",header:t.createElement(S.Header,{title:"Sign Transaction"})},t.createElement("div",{className:"h-full w-full flex flex-col gap-4 items-center justify-center"},t.createElement("h1",{className:"text-red-300 text-2xl font-bold px-4 text-center"},N),t.createElement("p",{className:"text-black-100 dark:text-white-100 text-sm font-medium px-4 text-center"},Z.message),t.createElement("button",{className:"mt-8 py-1 px-4 text-center text-sm font-medium dark:text-white-100 text-black-100 bg-indigo-300 rounded-full",onClick:()=>{window.close()}},"Close Wallet")))}return t.createElement(ie.Z,{className:"self-center justify-self-center",header:t.createElement(S.Header,{title:"Sign Transaction"})},t.createElement("div",{className:"h-full w-full flex flex-col gap-4 items-center justify-center"},t.createElement(Ie.T,{color:"white"})))};return o.displayName=`withTxnSigningRequest(${e.displayName})`,o})(t.memo(hn))},150633:()=>{}}]);
