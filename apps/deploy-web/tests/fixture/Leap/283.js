"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[283],{425355:(ee,S,r)=>{r.d(S,{m:()=>C});var i=r(294184),E=r.n(i),N=r(202784);const C=({tabsList:D,tabsContent:te,className:se})=>{const[j,ae]=N.useState(D[0].id);return N.createElement("div",{className:E()("w-full",se)},N.createElement("div",{className:"w-full flex items-center justify-start border-b border-gray-900"},D.map(({id:A,label:G})=>N.createElement("button",{key:A,className:`px-4 py-2 cursor-pointer transition-colors border-b-2 ${j===A?"dark:border-white-100 border-gray-900 font-bold text-gray-900 dark:text-white-100":"border-transparent text-gray-700 dark:text-gray-400"}`,onClick:()=>ae(A)},G))),N.createElement("div",{className:"w-full"},te[j]))}},675335:(ee,S,r)=>{r.d(S,{u:()=>i});var i=(E=>(E.signResponse="sign-response",E.signingPopupOpen="signing-popup-open",E.signTransaction="sign-transaction",E.signSeiEvmResponse="sign-sei-evm-response",E))(i||{})},460283:(ee,S,r)=>{r.r(S),r.d(S,{default:()=>Ze});var i=r(964266);const E={ETH__REQUEST_ACCOUNTS:"eth_requestAccounts",ETH__SEND_TRANSACTION:"eth_sendTransaction",ETH__SIGN:"eth_sign",ETH__SIGN_TYPED_DATA_V4:"eth_signTypedData_v4",PERSONAL_SIGN:"personal_sign",WALLET__REQUEST_PERMISSIONS:"wallet_requestPermissions",WALLET__WATCH_ASSET:"wallet_watchAsset",WALLET__SWITCH_ETHEREUM_CHAIN:"wallet_switchEthereumChain"},C=Object.assign(Object.assign({},{ETH__ACCOUNTS:"eth_accounts",ETH__CHAIN_ID:"eth_chainId",ETH__CALL:"eth_call",ETH__GET_BALANCE:"eth_getBalance",ETH__BLOCK_NUMBER:"eth_blockNumber",ETH__ESTIMATE_GAS:"eth_estimateGas",ETH__GET_BLOCK_BY_NUMBER:"eth_getBlockByNumber",WALLET__REVOKE_PERMISSIONS:"wallet_revokePermissions",ETH__GET_TRANSACTION_RECEIPT:"eth_getTransactionReceipt",ETH__GET_TRANSACTION_BY_HASH:"eth_getTransactionByHash"}),E),D={USER_REJECTED_REQUEST:4001,INVALID_PARAMS:-32602,INTERNAL:-32603,UNRECOGNIZED_CHAIN_ID:4902},te={[D.USER_REJECTED_REQUEST]:"User rejected the request.",[D.INVALID_PARAMS]:"Invalid method parameter(s)."},se={ACCOUNTS_CHANGED:"accountsChanged",CHAIN_CHANGED:"chainChanged"},j={ETHEREUM:"ETHEREUM"};var ae=r(537109);class A extends null{constructor(t){super(),this.chainIds=t}static type(){return"enable-access"}validateBasic(){if(!this.chainIds||this.chainIds.length===0)throw new Error("chain id not set")}type(){return A.type()}}class G extends null{constructor(){super()}static type(){return"get-supported-chains"}validateBasic(){}type(){return G.type()}}class Y extends null{constructor(t){super(),this.chainInfo=Y.sanitize(t)}static type(){return"suggest-chain-info"}static sanitize(t){var s,n;if(!t)throw new Error("Chain info not set");const a=Object.assign({},t);if(!a.bip44)throw new Error("bip44 not set");if(!a.rpc)throw new Error("rpc url not set");if(!a.rest)throw new Error("rest url not set");if(!a.chainId)throw new Error("chain id not set");if(!a.chainName)throw new Error("chain name not set");if(!a.feeCurrencies)throw new Error("stake currency not set");if(!a.bech32Config)throw new Error("bech32 config not set");return{rpc:a.rpc,rest:a.rest,chainId:a.chainId,chainName:(s=a.chainName)!==null&&s!==void 0?s:a.name,stakeCurrency:a.stakeCurrency,walletUrlForStaking:a.walletUrlForStaking,bip44:a.bip44,alternativeBIP44s:a.alternativeBIP44s,bech32Config:a.bech32Config,currencies:a.currencies,feeCurrencies:a.feeCurrencies,features:a.features,apiStatus:a?.apiStatus,theme:a.theme,image:a.image,chainRegistryPath:(n=a.chainRegistryPath)!==null&&n!==void 0?n:a.bech32Config.bech32PrefixAccAddr}}validateBasic(){if(!this.chainInfo)throw new Error("chain info not set")}type(){return Y.type()}}class ne extends null{constructor(t){super(),this.chainId=t}static type(){return"get-key"}validateBasic(){if(!this.chainId)throw new Error("chain id not set")}type(){return ne.type()}}class re extends null{constructor(t){super(),this.chainIds=t}static type(){return"get-keys"}type(){return re.type()}validateBasic(){}}class K extends null{constructor(t,s,n){super(),this.chainId=t,this.tx=s,this.mode=K.getBroadcastMode(n)}static getBroadcastMode(t){return t==="async"?BroadcastMode.BROADCAST_MODE_ASYNC:t==="sync"?BroadcastMode.BROADCAST_MODE_SYNC:t==="block"?BroadcastMode.BROADCAST_MODE_BLOCK:BroadcastMode.BROADCAST_MODE_UNSPECIFIED}static type(){return"send-tx-to-background"}validateBasic(){if(!this.chainId)throw new Error("chain id is empty");if(!this.tx)throw new Error("tx is empty");if(!this.mode||this.mode!==BroadcastMode.BROADCAST_MODE_SYNC&&this.mode!==BroadcastMode.BROADCAST_MODE_ASYNC&&this.mode!==BroadcastMode.BROADCAST_MODE_BLOCK)throw new Error("invalid mode")}type(){return K.type()}}class ie extends null{constructor(t,s,n,a={}){super(),this.chainId=t,this.signer=s,this.signDoc=n,this.signOptions=a}static type(){return"request-sign-amino"}validateBasic(){if(!this.chainId)throw new Error("chain id not set");if(!this.signer)throw new Error("signer not set");const t=this.signDoc,s=(()=>t&&t.msgs&&Array.isArray(t.msgs)&&t.msgs.length===1?t.msgs[0].type==="sign/MsgSignData":!1)();if(!s&&t.chain_id!==this.chainId)throw new Error("Chain id in the message is not matched with the requested chain id");if(s&&t.memo)throw new Error("Adr36 messages should not have memo");if(s&&t.chain_id!=="")throw new Error("Adr36 messages should not have chain_id");if(s&&t.account_number!=="0")throw new Error("Adr36 messages should not have account_number");if(s&&t.sequence!=="0")throw new Error("Adr36 messages should not have sequence");if(s&&t.fee.amount.length!==0)throw new Error("Adr36 messages should not have fee");if(s&&t.fee.gas!=="0")throw new Error("Adr36 messages should not have gas");if(!this.signOptions)throw new Error("Sign options are null")}type(){return ie.type()}}class oe extends null{constructor(t,s,n,a,m){super(),this.chainId=t,this.signer=s,this.eip712=n,this.signDoc=a,this.signOptions=m}static type(){return"request-experimental-eip-712-message"}validateBasic(){if(!this.chainId)throw new Error("Chain id not set");if(!this.signer)throw new Error("Signer not set")}type(){return oe.type()}}class ce extends null{constructor(t,s,n,a={}){super(),this.chainId=t,this.signer=s,this.signDoc=n,this.signOptions=a}static type(){return"request-sign-direct"}validateBasic(){if(!this.chainId)throw new Error("chain id not set");if(!this.signer)throw new Error("signer not set");if(!this.signOptions)throw new Error("Sign options are null")}type(){return ce.type()}}class le extends null{constructor(t,s,n,a){super(),this.chainId=t,this.signer=s,this.data=n,this.signature=a}static type(){return"request-verify-adr-36-amino-doc"}validateBasic(){if(!this.chainId)throw new Error("chain id not set");if(!this.signer)throw new Error("signer not set");if(!this.signature)throw new Error("Signature not set")}type(){return le.type()}}class de extends null{constructor(t,s,n){super(),this.chainId=t,this.contractAddress=s,this.viewingKey=n}static type(){return"suggest-token"}validateBasic(){if(!this.chainId)throw new Error("Chain id is empty");if(!this.contractAddress)throw new Error("Contract address is empty")}type(){return de.type()}}class he extends null{constructor(t,s){super(),this.chainId=t,this.contractAddress=s}static type(){return"get-secret20-viewing-key"}validateBasic(){if(!this.chainId)throw new Error("Chain id is empty");if(!this.contractAddress)throw new Error("Contract address is empty")}type(){return he.type()}}class me extends null{constructor(t,s,n){super(),this.chainId=t,this.contractAddress=s,this.viewingKey=n}static type(){return"update-secret20-viewing-key"}validateBasic(){if(!this.chainId)throw new Error("Chain id is empty");if(!this.contractAddress)throw new Error("Contract address is empty")}type(){return me.type()}}class ue extends null{constructor(t){super(),this.chainId=t}static type(){return"get-pubkey-msg"}validateBasic(){if(!this.chainId)throw new Error("chain id not set")}type(){return ue.type()}}class ge extends null{constructor(t,s){super(),this.chainId=t,this.nonce=s}static type(){return"get-tx-encryption-key-msg"}validateBasic(){if(!this.chainId)throw new Error("chain id not set");if(!this.nonce)throw new Error("nonce is null")}type(){return ge.type()}}class Ee extends null{constructor(t,s,n){super(),this.chainId=t,this.contractCodeHash=s,this.msg=n}static type(){return"request-encrypt-msg"}validateBasic(){if(!this.chainId)throw new Error("chain id not set");if(!this.contractCodeHash)throw new Error("contract code hash not set");if(!this.msg)throw new Error("msg not set")}type(){return Ee.type()}}class pe extends null{constructor(t,s,n){super(),this.chainId=t,this.cipherText=s,this.nonce=n}static type(){return"request-decrypt-msg"}validateBasic(){if(!this.chainId)throw new Error("chain id not set");if(!this.cipherText||this.cipherText.length===0)throw new Error("ciphertext not set");if(!this.nonce||this.nonce.length===0)throw new Error("nonce not set")}type(){return pe.type()}}var et=r(367525);const Z=()=>{};class tt extends null{constructor({name:t,target:s,targetWindow:n}){super({objectMode:!0}),this._name=t,this._target=s,this._targetWindow=n||window,this._origin=n?"*":location.origin,this._init=!1,this._haveSyn=!1,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1),this._write("SYN",null,Z),this.cork()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}_onMessage(t){const s=t.data;if(!(this._origin!=="*"&&t.origin!==this._origin)&&t.source===this._targetWindow&&typeof s=="object"&&s.target===this._name&&s.data)if(!this._init)s.data==="SYN"?(this._haveSyn=!0,this._write("ACK",null,Z)):s.data==="ACK"&&(this._init=!0,this._haveSyn||this._write("ACK",null,Z),this.uncork());else try{this.push(s.data)}catch(n){this.emit("error",n)}}_read(){}_write(t,s,n){const a={target:this._target,data:t};this._targetWindow.postMessage(a,this._origin),n(null)}}var p=r(564510),h=r(339279),Be=r(206391),Oe=r.n(Be),V=r(892742),F=r(128844),B=r(675335),Pe=r(164012),Q=r(244876),e=r(202784),Le=r(472565),v=r.n(Le),Ge=r(571696),He=r.n(Ge),fe=r(472415),ye=r(425355),we=r(389320),ve=r(347703),O=r(508181),Te=r(378268),H=r(610675),xe=r(111819),Se=r(861111),Ne=r(15815),Ce=r(712878);function _(){v().runtime.sendMessage({type:B.u.signSeiEvmResponse,payload:{status:"error",data:"User rejected the transaction"}}),setTimeout(()=>{window.close()},100)}const _e=Q.w.useGetWallet;function Ue({txnData:o}){const t=(0,i.QSC)(),s=(0,i.rTu)(),n=(0,i.a74)();He()(s!==null,"activeWallet is null");const a=(0,e.useMemo)(()=>(0,xe.k)(s.name),[s.name]),m=o?.origin,L=m?.split("//")?.at(-1)?.split(".")?.at(-2),I=(0,ve.G)(m),x=_e(),[f,y]=(0,e.useState)("idle"),[T,M]=(0,e.useState)(null),u=async()=>{try{if(s.walletType===i._KQ.LEDGER)throw new Error(we.tR);M(null),y("loading");const d=await x(n,!0);let l;o.signTxnData.methodType===C.ETH__SIGN_TYPED_DATA_V4?l=(0,p.xqy)(o.signTxnData.data,s.addresses[n],d):l=(0,p.W0A)(o.signTxnData.data,s.addresses[n],d);try{v().runtime.sendMessage({type:B.u.signSeiEvmResponse,payload:{status:"success",data:l}})}catch{throw new Error("Could not send transaction to the dApp")}setTimeout(async()=>{window.close()},100)}catch(d){y("error"),M(d.message)}},c=!!T||f==="loading";return e.createElement("div",{className:"w-[400px] h-full relative self-center justify-self-center flex justify-center items-center mt-2"},e.createElement("div",{className:"relative w-[400px] overflow-clip rounded-md border border-gray-300 dark:border-gray-900"},e.createElement(V.Z,{header:e.createElement("div",{className:"w-[396px]"},e.createElement(h.Header,{imgSrc:t.chainSymbolImageUrl??Te.GenericLight,title:e.createElement(h.Buttons.Wallet,{brandLogo:(0,Ne.l)()?e.createElement("img",{className:"w-[24px] h-[24px] mr-1",src:O.r.Logos.CompassCircle}):void 0,title:(0,Ce.fy)(a,10),className:"pr-4 cursor-default"})}))},e.createElement("div",{className:"px-7 py-3 overflow-y-auto relative h-[450px]"},e.createElement("h2",{className:"text-center text-lg font-bold dark:text-white-100 text-gray-900 w-full"},"Signature request"),e.createElement("p",{className:"text-center text-sm dark:text-gray-300 text-gray-500 w-full"},"Only sign this message if you fully understand the content and trust the requesting site"),e.createElement("div",{className:"flex items-center mt-3 rounded-2xl dark:bg-gray-900 bg-white-100 p-4"},e.createElement(h.Avatar,{avatarImage:I,avatarOnError:(0,Se._)(O.r.Misc.Globe),size:"sm",className:"rounded-full overflow-hidden"}),e.createElement("div",{className:"ml-3"},e.createElement("p",{className:"capitalize text-gray-900 dark:text-white-100 text-base font-bold"},L),e.createElement("p",{className:"lowercase text-gray-500 dark:text-gray-400 text-xs font-medium"},m))),e.createElement(ye.m,{className:"mt-3",tabsList:[{id:"details",label:"Details"}],tabsContent:{details:e.createElement("pre",{className:"text-xs text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl"},JSON.stringify(o.signTxnData.details,(d,l)=>typeof l=="bigint"?l.toString():l,2))}}),T&&f==="error"?e.createElement(fe._,{text:T,className:"mt-3"}):null),e.createElement("div",{className:"absolute bottom-0 left-0 py-3 px-7 dark:bg-black-100 bg-gray-50 w-full"},e.createElement("div",{className:"flex items-center justify-center w-full space-x-3"},e.createElement(h.Buttons.Generic,{title:"Reject Button",color:H.w.gray900,onClick:_,disabled:f==="loading"},"Reject"),e.createElement(h.Buttons.Generic,{title:"Approve Button",color:H.w.getChainColor(n),onClick:u,disabled:c,className:`${c?"cursor-not-allowed opacity-50":""}`},f==="loading"?e.createElement(F.T,{color:"white"}):"Sign"))))))}var ke=r(593723),P=r(608740),We=r(953718);const je=Q.w.useGetWallet;function Ye({txnData:o,isEvmTokenExist:t}){const s=(0,i.QSC)(),n=(0,i.rTu)(),a=(0,i.a74)(),m=(0,i.obn)();(0,We.h)(n!==null,"activeWallet is null");const L=(0,i.FmJ)(),I=i.rNU.useLogCosmosDappTx(),x=(0,e.useMemo)(()=>(0,xe.k)(n.name),[n.name]),f=(0,i.SFn)(),{evmJsonRpc:y}=(0,i.U9i)(),T=(0,P.e7)({activeChain:a,isSeiEvmTransaction:!0}),M=je(),[u,c]=(0,e.useState)("idle"),[d,l]=(0,e.useState)(""),[b,z]=(0,e.useState)(null),[R,Ie]=(0,e.useState)(null),[Ve,Me]=(0,e.useState)(!1),be=(0,i.dco)(),J=(0,i._ty)(a),U=(0,e.useMemo)(()=>parseInt((be[a].DEFAULT_GAS_IBC*J).toString()),[a,be,J]),[$,X]=(0,e.useState)(U),[q,Fe]=(0,e.useState)({gasPrice:T.gasPrice,option:i.j1p.LOW}),k=o?.origin,Qe=k?.split("//")?.at(-1)?.split(".")?.at(-2),ze=(0,ve.G)(k);(0,e.useEffect)(()=>{(async function(){if(o.signTxnData.gas){X(Number(o.signTxnData.gas));return}try{Me(!0);let g=U;if(o.signTxnData.params){const W=await p.kZr.ExecuteEthEstimateGAs(o.signTxnData.params,y);g=Math.ceil(Number(W))}else{const W=(0,p.yNR)(n?.pubKeys?.[a]);g=await p.kZr.SimulateTransaction(o.signTxnData.to,o.signTxnData.value,y,o.signTxnData.data,void 0,W)}X(g)}catch{X(U)}finally{Me(!1)}})()},[a,n?.pubKeys,U,y,J,o.signTxnData.data,o.signTxnData.gas,o.signTxnData.params,o.signTxnData.to,o.signTxnData.value]);const Je=async()=>{try{if(n.walletType===i._KQ.LEDGER)throw new Error(we.tR);Ie(null),c("loading");const w=await M(a,!0),g=await(0,i.auI)({activeNetwork:m,activeChain:a,infoType:i.SGB.EVM_CHAIN_ID}),De=await p.kZr.GetSeiEvmClient(w,y??"",g).sendTransaction("",o.signTxnData.to,o.signTxnData.value,parseInt(Number(d||$).toString()),parseInt(String(Number(q.gasPrice.amount.toString())*10**18)),o.signTxnData.data),$e=De.hash,Xe=await(0,i.auI)({activeChain:a,activeNetwork:m,infoType:i.SGB.EVM_RPC_URL});try{const qe=await p.kZr.GetCosmosTxHash($e,Xe);I({txType:i.pb0.Dapp,txHash:qe,metadata:{...L,dapp_url:k??origin},address:f,chain:a})}catch{}c("success");try{v().runtime.sendMessage({type:B.u.signSeiEvmResponse,payload:{status:"success",data:De.hash}})}catch{throw new Error("Could not send transaction to the dApp")}setTimeout(async()=>{window.close()},100)}catch(w){c("error"),Ie(w.message)}},Re=!!R||u==="loading"||!!b||Ve;return e.createElement("div",{className:"w-[400px] h-full relative self-center justify-self-center flex justify-center items-center mt-2"},e.createElement("div",{className:"relative w-[400px] overflow-clip rounded-md border border-gray-300 dark:border-gray-900"},e.createElement(V.Z,{header:e.createElement("div",{className:"w-[396px]"},e.createElement(h.Header,{imgSrc:s.chainSymbolImageUrl??Te.GenericLight,title:e.createElement(h.Buttons.Wallet,{brandLogo:(0,Ne.l)()?e.createElement("img",{className:"w-[24px] h-[24px] mr-1",src:O.r.Logos.CompassCircle}):void 0,title:(0,Ce.fy)(x,10),className:"pr-4 cursor-default"})}))},e.createElement("div",{className:"px-7 py-3 overflow-y-auto relative h-[450px]"},e.createElement("h2",{className:"text-center text-lg font-bold dark:text-white-100 text-gray-900 w-full"},"Approve Transaction"),e.createElement("div",{className:"flex items-center mt-3 rounded-2xl dark:bg-gray-900 bg-white-100 p-4"},e.createElement(h.Avatar,{avatarImage:ze,avatarOnError:(0,Se._)(O.r.Misc.Globe),size:"sm",className:"rounded-full overflow-hidden"}),e.createElement("div",{className:"ml-3"},e.createElement("p",{className:"capitalize text-gray-900 dark:text-white-100 text-base font-bold"},Qe),e.createElement("p",{className:"lowercase text-gray-500 dark:text-gray-400 text-xs font-medium"},k))),e.createElement(P.ZP,{gasLimit:d||$,setGasLimit:w=>l(w.toString()),recommendedGasLimit:$,gasPriceOption:q,onGasPriceOptionChange:w=>Fe(w),error:b,setError:z,considerGasAdjustment:!1,chain:a,isSelectedTokenEvm:t,isSeiEvmTransaction:!0},e.createElement(ye.m,{className:"mt-3",tabsList:[{id:"fees",label:"Fees"},{id:"details",label:"Details"}],tabsContent:{fees:e.createElement("div",{className:"rounded-2xl p-4 mt-3 dark:bg-gray-900 bg-white-100"},e.createElement("div",{className:"flex items-center"},e.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide"},"Gas Fees ",e.createElement("span",{className:"capitalize"},"(",q.option,")")),e.createElement(ke.Z,{content:e.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm"},"You can choose higher gas fees for faster transaction processing.")},e.createElement("div",{className:"relative ml-2"},e.createElement("img",{src:O.r.Misc.InfoCircle,alt:"Hint"})))),e.createElement(P.ZP.Selector,{className:"mt-2"}),e.createElement("div",{className:"flex items-center justify-end"},e.createElement(P.ZP.AdditionalSettingsToggle,{className:"p-0 mt-3"})),e.createElement(P.ZP.AdditionalSettings,{className:"mt-2",showGasLimitWarning:!0}),b?e.createElement("p",{className:"text-red-300 text-sm font-medium mt-2 px-1"},b):null),details:e.createElement("pre",{className:"text-xs text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl"},JSON.stringify(o.signTxnData.details,(w,g)=>typeof g=="bigint"?g.toString():g,2))}})),R&&u==="error"?e.createElement(fe._,{text:R,className:"mt-3"}):null),e.createElement("div",{className:"absolute bottom-0 left-0 py-3 px-7 dark:bg-black-100 bg-gray-50 w-full"},e.createElement("div",{className:"flex items-center justify-center w-full space-x-3"},e.createElement(h.Buttons.Generic,{title:"Reject Button",color:H.w.gray900,onClick:_,disabled:u==="loading"},"Reject"),e.createElement(h.Buttons.Generic,{title:"Approve Button",color:H.w.getChainColor(a),onClick:Je,disabled:Re,className:`${Re?"cursor-not-allowed opacity-50":""}`},u==="loading"?e.createElement(F.T,{color:"white"}):"Approve"))))))}function Ae(){return e.createElement(V.Z,{className:"self-center justify-self-center",header:e.createElement(h.Header,{title:"Sign Transaction"})},e.createElement("div",{className:"h-full w-full flex flex-col gap-4 items-center justify-center"},e.createElement(F.T,{color:"white"})))}function Ke({txnData:o,isEvmTokenExist:t}){switch((0,e.useEffect)(()=>(window.addEventListener("beforeunload",_),v().storage.local.remove(Pe.u1),()=>{window.removeEventListener("beforeunload",_)}),[]),o.signTxnData.methodType){case C.PERSONAL_SIGN:case C.ETH__SIGN:case C.ETH__SIGN_TYPED_DATA_V4:return e.createElement(Ue,{txnData:o})}return e.createElement(Ye,{txnData:o,isEvmTokenExist:t})}const Ze=(o=>{const t=()=>{const s=(0,i.a74)(),n=(0,i.obn)(),[a,m]=(0,e.useState)(null),L=Q.w.useGetWallet(),{allAssets:I}=(0,i.rM)(),{addressLinkState:x}=(0,i.uaF)(L),{data:f,status:y}=(0,i.uUy)(),T=(0,e.useMemo)(()=>{let c=I;return["done","unknown"].includes(x)||(c=[...c,...f?.seiEvmBalance??[]].filter(d=>new(Oe())(d.amount).gt(0))),c},[x,I,f?.seiEvmBalance]),M=(0,e.useMemo)(()=>(T??[]).some(c=>c?.isEvm&&c?.coinMinimalDenom==="usei"),[T]),u=(0,e.useCallback)(async(c,d)=>{if(d.id===v().runtime.id&&c.type===B.u.signTransaction){const l=c.payload;if(l?.signTxnData?.spendPermissionCapValue){const b=await(0,i.auI)({activeNetwork:n,activeChain:s,infoType:i.SGB.EVM_RPC_URL}),z=await(0,i.auI)({activeNetwork:n,activeChain:s,infoType:i.SGB.EVM_CHAIN_ID}),R=await(0,p.d_E)(l.signTxnData.to,b,z);l.signTxnData.details={Permission:`This allows the third party to spend ${(0,p.DZ4)(l.signTxnData.spendPermissionCapValue,R.decimals)} ${R.symbol} from your current balance.`,...l.signTxnData.details}}m(l)}},[s,n]);return(0,e.useEffect)(()=>(v().runtime.sendMessage({type:B.u.signingPopupOpen}),v().runtime.onMessage.addListener(u),()=>{v().runtime.onMessage.removeListener(u)}),[u]),!["done","unknown"].includes(x)&&y==="loading"?e.createElement(Ae,null):a?e.createElement(o,{txnData:a,isEvmTokenExist:M}):e.createElement(Ae,null)};return t.displayName=`withSeiEvmTxnSigningRequest(${o.displayName})`,t})(e.memo(Ke))}}]);
