"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[8208],{86211:(Ue,z,n)=>{n.d(z,{K:()=>re});var E=n(964266),T=n(564510),p=n(339279),ve=n.n(p),M=n(240483),t=n(202784),ne=n(410289),C=n(610675);const se=({isOpen:D,tokenAmount:w,feeAmount:e,setAmount:g,nativeDenom:d,onAdjust:o,onCancel:N,onBack:k})=>{const{theme:x}=(0,p.useTheme)(),f=(0,t.useMemo)(()=>(0,E.ww6)({tokenAmount:w,feeAmount:e,nativeDenom:d}),[e,d,w]),A=(0,t.useCallback)(()=>{f?(g(f),o()):N()},[o,N,g,f]),I=(0,t.useMemo)(()=>`${(0,T.TGo)(w,d?.coinDecimals??6)} ${d?.coinDenom??""}`,[d?.coinDecimals,d?.coinDenom,w]),v=(0,t.useMemo)(()=>f?`${f} ${d?.coinDenom??""}`:null,[d?.coinDenom,f]);return t.createElement(M.Z,{isOpen:D,title:"Adjust for Transaction Fees",closeOnBackdropClick:!0,onClose:N,onActionButtonClick:k,containerClassName:"!max-h-[600px]",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},t.createElement("p",{className:"text-gray-200 font-medium mb-6"},"Confirming this transaction may leave you with insufficient ",d?.coinDenom??""," ","balance for future transaction fees."),t.createElement("div",{className:"rounded-2xl p-4 dark:bg-gray-900 bg-gray-50 mb-6"},t.createElement("p",{className:"text-sm text-white-100 font-bold mb-4"},"Should we auto-adjust the amount?"),t.createElement("div",{className:"flex items-center rounded-xl p-4 dark:bg-gray-850 bg-gray-100 gap-4"},t.createElement("div",{className:"flex-1 text-right text-sm text-white-100 font-bold"},I),t.createElement("div",{className:"material-icons-round text-gray-400 !text-lg"},"east"),t.createElement("div",{className:"flex-1 text-sm text-green-500 font-bold"},v))),t.createElement("div",{className:"flex items-center gap-6"},t.createElement(p.Buttons.Generic,{color:x===p.ThemeName.DARK?C.w.gray900:C.w.gray300,size:"normal",className:"w-full",title:"Don't adjust",onClick:N},"Cancel"),t.createElement(p.Buttons.Generic,{color:C.w.green600,size:"normal",className:"w-full",title:"Proceed",onClick:A},"Proceed")))},H=({isOpen:D,tokenAmount:w,tokenBalance:e,feeAmount:g,setAmount:d,nativeDenom:o,onAdjust:N,onCancel:k})=>{const{theme:x}=(0,p.useTheme)(),f=(0,t.useMemo)(()=>(0,E.ww6)({tokenAmount:e,feeAmount:g,nativeDenom:o}),[g,o,w]),A=(0,t.useCallback)(()=>{f?(d(f),N()):k()},[N,k,d,f]),I=(0,t.useMemo)(()=>`${(0,T.TGo)(w,o?.coinDecimals??6)} ${o?.coinDenom??""}`,[o?.coinDecimals,o?.coinDenom,w]),v=(0,t.useMemo)(()=>f?`${f} ${o?.coinDenom??""}`:null,[o?.coinDenom,f]);return t.createElement(M.Z,{isOpen:D,onClose:k,closeOnBackdropClick:!1,title:"Adjust for Transaction Fees",containerClassName:"!bg-white-100 dark:!bg-gray-950 !max-h-[600px]",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},t.createElement("p",{className:"text-gray-200 font-medium mb-6"},"You seem to have insufficient ",o?.coinDenom??""," balance to pay transaction fees."),t.createElement("div",{className:"rounded-2xl p-4 dark:bg-gray-900 bg-gray-50 mb-6"},t.createElement("p",{className:"text-sm text-white-100 font-bold mb-4"},"Should we auto-adjust the amount?"),t.createElement("div",{className:"flex items-center rounded-xl p-4 dark:bg-gray-850 bg-gray-100 gap-4"},t.createElement("div",{className:"flex-1 text-right text-sm text-white-100 font-bold"},I),t.createElement("div",{className:"material-icons-round text-gray-400 !text-lg"},"east"),t.createElement("div",{className:"flex-1 text-sm text-green-500 font-bold"},v))),t.createElement("div",{className:"flex items-center gap-6"},t.createElement(p.Buttons.Generic,{color:x===p.ThemeName.DARK?C.w.gray900:C.w.gray300,size:"normal",className:"w-full",title:"Don't adjust",onClick:k},"Cancel"),t.createElement(p.Buttons.Generic,{color:C.w.green600,size:"normal",className:"w-full",title:"Proceed",onClick:A},"Proceed")))},re=({amount:D,setAmount:w,selectedToken:e,fee:g,setShowReviewSheet:d,closeAdjustmentSheet:o,forceChain:N,forceNetwork:k})=>{const x=(0,E.QSC)(N),f=(0,E.ZYP)(N,k),A=(0,ne.s0)(),I=(0,E.X82)(),v=(0,t.useMemo)(()=>{if(x.beta)return Object.values(x.nativeDenoms)[0];const le=(0,E.QBt)(e.coinMinimalDenom,e.chain??"");return I[le]},[x.beta,x.nativeDenoms,I,e.chain,e.coinMinimalDenom]),b=(0,t.useCallback)(()=>{o(),d(!0)},[o,d]),oe=(0,t.useCallback)(()=>{o(),A("/home")},[o,A]),y=(0,t.useMemo)(()=>(0,T.hI1)(e?.amount??"0",v?.coinDecimals??6),[v?.coinDecimals,e?.amount]),j=(0,t.useMemo)(()=>(0,T.hI1)(D,v?.coinDecimals??6),[D,v?.coinDecimals]),B=(0,t.useMemo)(()=>f({feeAmount:g.amount,feeDenom:g.denom,tokenAmount:j,tokenDenom:e.coinMinimalDenom,tokenBalance:y}),[g.amount,g.denom,e.coinMinimalDenom,f,j,y]);return(0,t.useEffect)(()=>{B===E.S2X.NONE&&b()},[B,b]),t.createElement(t.Fragment,null,t.createElement(se,{isOpen:B===E.S2X.OPTIONAL,nativeDenom:v,tokenAmount:j,feeAmount:g.amount,setAmount:w,onBack:o,onAdjust:b,onCancel:b}),t.createElement(H,{isOpen:B===E.S2X.COMPULSORY,nativeDenom:v,tokenAmount:j,tokenBalance:y,feeAmount:g.amount,setAmount:w,onAdjust:b,onCancel:oe}))}},808208:(Ue,z,n)=>{n.r(z),n.d(z,{default:()=>Ve});var E=n(964266),T=n(564510),p=n(339279),ve=n(294184),M=n.n(ve),t=n(86211),ne=n(892742),C=n(910416),se=n(830911),H=n(702860),re=n(905865),D=n(280129),w=n.n(D),e=n(202784),g=n(410289),d=n(93931),o=n(170571),N=n(608740),k=n(595196),x=n(29786);const A=({showFeesSettingSheet:a,setShowFeesSettingSheet:r})=>{const{sourceChain:i,setFeeDenom:s,setGasOption:m,gasEstimate:c,userPreferredGasLimit:l,setUserPreferredGasLimit:h,setUserPreferredGasPrice:S,setGasError:ie,gasError:R,gasPriceOption:G,setGasPriceOption:W}=(0,x.xY)(),ce=(0,e.useCallback)((O,K)=>{W?.(O),s({...K.denom,ibcDenom:K.ibcDenom}),m(O.option),S(O.gasPrice)},[]);return e.createElement(N.ZP,{recommendedGasLimit:c.toString(),gasLimit:l?.toString()??c.toString(),setGasLimit:O=>h(Number(O.toString())),gasPriceOption:G,onGasPriceOptionChange:ce,error:R,setError:ie,chain:i?.key},e.createElement(k.k,{showFeesSettingSheet:a,onClose:()=>{r(!1)},gasError:R}))};function I({onBack:a,onRefresh:r,onSettings:i,topColor:s}){const[m,c]=(0,e.useState)(!1),l=(0,e.useCallback)(()=>{r(),c(!0),setTimeout(()=>{c(!1)},700)},[r]);return e.createElement("div",{className:"w-[400px] h-[72px]"},e.createElement("div",{className:"absolute w-full h-1 left-0 top-0",style:{backgroundColor:s}}),e.createElement("div",{className:"relative h-[71px] w-full flex justify-center items-center "},e.createElement("div",{className:"absolute top-6 left-6"},e.createElement(p.Buttons.Back,{onClick:a})),e.createElement("div",{className:"font-bold text-black-100 dark:text-white-100 text-lg !leading-[28px]"},"Swap"),e.createElement("div",{className:"absolute top-6 right-6 flex justify-end items-center gap-4"},e.createElement("button",{onClick:l,className:M()("material-icons-round !text-xl !leading-[24px] text-black-100 dark:text-white-100",{"animate-[spin_500ms_linear_0.7]":m})},"refresh"),e.createElement("button",{onClick:i,className:"material-icons-outlined !text-xl !leading-[24px] text-black-100 dark:text-white-100"},"settings"))),e.createElement(p.LineDivider,null))}const v=I;var b=n(211570),oe=n(206391),y=n.n(oe);function j(a){if(!a)return;const r=parseFloat(a);if(isNaN(r))return{type:"error",color:"red",message:"Please enter a valid number."};if(r>5)return{type:"warn",color:"red",message:"I understand that I might get an unfavourable exchange rate if I go ahead with this transaction."};if(r>2.5)return{type:"warn",color:"orange",message:"You may get an unfavourable exchange rate due to the impact of your trade."}}const B=a=>{const r=!!a?.response.does_swap,i=r?new(y())(a?.response.swap_price_impact_percent??NaN):void 0,s=new(y())(a?.response.usd_amount_in??NaN),m=new(y())(a?.response.usd_amount_out??NaN),c=(s.isNaN()?m.gte(.01):s.gte(.01))?new(y())(s).minus(m).dividedBy(s).multipliedBy(100):new(y())(0);return{shouldCheckPriceImpact:r,priceImpactPercent:i,usdValueDecreasePercent:c,sourceAssetUSDValue:s,destinationAssetUSDValue:m}},le=a=>{if(!a?.response)return"ok";const{shouldCheckPriceImpact:r,priceImpactPercent:i,usdValueDecreasePercent:s}=B(a);return r?i.isNaN()?s.isNaN()?"request-confirmation":s.lt(5)?"ok":"request-confirmation":i.lt(5)?s.isNaN()?"warn":s.lt(5)?"ok":"request-confirmation":"request-confirmation":"ok"};function U({type:a="warning",message:r}){return e.createElement("div",{className:M()("flex flex-row justify-start items-start gap-2 px-4 py-3 rounded-2xl ",{"bg-orange-200 dark:bg-orange-900":a==="warning","bg-red-200 dark:bg-red-900":a==="error"})},e.createElement("span",{className:M()("material-icons-round !text-lg  !leading-[20px]",{"text-orange-500 dark:text-orange-300":a==="warning","text-red-400 dark:text-red-300":a==="error"})},"warning"),e.createElement("span",{className:"font-medium text-left text-xs !leading-[20px] text-black-100 dark:text-white-100"},r))}var Re=n(65214);function $({isChecked:a,setIsChecked:r,title:i,message:s,title2:m}){return e.createElement("div",{className:"flex flex-col w-full justify-start items-start gap-2 px-4 py-3 rounded-2xl bg-red-200 dark:bg-red-900"},e.createElement("div",{className:"flex w-full flex-row justify-between items-start gap-2"},e.createElement("div",{className:"flex flex-row justify-start items-start gap-2"},e.createElement("span",{className:"material-icons-round !text-md text-red-400 dark:text-red-300 !leading-[20px]"},"warning"),e.createElement("span",{className:"font-bold text-left text-sm !leading-[20px] text-black-100 dark:text-white-100"},i)),e.createElement("span",{className:"font-medium text-left text-sm !leading-[20px] text-black-100 dark:text-white-100"},m)),e.createElement("div",{className:"flex flex-row justify-start items-start gap-2"},e.createElement(Re.X,{checked:a,onClick:()=>r(!a)}),e.createElement("span",{className:"font-medium text-left text-xs !leading-[20px] text-gray-800 dark:text-gray-200"},s)))}function Ge({isPriceImpactChecked:a,setIsPriceImpactChecked:r}){const{route:i}=(0,x.xY)(),s=Intl.NumberFormat("en-US",{maximumFractionDigits:2}),{shouldCheckPriceImpact:m,priceImpactPercent:c,usdValueDecreasePercent:l,sourceAssetUSDValue:h,destinationAssetUSDValue:S}=B(i);return m?c.isNaN()?l.isNaN()?e.createElement($,{title:"Low information warning",message:"I understand that I might get an unfavourable exchange rate for this transaction.",isChecked:a,setIsChecked:r}):l.lt(5)?null:e.createElement($,{title:"Bad trade warning",title2:`-${l.toFixed(2)}%`,message:`Estimated output value ($${s.format(S.toNumber())}) is ${l.toFixed(2)}% lower than estimated input value ($${s.format(h.toNumber())}).
          I understand and wish to proceed.`,isChecked:a,setIsChecked:r}):c.lt(5)?l.isNaN()?e.createElement(U,{type:"warning",message:"Price data unavailable for selected token(s)."}):l.lt(5)?null:e.createElement($,{title:"Bad trade warning",title2:`-${l.toFixed(2)}%`,message:`Estimated output value ($${s.format(S.toNumber())}) is ${l.toFixed(2)}% lower than estimated input value ($${s.format(h.toNumber())}). I understand and wish to proceed.`,isChecked:a,setIsChecked:r}):l.isNaN()||l.lt(5)?e.createElement($,{title:"Bad trade warning",title2:`-${c.toFixed(2)}%`,message:`Swap will execute at a ${c.toFixed(2)}% worse price than the estimated on-chain price, due to low liquidity. I understand and wish to proceed.`,isChecked:a,setIsChecked:r}):l.gt(c)?e.createElement($,{title:"Bad trade warning",title2:`-${l.toFixed(2)}%`,message:`Estimated output value ($${s.format(S.toNumber())}) is ${l.toFixed(2)}% lower than estimated input value ($${s.format(h.toNumber())}). I understand and wish to proceed.`,isChecked:a,setIsChecked:r}):e.createElement($,{title:"Bad trade warning",title2:`-${c.toFixed(2)}%`,message:`Swap will execute at a ${c.toFixed(2)}% worse price than the estimated on-chain price, due to low liquidity. I understand and wish to proceed.`,isChecked:a,setIsChecked:r}):null}function We({isPriceImpactChecked:a,setIsPriceImpactChecked:r,ledgerError:i}){const{route:s,isMoreThanOneStepTransaction:m,gasError:c,errorMsg:l,amountExceedsBalance:h}=(0,x.xY)();if((0,b.qo)(l))return null;if(m)return e.createElement(U,{message:"This is a multi-step route, please navigate to Swapfast to complete the swap"});if(!h){if(l)return e.createElement(U,{message:l,type:"error"});if(c)return e.createElement(U,{message:c,type:"error"})}return i?e.createElement(U,{message:i,type:"warning"}):s?.response?e.createElement(Ge,{isPriceImpactChecked:a,setIsPriceImpactChecked:r}):null}function Ke(){const a=(0,g.s0)(),r=(0,re.a)(),i=(0,e.useRef)(0),s=(0,e.useRef)(),m=(0,E.rTu)(),[c,l]=(0,e.useState)(!1),[h,S]=(0,e.useState)("source"),[ie,R]=(0,e.useState)(!1),[G,W]=(0,e.useState)(!1),[ce,O]=(0,e.useState)(!1),[K,J]=(0,e.useState)(!1),[Ye,ue]=(0,e.useState)(!1),[Ze,be]=(0,e.useState)(!1),[me,q]=(0,e.useState)(!1),[de,fe]=(0,e.useState)(!1),[ge,ke]=(0,e.useState)(!1),[Qe,he]=(0,e.useState)(!1),[pe,Ce]=(0,e.useState)(),[ye,De]=(0,e.useState)(!1),Ae=(0,H.Z)().get("pageSource")??void 0,Xe=(0,e.useCallback)(()=>{a(Ae==="swapAgain"?"/home":-1)},[a,Ae]),{inAmount:xe,sourceToken:V,loadingSourceAssets:ze,sourceChain:P,sourceTokenBalanceStatus:He,handleInAmountChange:Je,sourceAssets:Ie,loadingChains:_,chainsToShow:Se,invalidAmount:Y,amountExceedsBalance:Z,amountOut:Q,destinationToken:Oe,destinationChain:L,loadingDestinationAssets:qe,destinationTokenBalancesStatus:_e,destinationAssets:Pe,reviewBtnDisabled:et,setSourceToken:Te,setDestinationToken:Me,setSourceChain:tt,setDestinationChain:at,redirectUrl:nt,isMoreThanOneStepTransaction:st,refresh:we,handleSwitchOrder:rt,isSwitchOrderPossible:ot,setInAmount:Be,displayFee:Fe,errorMsg:ee,feeDenom:$e,route:Le}=(0,x.xY)(),Ee=le(Le)==="request-confirmation";(0,e.useEffect)(()=>{J(!Ee)},[Ee]);const F=(0,e.useCallback)(()=>{J(!1)},[]);(0,e.useEffect)(()=>(Number(Q)&&![me,ge,c,de,G].includes(!0)?s.current=setInterval(async()=>{if(i.current===10){i.current=0,R(!0),F();try{await we()}catch{}R(!1);return}i.current+=1},1e3):i.current=0,()=>clearInterval(s.current)),[Q,we,me,ge,c,de,G,F]);const Ne=(0,e.useMemo)(()=>m&&m.walletType===E._KQ.LEDGER?Se.filter(u=>{const X=Object.values(T.oCA).find(ae=>ae.chainId===u.chainId);if(!X)return!1;const te=m.addresses[X.key];return(0,d.O)(u.chainId,u.coinType)&&te}):Se,[Se,m]),lt=(0,e.useMemo)(()=>Y?"Amount must be greater than 0":Z?"Insufficient balance":(0,b.qo)(ee)?"No transaction routes available":"Review Swap",[Z,ee,Y]),it=et||ie||Ee&&!K;return e.createElement("div",{className:"w-[400px] overflow-clip"},e.createElement(ne.Z,{header:e.createElement(v,{onBack:Xe,onRefresh:()=>{we()},onSettings:()=>{ke(!0)},topColor:"transparent"}),className:"flex flex-col"},e.createElement("div",{className:"flex flex-1 flex-col justify-between p-4 w-full gap-3 relative"},e.createElement("div",{className:"flex flex-col w-full gap-2 relative"},e.createElement("div",{className:"w-full flex flex-col items-center"},e.createElement(o.r1,{value:xe,isInputInUSDC:ye,setIsInputInUSDC:De,placeholder:"0",token:V,balanceStatus:He,loadingAssets:_||ze,loadingChains:_,chainName:P?.chainName,chainLogo:P?.icon??r,onChange:u=>{Je(u),F()},selectTokenDisabled:Ie.length===0||!P,selectChainDisabled:Ne.length===0,onTokenSelectSheet:()=>{l(!0),S("source"),F()},onChainSelectSheet:()=>{q(!0),S("source"),F()},amountError:Z||Y,showFor:"source"}),e.createElement(o.cO,{isSwitchOrderPossible:ot,handleSwitchOrder:rt}),e.createElement(o.r1,{readOnly:!0,isInputInUSDC:ye,setIsInputInUSDC:De,value:Q&&Number(Q).toFixed(6),placeholder:"0",token:Oe,balanceStatus:_e,loadingChains:_,loadingAssets:_||qe,chainName:L?.chainName,chainLogo:L?.icon??r,selectTokenDisabled:Pe.length===0||!L,selectChainDisabled:Ne.length===0,onTokenSelectSheet:()=>{l(!0),S("destination"),F()},onChainSelectSheet:()=>{q(!0),S("destination"),F()}})),e.createElement(We,{isPriceImpactChecked:K,setIsPriceImpactChecked:J,ledgerError:pe}),e.createElement(o.SS,{setShowMoreDetailsSheet:be})),st?e.createElement(p.Buttons.Generic,{className:"w-full dark:!bg-white-100 !bg-black-100 text-white-100 dark:text-black-100",onClick:()=>window.open(nt,"_blank"),style:{boxShadow:"none"}},e.createElement("span",{className:"flex items-center gap-1"},"Swap on Swapfast"," ",e.createElement("span",{className:"!leading-[20px] !text-lg material-icons-round"},"open_in_new"))):e.createElement(e.Fragment,null,e.createElement(p.Buttons.Generic,{className:M()("w-full",{"!bg-green-600 text-white-100":!(Y||Z||(0,b.qo)(ee)),"!bg-red-300 text-white-100":Y||Z||(0,b.qo)(ee)}),disabled:it,style:{boxShadow:"none"},onClick:()=>O(!0)},lt)))),e.createElement(o.nS,{isOpen:c,sourceAssets:Ie,destinationAssets:Pe,sourceToken:V,selectedChain:h==="source"?P:L,destinationToken:Oe,showFor:h,onClose:()=>{l(!1),S("")},onTokenSelect:u=>{h==="source"?Te(u):h==="destination"&&Me(u),l(!1),S("")}}),e.createElement(o.Aq,{isOpen:me,chainsToShow:Ne,onClose:()=>{q(!1),S("")},selectedChain:h==="source"?P:L,onChainSelect:u=>{h==="source"&&u.chainId!==P?.chainId?(tt(u),Te(null)):h==="destination"&&u.chainId!==L?.chainId&&(at(u),Me(null)),q(!1),S("")}}),e.createElement(o.p6,{isOpen:Ze,onClose:()=>{be(!1)},onSlippageInfoClick:()=>{he(!0)},setShowFeesSettingSheet:ue}),e.createElement(o.Yc,{isOpen:ge,onClose:()=>ke(!1),onSlippageInfoClick:()=>{he(!0)}}),e.createElement(o.qm,{isOpen:Qe,onClose:()=>{he(!1)}}),ce&&Fe&&V&&xe&&P&&e.createElement(t.K,{amount:xe,setAmount:Be,selectedToken:{amount:V.amount,coinMinimalDenom:V.coinMinimalDenom},fee:{amount:(0,T.hI1)(String(Fe.value),$e.coinDecimals),denom:$e.coinMinimalDenom},forceChain:P?.key,setShowReviewSheet:W,closeAdjustmentSheet:()=>O(!1)}),e.createElement(o.Bv,{isOpen:G,onClose:()=>W(!1),onProceed:()=>{W(!1),fe(!0),pe&&Ce(void 0)},setShowFeesSettingSheet:ue}),Le?.response&&e.createElement(A,{showFeesSettingSheet:Ye,setShowFeesSettingSheet:ue}),de?e.createElement(o.J9,{onClose:(u,X,te,ae)=>{if(u||X||te||ae){let je="";je=`?${w().stringify({sourceChainId:u,sourceToken:X,destinationChainId:te,destinationToken:ae,pageSource:"swapAgain"})}`,a(`/swap${je}`)}fe(!1),Be("")},setLedgerError:u=>{Ce(u),u&&fe(!1)},ledgerError:pe}):null)}function Ve(){const a=(0,H.Z)().get("pageSource")??void 0,r=(0,g.TH)(),i=(0,e.useMemo)(()=>{let s;switch(a){case"bottomNav":{s="Bottom Nav";break}case"assetDetails":{s="Asset Details";break}case"banners":{s="Banners";break}case"swapAgain":{s="Swap Again CTA";break}case"quickSearch":{s="Quick Search";break}case"stake":{s=C.q.Stake;break}default:break}return{pageViewSource:s}},[a,r?.key]);return(0,se.a)(C.q.SwapsStart,!0,i),e.createElement(x.Ok,null,e.createElement(Ke,null))}}}]);
