!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0db9f93a-9ac2-4dab-a9bc-bd40abf1f4ee",e._sentryDebugIdIdentifier="sentry-dbid-0db9f93a-9ac2-4dab-a9bc-bd40abf1f4ee")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.22.8"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["9642"],{28529:function(e,t,n){n.a(e,async function(e,a){try{n.r(t),n.d(t,{default:()=>E});var o=n(52322),s=n(55159),l=n(91486),i=n(28144),r=n(20541),d=n(14981),c=n(4370),u=n(76131),g=n(41978),f=n(75958),p=n(2784),h=n(10289),m=n(22014),w=n(55736),x=n(70514),b=n(48534),v=n(46338),y=n(72565),j=n.n(y),S=n(53108),k=e([r,u]);[r,u]=k.then?(await k)():k;let N={hidden:{opacity:0,height:0},visible:{opacity:1,height:"2.25rem"}};function I(e){return e.loading?null:(0,o.jsxs)("div",{className:"flex flex-col h-full z-50",children:[(0,o.jsx)("div",{className:(0,x.cn)("border-b border-border-bottom/50 text-mdl py-[1.125rem] text-center font-bold",e.exitAnimationState&&"opacity-0 pointer-events-none"),children:"Leap Wallet"}),(0,o.jsxs)("div",{className:"flex flex-col flex-1 gap-5 p-6 justify-center items-center w-full relative",children:[(0,o.jsx)(g.P,{className:(0,x.cn)("size-28 transition-all duration-500 scale-100 translate-y-0 opacity-100","scale"===e.exitAnimationState&&"scale-150 translate-y-16","scale-fade"===e.exitAnimationState&&"scale-[4] translate-y-16 opacity-0")}),(0,o.jsxs)("div",{className:(0,x.cn)("flex items-center justify-center flex-col gap-5 w-full transition-opacity duration-300",e.exitAnimationState?"opacity-0 pointer-events-none":"opacity-100"),children:[(0,o.jsx)("span",{className:"text-xl font-bold mt-3",children:"Enter your password"}),(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)(i.I,{autoFocus:!0,className:"w-full",type:"password",placeholder:"Password",status:e.errorHighlighted?"error":void 0,value:e.passwordInput,onChange:t=>e.onChange(t),onKeyDown:t=>{"Enter"===t.key&&e.onSignIn()},"data-testing-id":"login-input-enter-password"}),(0,o.jsx)(d.M,{children:e.errorHighlighted&&(0,o.jsx)(c.E.span,{"data-testing-id":"login-error-text",className:"text-destructive-100 text-center text-sm h-9 flex items-center",transition:v._M,variants:N,initial:"hidden",animate:"visible",exit:"hidden",children:(0,o.jsx)("span",{className:"mt-auto text-center w-full",children:"Incorrect password. Please try again"})})})]}),(0,o.jsx)("button",{type:"button",className:"text-secondary-800 text-sm hover:text-foreground transition-colors",onClick:e.onForgotPassword,children:"Forgot Password?"})]})]}),(0,o.jsx)("div",{className:(0,x.cn)("border-t border-border-bottom/50 text-mdl p-4 text-center font-bold mt-auto transition-opacity duration-300",e.exitAnimationState?"opacity-0 pointer-events-none":"opacity-100"),children:(0,o.jsx)(l.zx,{size:"md",className:"w-full",onClick:e.onSignIn,"data-testing-id":"btn-unlock-wallet",children:"Unlock wallet"})},"unlock-wallet")]})}let E=(0,f.Pi)(function(e){var t,n,a,l;let{location:i}=e,[d,c]=(0,p.useState)(""),[g,f]=(0,p.useState)(null),x=(0,p.useRef)(!1),v=(0,p.useRef)(!1),y=(0,r.aC)(),k=null===(l=i.state)||void 0===l?void 0:null===(a=l.from)||void 0===a?void 0:null===(n=a.search)||void 0===n?void 0:null===(t=n.includes)||void 0===t?void 0:t.call(n,"unlock-to-approve"),[N,E]=(0,p.useState)(!1),[_,P]=(0,p.useState)(!1),A=(0,h.s0)(),L=(0,p.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&!v.current){if(v.current=!0,!t){A(e,{state:{from:"/login"},replace:!0}),v.current=!1;return}f("scale"),setTimeout(()=>{f("scale-fade"),setTimeout(()=>{A(e,{state:{from:"/login"},replace:!0})},100)},850)}},[]);(0,p.useEffect)(()=>{j().storage.local.get([S.pV,s.rU]).then(e=>{if(e[S.pV]||e[s.rU]){x.current=!0;return}let t=j().extension.getViews({type:"tab"}),n=j().extension.getViews({type:"popup"});-1!==n.findIndex(e=>e===window)||b.sN?(j().tabs.create({url:j().runtime.getURL("index.html#/onboarding")}),(0,w.I)()):(t.filter(e=>e!==window).forEach(e=>e.close()),L("/onboarding"))})},[]),(0,p.useEffect)(()=>{let e=async()=>{new URLSearchParams(i.search).has("close-on-login")||k?j().runtime.sendMessage({type:"user-logged-in",payload:{status:"failed"}}):await j().storage.local.set({[S.u1]:{error:"Request rejected"}}),setTimeout(()=>{j().storage.local.remove(S.u1)},50)};return j().storage.local.get(S.AI).then(async e=>{e[S.AI]&&await j().storage.local.remove(S.u1)}),window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]);let C=(0,p.useCallback)(async()=>{if(d){P(!0);try{let e=new TextEncoder;await y.signin(e.encode(d),()=>{var e;if(m.RW.setLastActiveTime(),new URLSearchParams(i.search).has("close-on-login")){j().runtime.sendMessage({type:"user-logged-in",payload:{status:"success"}}),b.sN&&L("/home"),window.close();return}let t=null===(e=i.state)||void 0===e?void 0:e.from,n=(null==t?void 0:t.pathname)?`${null==t?void 0:t.pathname}${(null==t?void 0:t.search)?`${null==t?void 0:t.search}`:""}`:void 0,a="/home",o=a;(null==n?void 0:n.includes("onboarding"))&&y&&(null==y||!y.noAccount)||(o=("/"===n?a:n)||a),L(o,!0),P(!1)})}catch(e){E(!0),P(!1)}}},[y,i,d,L]),R=(0,p.useCallback)(()=>{let e=j().extension.getViews({type:"popup"});0!==e.length||b.sN?(window.open(j().runtime.getURL("index.html#/forgotPassword")),(0,w.I)()):L("/forgotPassword")},[L]);return(0,p.useEffect)(()=>{(null==y?void 0:y.locked)!=="unlocked"||d||k||new URLSearchParams(i.search).has("close-on-login")||L("/home")},[y,k,i.search,d,L]),(0,u.$)({page:"login",queryStatus:(null==y?void 0:y.loading)?"loading":"success",op:"loginPageLoad",description:"loading state on login page"}),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(I,{unlockLoader:_,loading:y.loading||!!(null==y?void 0:y.noAccount),errorHighlighted:N,exitAnimationState:g,passwordInput:d,onChange:e=>{E(!1),c(e.target.value)},onSignIn:C,onForgotPassword:R})})});a()}catch(e){a(e)}})}}]);
//# sourceMappingURL=9642.js.map