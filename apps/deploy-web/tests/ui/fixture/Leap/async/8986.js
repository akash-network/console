!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="847c9b03-18f6-4cca-9aad-1378604cfe9f",e._sentryDebugIdIdentifier="sentry-dbid-847c9b03-18f6-4cca-9aad-1378604cfe9f")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.22.8"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["8986"],{60143:function(e,n,a){a.a(e,async function(e,o){try{a.r(n),a.d(n,{default:()=>w});var t=a(52322),i=a(41172),l=a(15969),s=a(43069),c=a(36549),r=a(19623),m=a(91486),d=a(75958),u=a(53299),f=a(2784),h=a(10289),x=a(78344),b=a(42799),v=a(48346),y=a(30809),g=a(53345),D=a(23163),p=e([v]);v=(p.then?(await p)():p)[0];let C=(0,d.Pi)(e=>{var n;let{betaCW20DenomsStore:a,betaERC20DenomsStore:o,betaNativeDenomsStore:d,activeChainStore:u,rootDenomsStore:x,selectedNetworkStore:b,rootBalanceStore:v,enabledCW20DenomsStore:y}=e,p=(0,h.s0)(),w=(0,h.TH)().state,C=(0,i.DI5)(),k=u.activeChain,j=x.allDenoms,N=b.selectedNetwork,[S,M]=(0,f.useState)({name:"",coinDenom:"",coinMinimalDenom:"",coinDecimals:"",coinGeckoId:"",icon:"",chain:k}),[I,_]=(0,f.useState)(!1),[E,W]=(0,f.useState)(!1),[T,L]=(0,f.useState)(!1),[O,B]=(0,f.useState)(!1),[R,Z]=(0,f.useState)({}),[A,G]=(0,f.useState)(!1),{name:$,coinDenom:U,coinMinimalDenom:X,coinDecimals:z,coinGeckoId:F,icon:H,chain:P}=S,{lcdUrl:Y,evmJsonRpc:J}=(0,i.U9i)(),q=(0,i.xxU)(k,N,!0),K=(0,f.useRef)(null),Q=y.getEnabledCW20DenomsForChain(k),V=(0,f.useCallback)(async e=>{var n;let a=e.currentTarget.value.trim();if(!a&&a.toLowerCase().startsWith("ibc/"))return;B(!0),_(!1),W(!1);let o=!1;try{let e=await (0,l.bt3)(k,"testnet"===N);if(e&&e.assets)for(let n of e.assets){let e=n.denom.trim(),t=!1;if(e&&(e.startsWith("cw20:")&&(t=!0,e=e.slice(5)),a.startsWith("cw20:")&&(a=a.slice(5)),e.toLowerCase()===a.toLowerCase())){let{name:a,symbol:i,image:l,decimals:s,coingecko_id:c}=n;o=!0,t?_(!0):_(!1),M(n=>({...n,name:a,coinDenom:i,coinMinimalDenom:e,coinDecimals:String(s),coinGeckoId:c,icon:l}));break}}}catch(e){}if(!1===o)try{let e=await (0,g.s)(Y??"",a);"string"!=typeof e&&e.symbol?(o=!0,_(!0),M(n=>({...n,name:e.name,coinDenom:e.symbol,coinDecimals:e.decimals,coinMinimalDenom:a}))):_(!1)}catch(e){_(!1)}if(!1===o&&(null===(n=C[k])||void 0===n?void 0:n.evmOnlyChain))try{let e=await (0,l.d_E)(a,J??"",Number(q));o=!0,W(!0),M(n=>({...n,name:e.name,coinDenom:e.symbol,coinDecimals:String(e.decimals),coinMinimalDenom:a}))}catch(e){W(!1)}if(!1===o&&["mainCoreum","coreum"].includes(P))try{let{symbol:e,precision:n}=await (0,i.yaX)(Y??"",a);o=!0,M(o=>({...o,coinDenom:e,coinMinimalDenom:a,coinDecimals:n}))}catch(e){}L(o),B(!1)},[C,k,P,N,Y,J,q]),ee=(0,f.useCallback)(e=>{let{name:n,value:a}=e.currentTarget,o="";if(a){if("coinMinimalDenom"===n){var t,i;let e=a.trim().toLowerCase();Object.keys(j).map(e=>e.toLowerCase()).includes(e)?o="Token with same minimal denom already exists":(null===(t=C[k])||void 0===t?void 0:t.evmOnlyChain)&&!(0,l.Ohs)(e)?o="Invalid contract address":!(null===(i=C[k])||void 0===i?void 0:i.evmOnlyChain)&&(e.startsWith("erc20/")||(0,l.Ohs)(e))?o="We don't support adding erc20 token yet.":e.startsWith("ibc/")&&(o="We don't support adding ibc token yet.")}else"coinDecimals"===n&&(0,D.W)(a)?o="Incorrect decimal value":"icon"===n&&(0,D.S)(a)&&(o="Invalid Icon URL")}o?Z(e=>({...e,[n]:o})):R[n]&&(delete R[n],Z(R)),M(e=>({...e,[n]:a.trim()}))},[k,C,j,R]);(0,f.useEffect)(()=>{w&&w.coinMinimalDenom&&ee({currentTarget:{name:"coinMinimalDenom",value:w.coinMinimalDenom}})},[w]),(0,f.useEffect)(()=>{K.current&&K.current.focus()},[]);let en=(0,f.useCallback)(async()=>{G(!0);let e={...S,coinDecimals:Number(S.coinDecimals)};e.name||(e.name=void 0),I?await a.setBetaCW20Denoms(S.coinMinimalDenom,e,P):E?await o.setBetaERC20Denoms(S.coinMinimalDenom,e,P):await d.setBetaNativeDenoms(S.coinMinimalDenom,e,P);let n=[...Q,S.coinMinimalDenom];await y.setEnabledCW20Denoms(n,k),v.refetchBalances(),G(!1),p("/")},[k,a,o,d,P,y,Q,I,E,p,v,S]),ea=(0,f.useMemo)(()=>!O&&!T&&X&&!R.coinMinimalDenom,[O,T,X,R]),eo=(0,f.useMemo)(()=>!U||!X||!z||A||O||!!R.coinMinimalDenom||!!R.coinDenom||!!R.coinDecimals||!!R.coinGeckoId||!!R.name||!!R.icon,[U,X,z,A,O,R]),{coinMinimalDenomPlaceholder:et,coinDenomPlaceholder:ei}=(0,f.useMemo)(()=>{var e;let n="Coin minimal denom (ex: juno1...5awr)",a="Coin denom (ex: NETA)";return(null===(e=C[k])||void 0===e?void 0:e.evmOnlyChain)&&(n="Contract address (ex: 0x...)",a="Symbol (ex: PYTH)"),{coinMinimalDenomPlaceholder:n,coinDenomPlaceholder:a}},[k,C]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{className:"mx-auto w-[344px] mb-5 pb-6 overflow-y-auto h-[calc(100%-66px)]",children:[(0,t.jsxs)("div",{className:"rounded-lg w-full flex items-center h-[56px] p-4 bg-secondary-100 my-6 gap-x-[10px]",children:[(0,t.jsx)(s.C,{className:"text-secondary-100 bg-accent-yellow rounded-full h-5 w-5 p-[2px]"}),(0,t.jsx)("div",{className:"font-medium text-foreground text-sm !leading-[22px]",children:"Only add tokens you trust."})]}),(0,t.jsx)(c.a,{placeholder:et,value:X,name:"coinMinimalDenom",onChange:ee,error:R.coinMinimalDenom,warning:ea?`Make sure the coin minimal denom is correct and it belongs to ${null===(n=C[k])||void 0===n?void 0:n.chainName} chain`:"",onBlur:V,ref:K}),(0,t.jsx)(c.a,{placeholder:ei,value:U,name:"coinDenom",onChange:ee,error:R.coinDenom}),(0,t.jsx)(c.a,{placeholder:"Coin decimals (ex: 6)",value:z,name:"coinDecimals",onChange:ee,error:R.coinDecimals}),(0,t.jsx)(c.a,{placeholder:"Token name (optional)",value:$,name:"name",onChange:ee,error:R.name}),(0,t.jsx)(c.a,{placeholder:"Coin gecko id (optional)",value:F,name:"coinGeckoId",onChange:ee,error:R.coinGeckoId}),(0,t.jsx)(c.a,{placeholder:"Icon url (optional)",value:H,name:"icon",onChange:ee,error:R.icon})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-secondary-100 backdrop-blur-xl",children:O||A?(0,t.jsx)("div",{className:"h-[44px]",children:(0,t.jsx)(r.Z,{})}):(0,t.jsx)(m.zx,{className:"rounded-full w-full font-bold text-sm !leading-5 text-gray-900 dark:text-white-100 h-11 !bg-primary",type:"submit",disabled:eo,onClick:en,children:"Add token"})})]})});function w(){return(0,t.jsxs)("div",{className:"bg-secondary-50 flex flex-col h-full",children:[(0,t.jsx)(u.Z,{title:"Add Token"}),(0,t.jsx)("div",{className:"panel-width px-6 flex-1 overflow-y-hidden relative",children:(0,t.jsx)(C,{selectedNetworkStore:y.i,betaCW20DenomsStore:b.Xy,betaERC20DenomsStore:b.EM,betaNativeDenomsStore:b.vk,activeChainStore:x.J,rootDenomsStore:b.gb,rootBalanceStore:v.jZ,enabledCW20DenomsStore:b.bI})})]})}o()}catch(e){o(e)}})},53299:function(e,n,a){a.d(n,{Z:()=>c});var o=a(52322),t=a(43166),i=a(85027),l=a(69816);a(2784);var s=a(10289);let c=e=>{let{title:n,onBack:a}=e,c=(0,s.s0)();return(0,o.jsxs)(i.m,{className:"bg-secondary-50 border-b border-secondary-300",children:[(0,o.jsx)(t.X,{className:"size-9 p-2 cursor-pointer text-muted-foreground hover:text-foreground",onClick:()=>{a?a():c(-1)}}),(0,o.jsx)(l.Z,{className:"text-[18px] font-bold !leading-6",color:"text-monochrome",children:n??"Manage tokens"}),(0,o.jsx)("div",{className:"w-9 h-9"})]})}},53345:function(e,n,a){a.d(n,{s:()=>i});var o=a(55334),t=a(48834).Buffer;async function i(e,n){let a=`${e}/cosmwasm/wasm/v1/contract/${n}/smart/${t.from('{"token_info":{}}').toString("base64")}`,{data:i}=await o.Z.get(a);return i.error&&i.error.toLowerCase().includes("decoding bech32 failed")?"Invalid Contract Address":i.data}}}]);
//# sourceMappingURL=8986.js.map