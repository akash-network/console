!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="bd7b34a1-047f-4fba-95b4-05b3d5670e0b",e._sentryDebugIdIdentifier="sentry-dbid-bd7b34a1-047f-4fba-95b4-05b3d5670e0b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.22.8"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["4564"],{79215:function(e,s,a){a.d(s,{og:()=>x});var n=a(52322),l=a(26793),i=a(89187),t=a(16283),d=a(85027),o=a(86240),r=a(65953);a(2784);var c=a(70514),u=a(49409);let m=e=>{let{activeIndex:s,setActiveIndex:a,limit:r}=e,{walletAvatar:u,walletName:m}=(0,o.v)();return(0,n.jsxs)(d.m,{className:"bg-secondary-50 border-b border-secondary-100",children:[(0,n.jsx)("div",{className:"w-[72px]"}),(0,n.jsx)(t.G2,{className:"bg-secondary-200",showWalletAvatar:!0,walletName:m,walletAvatar:u,handleDropdownClick:()=>void 0}),(0,n.jsx)("div",{className:"min-w-[72px]",children:void 0!==s&&void 0!==r&&r>1&&(0,n.jsxs)("div",{className:"flex items-center rounded-full bg-secondary-200 p-2 justify-between",children:[(0,n.jsx)(l.W,{size:14,className:(0,c.cn)("",{"text-muted-foreground":0===s,"text-foreground cursor-pointer":0!==s}),onClick:()=>{a&&void 0!==s&&s>0&&a(s-1)}}),(0,n.jsxs)("p",{className:"text-sm font-bold text-foreground",children:[s+1,"/",r]}),(0,n.jsx)(i.T,{size:14,className:(0,c.cn)("",{"text-muted-foreground":s===r-1,"text-foreground cursor-pointer":s!==r-1}),onClick:()=>{a&&void 0!==s&&r&&s<r-1&&a(s+1)}})]})})]})},p=e=>(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[(0,n.jsx)("img",{src:e.logo,onError:(0,u._)(r.Globe),className:"size-[54px] rounded-full"}),(0,n.jsxs)("div",{className:"flex flex-col gap-[3px]",children:[(0,n.jsx)("span",{className:"text-lg font-bold",children:e.title}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:e.subTitle})]})]}),x=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{activeIndex:e.activeIndex,setActiveIndex:e.setActiveIndex,limit:e.limit}),(0,n.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-6 mx-auto h-[435px] w-full max-w-2xl box-border overflow-y-scroll pt-6 px-6 bg-secondary-50",e.className),children:[(0,n.jsx)(p,{...e}),e.children]})]})},31655:function(e,s,a){a.a(e,async function(e,n){try{a.r(s),a.d(s,{default:()=>z});var l=a(52322),i=a(41172),t=a(15969),d=a(62695),o=a(48039),r=a(79215),c=a(19623),u=a(91486),m=a(53108),p=a(79533),x=a(76131),v=a(10706),h=a(86240),f=a(57124),y=a(78935),g=a(65953),b=a(2784),w=a(10289),j=a(70514),N=a(48534),I=a(72565),C=a.n(I),M=a(70734),k=a(37124),E=e([v,x]);async function _(){try{let e=await C().windows.getCurrent();await C().runtime.sendMessage({type:"popup-closed",payload:{windowId:e.id}})}catch(e){await C().runtime.sendMessage({type:"popup-closed"})}setTimeout(()=>{window.close()},50)}async function L(e){try{await C().runtime.sendMessage(e)}catch(e){}}[v,x]=E.then?(await E)():E;let z=()=>{var e,s,a;let[n,I]=(0,b.useState)([]),E=(0,w.s0)(),[z,A]=(0,b.useState)([]),[T,S]=(0,b.useState)(!1),[D,R]=(0,b.useState)(!1),[V,K]=(0,b.useState)([]),W=(0,i.rTu)(),{chains:q}=(0,i._IL)(),F=(0,f.a)(),G=(0,v.Af)(),{walletName:H}=(0,h.v)(),U=(0,b.useRef)(!1),Z=(0,b.useMemo)(()=>z.every(e=>["movement","aptos"].includes(e.chain)),[z]),$=(0,b.useMemo)(()=>z.every(e=>{var s;return null===(s=q[e.chain])||void 0===s?void 0:s.evmOnlyChain}),[z,q]),J=(0,b.useMemo)(()=>z.every(e=>["solana"].includes(e.chain)),[z]),P=(0,b.useMemo)(()=>z.every(e=>["sui"].includes(e.chain)),[z]),Y=(0,b.useMemo)(()=>z.reduce((e,s)=>(e.find(e=>e.chain===s.chain)||e.push(s),e),[]),[z]),O=(0,b.useMemo)(()=>{var e,s,a,l,i,d,o,r,c,u,m;if(Z)return{type:"address",chains:Y,address:(null==n?void 0:null===(l=n[0])||void 0===l?void 0:null===(a=l.addresses)||void 0===a?void 0:a[null===(s=Y[0])||void 0===s?void 0:s.chain])||""};if($&&(null==n?void 0:null===(e=n[0])||void 0===e?void 0:e.pubKeys)){let e=(0,t.DiR)(n[0].pubKeys[null===(i=Y[0])||void 0===i?void 0:i.chain]||n[0].pubKeys.evmos);return{type:"address",chains:Y,address:e}}return J?{type:"address",chains:Y,address:(null==n?void 0:null===(r=n[0])||void 0===r?void 0:null===(o=r.addresses)||void 0===o?void 0:o[null===(d=Y[0])||void 0===d?void 0:d.chain])||""}:P?{type:"address",chains:Y,address:(null==n?void 0:null===(m=n[0])||void 0===m?void 0:null===(u=m.addresses)||void 0===u?void 0:u[null===(c=Y[0])||void 0===c?void 0:c.chain])||""}:{type:"chains",chains:Y}},[Z,$,J,P,Y,n]);(0,b.useEffect)(()=>{!async function(){var e;let s=n[0];if(!s||!(null==O?void 0:O.chains)||U.current)return;let a=(null===(e=O.chains.filter(e=>{var s,a,l,i;let t=null==n?void 0:null===(a=n[0])||void 0===a?void 0:null===(s=a.addresses)||void 0===s?void 0:s[e.chain],d=null==n?void 0:null===(i=n[0])||void 0===i?void 0:null===(l=i.pubKeys)||void 0===l?void 0:l[e.chain];return q[e.chain]&&!t||!d}))||void 0===e?void 0:e.map(e=>e.chain))??[];if(!(null==a?void 0:a.length))return;let l={};for await(let e of a)l[e]=q[e];let i=await G(s,a,"UPDATE",void 0,l);U.current=!0;let t=n.map(e=>{if(!i)return e;let s=i[e.id];return s||e});I(t)}()},[O,n]);let X=(0,b.useCallback)(async()=>{if(!V[0]){(0,N.oj)()?E("/home"):_();return}for(let s of V){var e;let a=(null==s?void 0:s.validChainIds)??[null==s?void 0:null===(e=s[0])||void 0===e?void 0:e.chainId];await L({type:"chain-approval-rejected",payload:{origin,chainsIds:a,payloadId:s.payloadId,ecosystem:s.ecosystem},status:"failed"})}window.removeEventListener("beforeunload",X),(0,N.oj)()?E("/home"):_()},[E,V]);(0,b.useEffect)(()=>{W&&I([W])},[W]),(0,b.useEffect)(()=>(window.addEventListener("beforeunload",X),C().storage.local.remove(m.u1),()=>{window.removeEventListener("beforeunload",X)}),[V]);let B=(0,b.useCallback)(async(e,s)=>{if(s.id===C().runtime.id&&"enable-access"===e.type){let s=await C().storage.local.get([m.vA,m.pV]),a=s[m.vA]||[],n=s[m.pV],l=e.payload.validChainIds??[e.payload.chainId??""],{isNewChainPresent:i}=await (0,p.qe)(l,a,{origin:e.payload.origin},n.id);if(i){K(s=>[...s,e.payload]);let s=await (0,p._d)();A(a=>[...a,...l.map(a=>({chain:s[a],payloadId:e.payload.payloadId}))]),R(!0)}else await C().runtime.sendMessage({type:"chain-enabled",payload:{origin,chainsIds:l,payloadId:e.payload.payloadId,ecosystem:e.payload.ecosystem,ethMethod:e.payload.ethMethod,isLeap:e.payload.isLeap},status:"success"}),(0,N.oj)()?E("/home"):_()}},[E]);(0,b.useEffect)(()=>(C().runtime.sendMessage({type:"approval-popup-open"}),C().runtime.onMessage.addListener(B),()=>{C().runtime.onMessage.removeListener(B)}),[]);let Q=async()=>{for await(let s of V){var e;let a=s?(null==s?void 0:s.validChainIds)??[null===(e=s[0])||void 0===e?void 0:e.chainId]:void 0;if(!a)return;let l=n.map(e=>e.id);await (0,M.E)(a,l,s.origin),await L({type:"chain-enabled",payload:{origin,chainsIds:a,payloadId:s.payloadId,ecosystem:s.ecosystem,ethMethod:s.ethMethod,isLeap:s.isLeap},status:"success"})}window.removeEventListener("beforeunload",X),(0,N.oj)()?E("/home"):_()};(0,x.$)({page:"approve-connection",queryStatus:D?"success":"loading",op:"approveConnectionPageLoad",description:"Load time for approve connection page"});let ee=(null==V?void 0:null===(e=V[0])||void 0===e?void 0:e.origin)||"Connect Leap",es=(0,y.G)(ee);return(null==W?void 0:W.watchWallet)?(0,l.jsxs)("div",{children:[(0,l.jsx)(r.og,{subTitle:ee,title:"Connect wallet",logo:es||F,children:(0,l.jsx)(k.Z,{})}),(0,l.jsx)("div",{className:" w-full mt-auto [&>*]:flex-1 sticky bottom-0 bg-secondary-50 p-6",children:(0,l.jsx)(u.zx,{variant:"secondary",className:"w-full mt-auto",onClick:X,children:"Cancel"})})]}):D?(0,l.jsxs)("div",{children:[(0,l.jsxs)(r.og,{logo:es||F,subTitle:ee,title:1===O.chains.length?`Connect wallet for ${O.chains[0].chain.toUpperCase()}`:"Connect wallet",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-secondary-100 rounded-2xl py-5 px-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4 ",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 bg-secondary-100",children:[(0,l.jsxs)("span",{className:"text-sm text-muted-foreground font-medium",children:["Connecting ",H]}),"address"===O.type?(0,l.jsx)("span",{className:"text-md font-bold",children:(0,i.Hnh)(O.address)}):"chains"===O.type&&1===O.chains.length?(0,l.jsx)("span",{className:"text-md font-bold",children:(0,i.Hnh)(null==n?void 0:null===(a=n[0])||void 0===a?void 0:null===(s=a.addresses)||void 0===s?void 0:s[O.chains[0].chain])}):null]}),"address"===O.type||"chains"===O.type&&1===O.chains.length?(0,l.jsx)("img",{src:(0,g.getWalletIconAtIndex)(0),className:"size-12"}):null,O.chains.length>3?(0,l.jsx)("span",{className:"text-xs font-medium text-accent-green cursor-pointer",onClick:()=>{S(e=>!e)},children:T?"View less":`View more (${O.chains.length})`}):null]}),(0,l.jsx)("div",{className:"flex flex-col",children:"chains"===O.type&&O.chains.length>1&&O.chains.slice(0,T?void 0:3).map((e,s,a)=>{var t,d,o,r;let c=s===a.length-1;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,j.cn)("flex w-full",{"pt-1":0===s,"my-4":!c,"mt-4":c}),children:[(0,l.jsx)("img",{src:(null===(t=q[e.chain])||void 0===t?void 0:t.chainSymbolImageUrl)??F,className:"size-4 rounded-full mr-3"}),(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)("span",{className:"text-xs text-foreground font-medium",children:null===(d=q[e.chain])||void 0===d?void 0:d.chainName}),(0,l.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:(0,i.Hnh)((null==n?void 0:null===(r=n[0])||void 0===r?void 0:null===(o=r.addresses)||void 0===o?void 0:o[e.chain])??"")})]})]},e.chain),c?null:(0,l.jsx)("div",{className:"h-[1px] w-full bg-secondary-200"})]})})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 rounded-xl p-5 bg-secondary-100 text-xs text-muted-foreground font-medium",children:[(0,l.jsx)("span",{children:"This app will be able to"}),(0,l.jsxs)("span",{className:"flex flex-col gap-3",children:[(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(d.J,{size:16,weight:"bold",className:"my-0.5 text-accent-green"}),"View your wallet balance and activity"]}),(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(d.J,{size:16,weight:"bold",className:"my-0.5 text-accent-green"}),"Request approval for transactions"]})]}),(0,l.jsx)("div",{className:"my-1 border-[0.05px] border-solid border-secondary-250 opacity-50"}),(0,l.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"This app won't be able to"}),(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.X,{size:16,weight:"bold",className:"my-0.5 text-destructive-100"}),"Move funds without your permission"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center w-full gap-3 mt-auto [&>*]:flex-1 sticky bottom-0 bg-secondary-50 p-6",children:[(0,l.jsx)(u.zx,{variant:"mono",onClick:X,children:"Cancel"}),(0,l.jsx)(u.zx,{onClick:Q,disabled:n.length<=0,children:"Connect"})]})]}):(0,l.jsx)("div",{className:"panel-height enclosing-panel relative w-screen max-w-3xl h-full self-center p-5 pt-0",children:(0,l.jsx)(c.Z,{})})};n()}catch(e){n(e)}})},37124:function(e,s,a){a.d(s,{Z:()=>i});var n=a(52322),l=a(66070);function i(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center rounded-xl bg-secondary-100 px-4 py-12 border border-border-bottom my-auto",children:[(0,n.jsxs)("div",{className:"relative bg-accent-green-200 rounded-full p-4 flex items-center justify-center",children:[(0,n.jsx)(l.t,{className:"size-8"})," "]})," ",(0,n.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,n.jsx)("span",{className:"text-lg font-medium",children:"You are watching this wallet."}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground text-center font-medium",children:"Import the wallet using your recovery phrase to manage assets and sign transactions."})]})]})})}a(2784)}}]);
//# sourceMappingURL=4564.js.map