"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[4147],{598916:(ee,M,r)=>{r.d(M,{D:()=>z,KE:()=>W,rb:()=>D});var a=r(202784),l=r(14080);function D(){return a.createElement("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-4 flex-col p-4 w-full"},a.createElement(l.Z,{count:1,width:100,height:16}),a.createElement("div",null,a.createElement(l.Z,{count:1,width:50,height:30}),a.createElement(l.Z,{count:1,width:75,height:20})),a.createElement(l.Z,{count:1,borderRadius:16,height:70}))}function i(){return React.createElement("div",{className:"flex-1 p-7 gap-y-4 min-w-[344px]"},React.createElement(Skeleton,{count:1}),React.createElement(Skeleton,{count:2}),React.createElement(Skeleton,{count:4}))}function z(){return a.createElement("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-1.5 flex-col p-4 w-full"},a.createElement(l.Z,{width:100,height:20}),a.createElement(l.Z,{width:336,height:40}),a.createElement(l.Z,{width:100,height:24}))}function W(){return a.createElement("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-950 w-full rounded-2xl gap-x-4"},a.createElement(l.Z,{circle:!0,width:28,height:28,className:"!z-0"}),a.createElement(l.Z,{count:1,width:100,height:16,className:"!z-0"}))}},276603:(ee,M,r)=>{r.d(M,{Z:()=>i,m:()=>D});var a=r(202784),l=r(14080);function D(){return a.createElement("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-900 w-full rounded-2xl my-2"},a.createElement(l.Z,{circle:!0,width:28,height:28,className:"z-0"}),a.createElement("div",{className:"w-[120px] ml-2"},a.createElement(l.Z,{count:1,className:"z-0"}),a.createElement(l.Z,{count:1,className:"z-0"})))}function i(){return a.createElement(a.Fragment,null,a.createElement(D,null),a.createElement(D,null),a.createElement(D,null),a.createElement(D,null),a.createElement(D,null))}},744147:(ee,M,r)=>{r.r(M),r.d(M,{default:()=>at});var a=r(964266),l=r(339279),D=r(206391),i=r.n(D),z=r(608740),W=r(863262),O=r(595196),ne=r(892742),m=r(94608),te=r(244876),e=r(202784),J=r(410289);function K(){return e.createElement("div",{className:"flex w-full items-start bg-orange-200 dark:bg-orange-900 p-4 rounded-2xl"},e.createElement("span",{className:"material-icons-round text-orange-500 dark:text-orange-300 !text-md"},"info"),e.createElement("p",{className:"text-xs font-bold ml-2 text-gray-600 dark:text-gray-200"},"You are staking with an"," ",e.createElement("span",{className:"text-black-100 dark:text-white-100"},"inactive validator")," and won\u2019t earn any rewards as long as the validator is inactive."))}function Ze(){const[t]=(0,a.JsT)(),E=(0,a.QSC)(),f=(0,J.s0)(),d=(0,a.QSC)("osmosis");return e.createElement("div",{className:"flex w-full items-center justify-between py-3 px-4 rounded-2xl bg-white-100 dark:bg-gray-950"},e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold"},"Insufficient balance to stake"),e.createElement(m.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium"},"Get ",t.coinDenom," to stake and earn rewards")),e.createElement("button",{onClick:()=>f(`/swap?sourceChainId=${d.chainId}&sourceToken=${d.denom}&destinationChainId=${E.chainId}&destinationToken=${t.coinDenom}&pageSource=stake`),className:"flex items-center cursor-pointer py-2.5 px-4 justify-between bg-black-100 dark:bg-white-100 rounded-full text-xs text-white-100 dark:text-black-100 font-bold"},"Get ",t?.coinDenom??""))}var q=r(240483),Ve=r(138371),Re=r(128844),Z=r(508181),G=r(378268),V=r(610675),I=r(861111);const ce=(t,E=!1)=>{switch(t){case"DELEGATE":return"Stake";case"UNDELEGATE":return"Unstake";case"CANCEL_UNDELEGATION":return"Cancel Unstake";case"CLAIM_REWARDS":return"Claiming";case"REDELEGATE":return`Switching ${E?"Provider":"Validator"}`}};function ze({isVisible:t,onClose:E,onSubmit:f,tokenAmount:d,token:x,validator:s,isLoading:n,error:g,mode:y,unstakingPeriod:w,gasError:N,showLedgerPopup:T,provider:c,ledgerError:k}){const[o]=(0,a.fOz)(),{data:v}=(0,a.pD_)(s),h=(0,e.useMemo)(()=>new(i())(x?.usdPrice??"").gt(0)?o(new(i())(d).times(x?.usdPrice??"")):"",[o,x?.usdPrice,d]);return e.createElement(e.Fragment,null,e.createElement(q.Z,{isOpen:t,onClose:E,closeOnBackdropClick:!0,title:"Review Transaction",className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-6"},e.createElement("div",{className:"flex flex-col gap-y-6 items-center"},y==="REDELEGATE"&&s&&e.createElement("div",{className:"flex items-start gap-x-3 p-4 rounded-2xl bg-blue-200 dark:bg-blue-900"},e.createElement("span",{className:"material-icons-round text-blue-600 dark:text-blue-400 !text-lg"},"info"),e.createElement(m.Z,{size:"xs",color:"text-black-100 dark:text-white-100"},"Redelegating to a new validator takes ",w," as funds unbond from the source validator, then moved to the new one.")),e.createElement("div",{className:"flex flex-col gap-y-4"},e.createElement(l.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:x?.img,onError:(0,I._)(G.GenericLight),width:36,height:36,className:"border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,size:"md",title:e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},`${(0,a.LHZ)(d)} ${x?.symbol}`),subtitle:e.createElement(m.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},h)}),s&&e.createElement(l.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:v??s?.image??Z.r.Misc.Validator,onError:(0,I._)(G.GenericLight),width:36,height:36,className:"border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,size:"md",title:e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},(0,a.MDB)(s?.moniker,10,2)),subtitle:e.createElement(m.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},"Validator")}),c&&e.createElement(l.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:Z.r.Misc.Validator,onError:(0,I._)(G.GenericLight),width:36,height:36,className:"border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,size:"md",title:e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},(0,a.MDB)(c.moniker,10,2)),subtitle:e.createElement(m.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},"Provider")}))),e.createElement("div",{className:"flex flex-col items-center w-full gap-y-2"},k&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},k),g&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},g),N&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},N),e.createElement(l.Buttons.Generic,{className:"w-full",disabled:n||!!g||!!N,size:"normal",color:V.w.green600,onClick:f},n?e.createElement(Re.T,{color:V.w.white100}):`Confirm ${ce(y,!!c)}`)))),T&&e.createElement(Ve.Z,{showLedgerPopup:T}))}function ie({selectedValidator:t,setShowSelectValidatorSheet:E,selectDisabled:f,title:d}){const{data:x}=(0,a.pD_)(t),s=(0,l.useTheme)().theme;return e.createElement("div",{className:"flex flex-col gap-y-3 p-4 rounded-2xl bg-white-100 dark:bg-gray-950"},e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-medium"},d),e.createElement("button",{className:"flex w-full items-center cursor-pointer py-2.5 px-4 justify-between bg-gray-50 dark:bg-gray-900 rounded-xl",onClick:()=>{f||E(!0)},disabled:f},e.createElement("div",{className:"flex items-center gap-x-2"},e.createElement("img",{src:t?x??t?.image??Z.r.Misc.Validator:s===l.ThemeName.DARK?G.GenericDark:G.GenericLight,onError:(0,I._)(G.GenericLight),className:"rounded-full",width:24,height:24}),e.createElement(m.Z,{size:"sm",color:t?"text-black-100 dark:text-white-100":"text-gray-700 dark:text-gray-400",className:" font-bold"},t?(0,a.MDB)(t.moniker??"",30,0):"Select Validator")),!f&&e.createElement("span",{className:`material-icons-round ${t?"text-gray-800 dark:text-white-100":"text-gray-700 dark:text-gray-400"}`},"expand_more")))}var me=r(754699),de=r(637299),ue=r(276603),Oe=r(496128),Ie=r.n(Oe),Ee=r(634680);function fe({sortBy:t,setSortBy:E,isVisible:f,setVisible:d,onClose:x}){return e.createElement(q.Z,{isOpen:f,onClose:x,closeOnBackdropClick:!0,title:"Sort By",className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-3"},["Random","Amount staked","APY"].map(s=>e.createElement(l.GenericCard,{key:s,onClick:()=>{d(!1),E(s)},icon:t===s?e.createElement("img",{width:24,height:24,src:Z.r.Misc.CheckGreenNew}):void 0,size:"md",title:s,isRounded:!0,className:"p-4 !h-auto bg-white-100 dark:bg-gray-950"}))))}function ge({validator:t,onClick:E}){const[f]=(0,a.JsT)(),{data:d}=(0,a.pD_)(t);return e.createElement("div",{onClick:E,className:`relative flex justify-between items-center p-4 ${t.custom_attributes?.priority?"bg-[#29A87426]":"bg-white-100 dark:bg-gray-950"} cursor-pointer rounded-xl`},t.custom_attributes?.priority!==void 0&&t.custom_attributes.priority>=1&&e.createElement("div",{className:"text-white-100 dark:text-white-100 absolute top-0 right-4 px-1.5 py-0.5 bg-green-600 rounded-b-[4px] text-[10px] font-bold"},"Promoted"),e.createElement("div",{className:"flex items-center flex-grow"},e.createElement("img",{src:d??t?.image??Z.r.Misc.Validator,onError:(0,I._)(G.GenericLight),width:30,height:30,className:"mr-3 border rounded-full dark:border-[#333333] border-[#cccccc]"}),e.createElement("div",{className:"flex flex-col justify-center items-start w-full"},e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},(0,a.MDB)(t.moniker,30,0)),e.createElement("div",{className:"flex justify-between w-full"},e.createElement(m.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},`${Ie()(t.delegations?.total_tokens_display??t.tokens,{symbol:"",precision:0}).format()} ${f.coinDenom}`),e.createElement(m.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},"Commission:"," ",t.commission?.commission_rates.rate?`${new(i())(t.commission.commission_rates.rate).multipliedBy(100).toFixed(0)}%`:"N/A")))))}function je({isVisible:t,onClose:E,onValidatorSelect:f,validators:d,apy:x}){const[s,n]=(0,e.useState)(""),[g,y]=(0,e.useState)(!1),[w,N]=(0,e.useState)("Random"),T=(0,Ee.a7)(),[c,k]=(0,e.useState)(!1),[o,v]=(0,e.useMemo)(()=>{k(!0);const h=d.filter(S=>S.moniker.toLowerCase().includes(s.toLowerCase())||S.address.includes(s));h.sort((S,R)=>{switch(w){case"Amount staked":return+(S.tokens??"")<+(R.tokens??"")?1:-1;case"APY":return x?x[S.address]<x[R.address]?1:-1:0;case"Random":return Math.random()-.5}}),w==="Random"&&h.sort((S,R)=>{const P=S.custom_attributes?.priority,C=R.custom_attributes?.priority;return P!==void 0&&C!==void 0?P!==C?P-C:Math.random()-.5:P!==void 0?-1:C!==void 0?1:0});const j=h.filter(S=>S.active!==!1),$=h.filter(S=>S.active===!1);return k(!1),[j,s?$:[]]},[d,s,w,x]);return e.createElement(q.Z,{isOpen:t,onClose:()=>{n(""),E()},closeOnBackdropClick:!0,title:"Select Validator",className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-6"},e.createElement("div",{className:"flex gap-x-4 justify-between items-center"},e.createElement(de.M,{divClassName:"flex w-full bg-white-100 dark:bg-gray-950 rounded-full py-2 pl-5 pr-[10px] focus-within:border-green-600",value:s,onChange:h=>n(h.target.value),"data-testing-id":"validator-input-search",placeholder:"Search validators",onClear:()=>n("")}),e.createElement("span",{onClick:()=>y(!0),className:"material-icons-round text-black-100 dark:text-white-100 rounded-3xl cursor-pointer dark:bg-gray-950 bg-white-100 p-2"},"sort")),c&&e.createElement(ue.Z,null),!c&&o?.length===0&&v.length===0&&e.createElement(me.S,{isRounded:!0,subHeading:"Try a different search term",src:Z.r.Misc.Explore,heading:`No validators found for '${s}'`,"data-testing-id":"select-validator-empty-card"}),!c&&o.length!==0&&e.createElement("div",{className:"flex flex-col gap-y-4"},o.map(h=>e.createElement(ge,{key:h.address,validator:h,onClick:()=>f(h)}))),!c&&s&&v.length!==0&&e.createElement("div",{className:"flex flex-col gap-y-4"},e.createElement(m.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Inactive validator"),v.map(h=>e.createElement(ge,{key:h.address,validator:h,onClick:()=>f(h)})))),e.createElement(fe,{onClose:()=>y(!1),isVisible:g,setVisible:y,setSortBy:N,sortBy:w,activeChain:T}))}var ae=r(564510),$e=r(14080),Be=r(725312);function Fe({token:t,amount:E,setAmount:f,fees:d,hasError:x,setHasError:s,mode:n,delegationBalance:g,adjustAmount:y,setAdjustAmount:w}){const[N]=(0,a.JsT)(),[T]=(0,a.fOz)(),[c,k]=(0,e.useState)(""),[o,v]=(0,e.useState)(!1),[h,j]=(0,e.useState)(!1),$=(0,e.useMemo)(()=>c?o?new(i())(c).dividedBy(new(i())(t?.usdPrice??"0")).toString():new(i())(c).multipliedBy(new(i())(t?.usdPrice??"0")).toString():"",[c,o,t?.usdPrice]),S=(0,e.useMemo)(()=>{if(n==="DELEGATE"){const b=(0,ae.hI1)(t?.amount??"0",t?.coinDecimals??6),A=new(i())(b).minus(d?.amount??"0");if(A.lte(0))return"0";const L=new(i())((0,ae.TGo)(A.toString(),t?.coinDecimals??6)).toFixed(6,1);return o?new(i())(L).multipliedBy(t?.usdPrice??"0").toFixed(6,1):L}else return o?new(i())(g?.currenyAmount??"").toFixed(6,1):new(i())(g?.amount??"").toFixed(6,1)},[g?.amount,g?.currenyAmount,d?.amount,o,n,t?.amount,t?.coinDecimals,t?.usdPrice]),R=!new(i())(c).isEqualTo(S),P=(0,e.useCallback)(b=>{const A=new(i())(b);if(A.isLessThan(0)){s(!0);return}let L;if(n==="DELEGATE"?L=o?t?.usdValue??"0":t?.amount??"0":L=o?g?.currenyAmount??"":g?.amount??"",A.isGreaterThan(L)){s(!0);return}s(!1)},[g?.amount,g?.currenyAmount,o,n,s,t]),C=b=>{const A=b.target.value.replace(/\$/,"").replace?.(/^0+(?=\d)/,"")?.replace?.(/(\.+)/g,".");/^\d*\.?\d*$/.test(A)&&(k(A),P(A))},u=()=>{if(c){const b=o?(parseFloat(c)/parseFloat(t?.usdPrice??"0")).toFixed(6):(parseFloat(c)*parseFloat(t?.usdPrice??"0")).toFixed(6);k(b)}v(!o)},H=()=>{k(S??"")},Q=(0,e.useMemo)(()=>o?new(i())((n==="DELEGATE"?t?.usdValue:g?.currenyAmount)??""):new(i())((n==="DELEGATE"?t?.amount:g?.amount)??""),[g?.amount,g?.currenyAmount,o,n,t?.amount,t?.usdValue]);return(0,e.useEffect)(()=>{y&&(k(o?(parseFloat(E)*parseFloat(t?.usdPrice??"0")).toFixed(6):E),w(!1))},[y]),(0,e.useEffect)(()=>{if(c&&!x){const b=o?parseFloat(c)/parseFloat(t?.usdPrice??"0"):parseFloat(c);f(b.toFixed(6))}else f("")},[x,c,o,t?.usdPrice]),(0,e.useEffect)(()=>{j(n==="DELEGATE"&&!t||n!=="DELEGATE"&&!g)},[g,n,t]),e.createElement("div",{className:"p-4 flex flex-col gap-y-3 rounded-2xl bg-white-100 dark:bg-gray-950"},e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:" font-medium"},"You are ",n==="DELEGATE"||n==="REDELEGATE"?"staking":"unstaking"),e.createElement("div",{className:`border border-transparent bg-gray-50 dark:bg-gray-900 rounded-xl focus-within:${x?"border-red-300":"border-green-600"} flex w-full justify-between items-center px-4 py-0.5`},e.createElement("input",{className:" bg-gray-50 dark:bg-gray-900 text-md outline-none font-bold text-black-100 dark:text-white-100 py-2",value:o?`$${c}`:c,onChange:C,placeholder:"0",autoFocus:!0}),e.createElement("div",{className:"flex items-center gap-x-2"},e.createElement("img",{src:N?.icon,onError:(0,I._)(G.GenericLight),className:"rounded-full",width:24,height:24}),e.createElement(m.Z,{className:"font-bold",size:"sm"},N?.coinDenom))),e.createElement("div",{className:"flex items-center justify-between w-full"},!c&&e.createElement("div",{onClick:u,className:"hover:cursor-pointer rounded-2xl px-2.5 py-1 bg-gray-50 dark:bg-gray-900 flex items-center gap-x-0.5"},e.createElement(m.Z,{size:"xs",className:"font-medium",color:"text-gray-800 dark:text-gray-200"},"Switch to ",o?"TOKEN":"USD"," "),e.createElement("span",{className:"material-icons-round text-gray-800 dark:text-gray-200 !text-xs "},"swap_vert")),c&&e.createElement("div",{className:"flex items-center gap-x-2"},e.createElement(m.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200"},o?`${(0,a.LHZ)($)} ${N?.coinDenom}`:T(new(i())($))),e.createElement("span",{onClick:u,className:"material-icons-round hover:cursor-pointer bg-gray-50 dark:bg-gray-850 rounded-full text-gray-800 dark:text-white-100 !text-xs p-1"},"swap_vert")),e.createElement("div",{className:"flex items-center gap-x-2"},h&&e.createElement($e.Z,{count:1,width:50,height:16}),!h&&e.createElement(m.Z,{size:"xs",color:`${x?"text-red-300 dark:text-red-300":"text-gray-800 dark:text-gray-200"}`},"Bal"," ",Q.eq(0)?"0":o?T(Q):(0,a.LHZ)(Q.toString())),R&&new(i())(t?.amount??"0").isGreaterThan(0)&&e.createElement("div",{onClick:H,className:"hover:cursor-pointer rounded-2xl px-3 py-1",style:{backgroundColor:(0,Be.r)(V.w.green600,.2)}},e.createElement(m.Z,{size:"xs",className:"font-medium",style:{color:V.w.green600}},"Max")))))}var Ue=r(598916),We=r(910416),Ke=r(730927),He=r(625890),Ye=r(8891),Je=r.n(Ye),Qe=r(470726);function Xe({isOpen:t,tokenAmount:E,fee:f,setTokenAmount:d,onAdjust:x,onCancel:s,token:n}){const{theme:g}=(0,l.useTheme)(),y=(0,e.useMemo)(()=>{const c=(0,ae.hI1)(n.amount??"0",n?.coinDecimals??6),k=new(i())(c).minus(f?.amount??"");return k.lte(0)?"0":new(i())((0,ae.TGo)(k.toString(),n?.coinDecimals??6)).toFixed(6,1)},[f?.amount,n.amount,n?.coinDecimals]),w=(0,e.useCallback)(()=>{y?(d(y),x()):s()},[x,s,d,y]),N=(0,e.useMemo)(()=>`${E} ${n.symbol??""}`,[n.symbol,E]),T=(0,e.useMemo)(()=>y?`${y} ${n.symbol??""}`:null,[n.symbol,y]);return e.createElement(q.Z,{isOpen:t,onClose:s,closeOnBackdropClick:!1,title:"Adjust for Transaction Fees"},e.createElement("div",{className:"rounded-2xl p-4 dark:bg-gray-900 bg-white-100 dark:text-gray-200 text-gray-800"},e.createElement("p",null,"Insufficient ",n.symbol??""," balance to pay transaction fees."),e.createElement("p",{className:"mt-2"},"Should we adjust the amount from"," ",e.createElement("span",{className:"text-green-500 font-medium"},N)," to"," ",e.createElement("span",{className:"text-green-500 font-medium"},T??"-"),"?")),e.createElement("div",{className:"flex flex-col items-center gap-y-3 mt-5"},e.createElement(l.Buttons.Generic,{color:g===l.ThemeName.DARK?V.w.gray900:V.w.gray300,size:"normal",className:"w-full",title:"Don't adjust",onClick:s},"Cancel Transaction"),e.createElement(l.Buttons.Generic,{color:V.w.green600,size:"normal",className:"w-full",title:"Auto-adjust",onClick:w},"Auto-adjust")))}function xe({selectedProvider:t,setShowSelectProviderSheet:E,selectDisabled:f,title:d,optional:x}){const s=(0,l.useTheme)().theme;return e.createElement("div",{className:"flex flex-col gap-y-3 p-4 rounded-2xl bg-white-100 dark:bg-gray-950"},e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-medium"},d),e.createElement("button",{className:"flex w-full items-center cursor-pointer py-2.5 px-4 justify-between bg-gray-50 dark:bg-gray-900 rounded-xl",onClick:()=>{f||E(!0)},disabled:f},e.createElement("div",{className:"flex items-center gap-x-2"},e.createElement("img",{src:t?Z.r.Misc.Validator:s===l.ThemeName.DARK?G.GenericDark:G.GenericLight,onError:(0,I._)(G.GenericLight),className:"rounded-full",width:24,height:24}),e.createElement(m.Z,{size:"sm",color:t?"text-black-100 dark:text-white-100":"text-gray-700 dark:text-gray-400",className:" font-bold"},t?(0,a.MDB)(t.moniker??"",30,0):`Select Provider ${x?"(optional)":""}`)),!f&&e.createElement("span",{className:`material-icons-round ${t?"text-gray-800 dark:text-white-100":"text-gray-700 dark:text-gray-400"}`},"expand_more")))}function qe({provider:t,onClick:E}){const[f]=(0,a.JsT)();return e.createElement("div",{onClick:E,className:"relative flex justify-between items-center p-4 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl"},e.createElement("div",{className:"flex items-center flex-grow"},e.createElement("img",{src:Z.r.Misc.Validator,onError:(0,I._)(G.GenericLight),width:30,height:30,className:"mr-3 border rounded-full dark:border-[#333333] border-[#cccccc]"}),e.createElement("div",{className:"flex flex-col justify-center items-start w-full"},e.createElement(m.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},(0,a.MDB)(t.moniker,30,0)))))}function _e({isVisible:t,onClose:E,onProviderSelect:f,providers:d,apy:x}){const[s,n]=(0,e.useState)(""),[g,y]=(0,e.useState)(!1),[w,N]=(0,e.useState)("Random"),T=(0,Ee.a7)(),[c,k]=(0,e.useState)(!1),o=(0,e.useMemo)(()=>{k(!0);const v=d.filter(h=>h.moniker&&h.moniker.toLowerCase().includes(s.toLowerCase())).slice(0,100);return v.sort((h,j)=>{switch(w){case"Amount staked":return 0;case"APY":return 0;case"Random":return Math.random()-.5}}),k(!1),v},[d,s,w]);return e.createElement(q.Z,{isOpen:t,onClose:()=>{n(""),E()},closeOnBackdropClick:!0,title:"Select Provider",className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-6"},e.createElement(de.M,{divClassName:"flex w-full bg-white-100 dark:bg-gray-950 rounded-full py-2 pl-5 pr-[10px] focus-within:border-green-600",value:s,onChange:v=>n(v.target.value),"data-testing-id":"provider-input-search",placeholder:"Search providers",onClear:()=>n("")}),c&&e.createElement(ue.Z,null),!c&&o?.length===0&&e.createElement(me.S,{isRounded:!0,subHeading:"Try a different search term",src:Z.r.Misc.Explore,heading:`No providers found for '${s}'`,"data-testing-id":"select-provider-empty-card"}),!c&&o.length!==0&&e.createElement("div",{className:"flex flex-col gap-y-4"},o.map(v=>e.createElement(qe,{key:`${v.address}+${v.spec}`,provider:v,onClick:()=>f(v)})))),e.createElement(fe,{onClose:()=>y(!1),isVisible:g,setVisible:y,setSortBy:N,sortBy:w,activeChain:T}))}const et=te.w.useGetWallet,tt=t=>{switch(t){case"DELEGATE":return"stake_delegate";case"REDELEGATE":return"stake_redelegate";case"UNDELEGATE":return"stake_undelegate";case"CANCEL_UNDELEGATION":return"stake_cancel_undelegate";case"CLAIM_REWARDS":return"stake_claim";default:return"stake_delegate"}};function at(){const[t,E]=(0,e.useState)(),[f,d]=(0,e.useState)(!1),[x,s]=(0,e.useState)(!1),[n,g]=(0,e.useState)(!1),[y,w]=(0,e.useState)(!1),[N,T]=(0,e.useState)(!1),[c,k]=(0,e.useState)(!1),[o,v]=(0,e.useState)(!1),[h,j]=(0,e.useState)(!1),$=(0,J.s0)(),[S]=(0,a.JsT)(),{allAssets:R}=(0,a.zSw)(),{toValidator:P,fromValidator:C,mode:u="DELEGATE",delegation:H,toProvider:Q,fromProvider:b,providerDelegation:A}=(0,J.TH)().state,[L,rt]=(0,e.useState)(Q),{network:B,delegations:he}=(0,a.nDu)(),{providers:pe}=(0,a.fHb)(),ye=(0,e.useMemo)(()=>(0,Qe.z)((0,Ke.Z)(new Date,B?.chain?.params?.unbonding_time??24*60*60+10).toISOString(),""),[B]),X=(0,e.useMemo)(()=>B?B.getValidators({}):{},[B]),st=(0,e.useMemo)(()=>B?B.validatorApys:{},[B]),re=(0,a.a74)(),{data:ve}=(0,a.S2A)(),{amount:F,setAmount:be,recommendedGasLimit:ke,userPreferredGasLimit:nt,setUserPreferredGasLimit:lt,userPreferredGasPrice:ot,gasOption:we,setFeeDenom:Ne,isLoading:ct,onReviewTransaction:Se,customFee:_,feeDenom:De,setGasOption:Ce,error:it,ledgerError:Ae,setLedgerError:le,showLedgerPopup:mt,setMemo:oe}=re==="lava"&&ve?.restaking.extension==="active"?(0,a.$l7)(u,t,C,[H],[A],L,b):(0,a.rKd)(u,t,C,[H]),{activeWallet:dt}=(0,He.ZP)(),ut=(0,a.obn)(),se=(0,z.e7)({activeChain:re,selectedNetwork:ut}),Te=et(),[Le,Et]=(0,e.useState)(null),[ft,Ge]=(0,e.useState)({option:we,gasPrice:ot??se.gasPrice}),[Pe,gt]=(0,e.useState)(),Y=(0,e.useMemo)(()=>R?.find(p=>p.symbol===S.coinDenom),[S.coinDenom,R]),xt=(0,e.useMemo)(()=>Object.values(X??{}).filter(p=>!p.jailed).filter(p=>p.address!==C?.address),[C?.address,X]),ht=(0,e.useMemo)(()=>Object.values(X??{}).filter(p=>Object.values(he??{}).some(U=>U.delegation.validator_address===p.address)),[he,X]),pt=(0,e.useMemo)(()=>{const p=[...pe];return u==="REDELEGATE"&&p.push({provider:"empty_provider",moniker:"Empty Provider",address:"empty_provider",chain:"",spec:""}),p.filter(U=>U.address!==b?.address)},[b?.address,u,pe]);(0,e.useEffect)(()=>{Ge({option:we,gasPrice:se.gasPrice})},[se.gasPrice.amount.toString(),se.gasPrice.denom]),(0,e.useEffect)(()=>{if(!t){if(k(!0),P)E(P);else if(u==="DELEGATE"){const p=Object.values(X??{}).find(U=>U.custom_attributes?.priority===0);p&&E(p)}k(!1)}},[u,t,P,X]);const yt=(0,e.useCallback)((p,U)=>{Ge(p),p.option&&Ce(p.option),Ne(U.denom)},[Ne,Ce]),Me=(0,e.useCallback)(()=>{$("/stake-pending-txn",{state:{validator:t,provider:L,mode:u}}),Je().track(We.B_.TransactionSigned,{transactionType:tt(u)})},[u,$,t,L]),vt=(0,e.useCallback)(async()=>{try{const p=await Te();await Se(p,Me,!1,{stdFee:_,feeDenom:De})}catch(p){le(p.message),setTimeout(()=>{le("")},6e3)}},[_,De,Te,Se,le,Me]);(0,e.useEffect)(()=>{h&&new(i())(F).gt(0)&&w(!0)},[h,F]),(0,e.useEffect)(()=>{(u==="DELEGATE"||u==="REDELEGATE")&&t?.custom_attributes?.priority&&t?.custom_attributes?.priority>0?oe("Staked with Leap Wallet"):oe("")},[u,t?.custom_attributes?.priority,oe]);const bt=(0,e.useMemo)(()=>{if(H)return H.balance;if(A)return A.amount},[H,A]);return e.createElement("div",null,e.createElement(ne.Z,{header:e.createElement(l.Header,{action:{onClick:()=>$(-1),type:l.HeaderActionType.BACK},title:u==="UNDELEGATE"?"Unstaking":"Staking"})},e.createElement("div",{className:"flex flex-col justify-between p-4",style:{height:"calc(100% - 72px)"}},e.createElement("div",{className:"space-y-4 overflow-y-auto"},C&&e.createElement(ie,{title:"Current Validator",selectedValidator:C,setShowSelectValidatorSheet:d,selectDisabled:!0}),b&&e.createElement(xe,{title:"Current Provider",selectedProvider:b,setShowSelectProviderSheet:s,selectDisabled:!0}),e.createElement(Fe,{amount:F,setAmount:be,adjustAmount:h,setAdjustAmount:j,token:Y,fees:_?.amount[0],hasError:N,setHasError:T,mode:u,delegationBalance:bt}),!b&&(c?e.createElement(Ue.D,null):e.createElement(ie,{title:"Validator",selectedValidator:t,setShowSelectValidatorSheet:d,selectDisabled:u==="UNDELEGATE"&&!!P})),re==="lava"&&dt?.walletType!==a._KQ.LEDGER&&ve?.restaking.extension==="active"&&(u==="DELEGATE"||u==="REDELEGATE"&&b||u==="UNDELEGATE"&&Q)&&e.createElement(xe,{title:"Provider",optional:u==="DELEGATE",selectedProvider:L,setShowSelectProviderSheet:s,selectDisabled:u==="UNDELEGATE"}),Y&&new(i())(Y.amount).isEqualTo(0)&&e.createElement(Ze,null),t&&t.active===!1&&(u==="DELEGATE"||u==="REDELEGATE")&&e.createElement(K,null)),e.createElement("div",null,new(i())(F).isGreaterThan(0)&&e.createElement("div",{className:"flex items-center justify-between pt-2 px-2"},e.createElement("div",{className:"flex gap-x-1"},e.createElement(m.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",className:"font-medium text-center"},"Unstaking period"),e.createElement(m.Z,{size:"xs",color:"text-black-100 dark:text-white-100",className:"font-medium"},ye)),e.createElement("div",{onClick:()=>g(!0),className:"flex gap-x-1 items-center hover:cursor-pointer"},e.createElement("span",{className:"material-icons-round !text-lg text-black-100 dark:text-white-100"},"local_gas_station"),e.createElement(m.Z,{size:"xs",color:"text-black-100 dark:text-white-100",className:"font-medium"},Pe?.fiatValue),e.createElement("span",{className:"material-icons-round text-black-100 dark:text-white-100"},"expand_more"))),e.createElement(l.Buttons.Generic,{size:"normal",className:"mt-2",color:N?V.w.red300:V.w.green600,onClick:()=>{u==="DELEGATE"&&parseFloat(F)+(Pe?.value??0)>parseFloat(Y?.amount??"")?v(!0):w(!0)},disabled:!new(i())(F).isGreaterThan(0)||N||(C||u==="DELEGATE")&&!t||b&&!L||!!Ae},N?"Insufficient Balance":`Review ${ce(u,!!b)}`)))),e.createElement(je,{isVisible:f,onClose:()=>d(!1),onValidatorSelect:p=>{E(p),d(!1)},validators:u==="UNDELEGATE"?ht:xt,apy:st}),re==="lava"&&e.createElement(_e,{isVisible:x,onClose:()=>s(!1),onProviderSelect:p=>{rt(p),s(!1)},providers:pt}),e.createElement(ze,{isVisible:y,isLoading:ct,onClose:()=>w(!1),onSubmit:vt,tokenAmount:F,token:Y,validator:t,provider:L,error:it,gasError:Le,ledgerError:Ae,mode:u,unstakingPeriod:ye,showLedgerPopup:mt}),u==="DELEGATE"&&Y&&_&&o?e.createElement(Xe,{tokenAmount:F,setTokenAmount:be,token:Y,fee:_.amount[0],onAdjust:()=>{v(!1),j(!0)},onCancel:()=>{v(!1)},isOpen:o}):null,e.createElement(z.ZP,{recommendedGasLimit:ke,gasLimit:nt?.toString()??ke,setGasLimit:p=>lt(Number(p.toString())),gasPriceOption:ft,onGasPriceOptionChange:yt,error:Le,setError:Et},e.createElement(W.a,{className:"hidden",setDisplayFeeValue:gt,setShowFeesSettingSheet:g}),e.createElement(O.k,{showFeesSettingSheet:n,onClose:()=>g(!1),gasError:null})))}},470726:(ee,M,r)=>{r.d(M,{z:()=>D});var a=r(727484),l=r.n(a);const D=(i,z,W)=>{const O=l()(i).diff(W??new Date),ne=Math.floor(O/(24*60*60*1e3)),m=Math.floor(O/(60*60*1e3)),te=Math.floor((O-m*60*60*1e3)/(60*1e3)),e=Math.floor((O-m*60*60*1e3-te*60*1e3)/1e3);let J="";for(const K of[[ne,"day"],[m,"hour"],[te,"minute"],[e,"second"]])if(K[0]!==0){J=`${K[0]} ${K[0]===1?K[1]:K[1]+"s"} ${z??"left"}`;break}return J}},730927:(ee,M,r)=>{r.d(M,{Z:()=>i});var a=r(242765),l=r(891310),D=r(319785);function i(z,W){(0,D.Z)(2,arguments);var O=(0,a.Z)(W);return(0,l.Z)(z,O*1e3)}}}]);
