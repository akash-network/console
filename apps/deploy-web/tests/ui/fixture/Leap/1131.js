"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[1131],{331131:(oe,R,s)=>{s.r(R),s.d(R,{default:()=>Ce});var n=s(964266),g=s(339279),F=s(892742),O=s(128844),P=s(634680),D=s(508181),e=s(202784),se=s(410289),le=s(842543),ce=s(472565),z=s.n(ce),H=s(905865),J=s(861111);function re({title:i,subtitle:l,isRounded:o,imgSrc:c,TokenType:u,onToggleChange:p,isToggleChecked:h,onDeleteClick:T}){const m=(0,H.a)();return e.createElement(g.GenericCard,{title:i,subtitle:e.createElement("p",null,l," ",u??null),isRounded:o,size:"md",img:e.createElement("img",{src:c??m,className:"h-8 w-8 mr-3",onError:(0,J._)(m)}),icon:e.createElement("div",{className:"flex items-center gap-[8px]"},e.createElement(g.Toggle,{checked:h,onChange:p}),e.createElement("div",{className:"h-[36px] w-[0.25px] bg-gray-200 dark:bg-gray-600"}),e.createElement("button",{className:"cursor-pointer",onClick:T},e.createElement("img",{className:"invert dark:invert-0",src:D.r.Misc.DeleteRed,alt:"remove"})))})}var ie=s(240483),$=s(610675);function me({isOpen:i,onClose:l,tokenToDelete:o}){const c=(0,n.a74)(),u=(0,n.QSC)(),p=(0,n.D$K)(),h=(0,n.ALw)(),T=(0,n.Pif)(),m=(0,n.L5j)(),r=(0,n.dtC)(),M=(0,n.kYR)(),x=(0,e.useMemo)(()=>{const C=o?.coinDenom??"";return C.slice(0,1).toUpperCase()+C.slice(1).toLowerCase()},[o?.coinDenom]),b=()=>{o&&p[o?.coinMinimalDenom??""]?r(o,c):o&&h[o?.coinMinimalDenom??""]?m(o,c):o&&T[o?.coinMinimalDenom??""]&&M(o,c),l()};return e.createElement(ie.Z,{title:"Delete Token",closeOnBackdropClick:!0,onClose:l,isOpen:i},e.createElement("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 p-8 flex flex-col items-center mb-4 text-center"},e.createElement("div",{className:"rounded-full bg-red-300 p-[18px] w-fit flex"},e.createElement("img",{src:D.r.Misc.DeleteTokenSheetBin})),e.createElement("div",{className:"font-bold text-gray-800 dark:text-white-100 text-base mt-3"},"Confirm Delete?"),e.createElement("div",{className:"text-gray-400 font-medium text-sm"},"Are you sure you want to delete your manually added \u201C",x,"\u201D token on"," ",u.chainName,"?")),e.createElement("div",{className:"flex flex-row justify-between"},e.createElement(g.Buttons.Generic,{style:{height:"48px",background:$.w.gray900,color:$.w.white100},onClick:l},"Cancel"),e.createElement(g.Buttons.Generic,{style:{background:$.w.getChainColor(c)},className:"ml-3 h-[48px] cursor-pointer text-white-100",onClick:b},"Confirm")))}var de=s(754699);function ue({onAddTokenClick:i,searchedText:l}){let o=e.createElement("p",{className:"text-[13px]"},"Or manually add token data"," ",e.createElement("button",{className:"border-none bg-transparent hover:underline cursor-pointer font-bold text-sm",style:{color:"#ad4aff"},onClick:()=>i(!1)},"here"));return l&&(o=e.createElement("p",{className:"text-[13px]"},"Try manually adding tokens instead",e.createElement(g.Buttons.Generic,{onClick:()=>i(!0),className:"max-w-[200px] text-gray-900 mt-[16px]",style:{boxShadow:"none"}},"Add Tokens Manually"))),e.createElement(de.S,{isRounded:!0,subHeading:o,heading:e.createElement("p",{className:"text-[15px]"},l?"No results found":"Search for any token"),src:D.r.Misc.Explore})}function Z({title:i,showRedirection:l,handleRedirectionClick:o}){return e.createElement("div",{className:"flex gap-1 items-center font-bold dark:text-white-100"},e.createElement("span",{className:"shrink-0"},i),l&&e.createElement("button",{onClick:o,className:"!text-md dark:text-gray-400 !leading-4 flex items-center material-icons-round"},"open_in_new"))}function fe({tokens:i,handleToggleChange:l,fetchedTokens:o,onDeleteClick:c}){const u=(0,n.ALw)(),p=(0,n.Pif)(),h=(0,n.z51)(),T=(0,n.fFl)(),{getExplorerAccountUrl:m}=(0,n.JVF)({});return e.createElement("div",null,e.createElement("div",{className:"font-bold text-sm text-gray-600 dark:text-gray-200 mb-2"},"Manually added tokens"),e.createElement("div",{className:"rounded-2xl flex flex-col items-center justify-center dark:bg-gray-900 bg-white-100 overflow-hidden"},i.map((r,M,x)=>{const b=M===x.length-1;let C=e.createElement(U,{type:"native",className:"bg-[#ff9f0a1a] text-orange-500"});const N=(0,n.MDB)(r?.name??(0,n.kC2)(r.coinDenom.toLowerCase()),7,4),S=(0,n.MDB)(r.coinDenom,4,4);u[r.coinMinimalDenom]?C=e.createElement(U,{type:"cw20",className:"bg-[#29A8741A] text-green-600"}):p[r.coinMinimalDenom]?C=e.createElement(U,{type:"erc20",className:"bg-[#A52A2A1A] text-[#a52a2a]"}):r.coinMinimalDenom.trim().toLowerCase().startsWith("factory")&&(C=e.createElement(U,{type:"factory",className:"bg-[#0AB8FF1A] text-teal-500"}));const w=m(r.coinMinimalDenom),j=A=>{A.stopPropagation(),window.open(w,"_blank")};return e.createElement(e.Fragment,{key:`${r.coinMinimalDenom}-${M}`},e.createElement(re,{title:e.createElement(Z,{title:N,showRedirection:!!u[r.coinMinimalDenom]&&!!w,handleRedirectionClick:j}),subtitle:S,isRounded:b,imgSrc:r.icon,TokenType:C,isToggleChecked:!h.includes(r.coinMinimalDenom)&&!o.includes(r.coinMinimalDenom)&&T.includes(r.coinMinimalDenom),onToggleChange:A=>l(A,r.coinMinimalDenom),onDeleteClick:()=>c(r)}),b?null:e.createElement(g.CardDivider,null))})))}function ge({tokens:i,handleToggleChange:l}){const o=(0,H.a)(),c=(0,n.qT2)(),u=(0,n.AeS)(),{theme:p}=(0,g.useTheme)(),{getExplorerAccountUrl:h}=(0,n.JVF)({}),T=(0,e.useMemo)(()=>({...c,...u}),[c,u]);return e.createElement("div",null,e.createElement("div",{className:"font-bold text-sm text-gray-600 dark:text-gray-200 mb-2"},"Supported tokens"),e.createElement("div",{className:"rounded-2xl flex flex-col items-center justify-center dark:bg-gray-900 bg-white-100 overflow-hidden"},i.map((m,r,M)=>{const x=r===M.length-1,b=(0,n.MDB)(m?.name??(0,n.kC2)(m.coinDenom.toLowerCase()),7,4),C=(0,n.MDB)(m.coinDenom,4,4),N=h(m.coinMinimalDenom),S=w=>{w.stopPropagation(),window.open(N,"_blank")};return e.createElement(e.Fragment,{key:`${m.coinMinimalDenom}-${r}`},e.createElement(g.GenericCard,{title:e.createElement(Z,{title:b,showRedirection:!!T?.[m?.coinMinimalDenom]&&!!N,handleRedirectionClick:S}),subtitle:C,isRounded:x,size:"md",img:e.createElement("div",{className:"relative mr-3"},e.createElement("img",{src:m.icon??o,className:"h-7 w-7",onError:(0,J._)(o)}),m.verified&&e.createElement("div",{className:"absolute group -bottom-[5px] -right-[5px]"},e.createElement("img",{src:p===g.ThemeName.DARK?D.r.Misc.VerifiedWithBgStarDark:D.r.Misc.VerifiedWithBgStar,alt:"verified-token",className:"h-4 w-4"}),e.createElement("div",{className:"group-hover:!block hidden absolute bottom-0 right-0 translate-x-full bg-gray-200 dark:bg-gray-800 px-3 py-2 rounded-lg text-xs dark:text-white-100"},"Whitelisted"))),icon:e.createElement("div",{className:"flex items-center gap-[8px]"},e.createElement(g.Toggle,{checked:m.enabled,onChange:w=>l(w,m.coinMinimalDenom)}))}),x?null:e.createElement(g.CardDivider,null))})))}var pe=s(294184),he=s.n(pe);function U({className:i,type:l}){return e.createElement("span",{className:he()("px-[6px] py-[1px] text-[10px] text-center ml-[2px] rounded-xl",i)},l)}function xe(i,l){const o=i.coinDenom.toUpperCase(),c=l.coinDenom.toUpperCase();return o<c?-1:o<c?1:0}function Ce(){const i=(0,n.D$K)(),l=(0,n.ALw)(),o=(0,n.Pif)(),c=(0,n.z51)(),u=(0,n.fFl)(),p=(0,n.qT2)(),h=(0,n.mP2)(),T=(0,n.X52)(),m=(0,n.qWp)(),r=(0,n.rjt)(),M=(0,n.tPJ)(),x=(0,P.a7)(),b=(0,se.s0)(),C=(0,n.lSw)(),{lcdUrl:N}=(0,n.U9i)(),{cw20TokensBalances:S,erc20TokensBalances:w}=(0,n.rM)(),j=(0,n.AeS)(),[A,Q]=(0,e.useState)(!1),[Ee,X]=(0,e.useState)(),[E,ve]=(0,e.useState)(""),[G,K]=(0,e.useState)([]),[Y,q]=(0,e.useState)(!1),_=(0,e.useRef)(),[I,ee]=(0,e.useState)([]),[te,ye]=(0,e.useState)([]);(0,e.useEffect)(()=>{let t=[];const a=Object.values(p)?.map(d=>{const k=S?.find(f=>f.coinMinimalDenom===d.coinMinimalDenom);return{...d,enabled:String(k?.amount)==="0"?u?.includes(d.coinMinimalDenom):!c?.includes(d.coinMinimalDenom),verified:!0}})??[],v=Object.values(j)?.map(d=>({...d,enabled:u?.includes(d.coinMinimalDenom),verified:!1}))??[],y=Object.values(h)?.map(d=>{const k=w?.find(f=>f.coinMinimalDenom===d.coinMinimalDenom);return{...d,enabled:String(k?.amount)==="0"?u?.includes(d.coinMinimalDenom):!c?.includes(d.coinMinimalDenom),verified:!0}})??[];t=[...t,...a,...v,...y],ye(t)},[j,p,S,c,u,h,w]),(0,e.useEffect)(()=>{let t=[];i&&(t=[...t,...Object.values(i)]),l&&(t=[...t,...Object.values(l)]),o&&(t=[...t,...Object.values(o)]),ee(t)},[l,o,i]),(0,e.useEffect)(()=>{K(t=>(t??[]).filter(a=>!c.includes(a)))},[c.length]);const B=(0,e.useMemo)(()=>I?.filter(t=>{const a=E.trim().toLowerCase();return!!((t.name??"").toLowerCase().includes(a)||t.coinDenom.toLowerCase().includes(a)||t.coinMinimalDenom.toLowerCase().includes(a))})?.sort((t,a)=>{const v=t.coinDenom.toUpperCase(),y=a.coinDenom.toUpperCase();return v<y?-1:v<y?1:0})??[],[I,E]),L=(0,e.useMemo)(()=>te?.filter(t=>{const a=E.trim().toLowerCase();return!!((t.name??"").toLowerCase().includes(a)||t.coinDenom.toLowerCase().includes(a)||t.coinMinimalDenom.toLowerCase().includes(a))})?.sort((t,a)=>{const v=t.enabled,y=a.enabled;if(v&&!y)return-1;if(!v&&y)return 1;const d=!!(p?.[t.coinMinimalDenom]||h?.[t.coinMinimalDenom]),k=!!(p?.[a.coinMinimalDenom]||h?.[a.coinMinimalDenom]);return d&&!k?-1:!d&&k?1:xe(t,a)})??[],[te,E,p,h]);(0,e.useEffect)(()=>{E.length!==0&&L.length===0&&B.length===0&&(clearTimeout(_.current),_.current=setTimeout(async()=>{try{q(!0);const t=await(0,le.s)(N??"",E);typeof t!="string"&&t.symbol&&(K(a=>[...a,E]),ee(a=>[...a,{name:t.name,coinDecimals:t.decimals,coinMinimalDenom:E,coinDenom:t.symbol,icon:"",coinGeckoId:"",chain:x}]))}catch{}finally{q(!1)}},100))},[E,B.length,N,x,L.length]);const ne=(t=!1)=>{if(z().extension.getViews({type:"popup"}).length===0){const v={replace:!0};t&&(v.state={coinMinimalDenom:E}),b("/add-token",v)}else window.open(z().runtime.getURL("index.html#/add-token"))},ae=async(t,a)=>{T.some(f=>f===a)||await M([...T,a]);let y=[],d=[],k=!1;if(t){y=c.filter(W=>W!==a),d=[...u,a];const f=I.find(W=>W.coinMinimalDenom===a);G.includes(a)&&f&&(k=!0)}else y=[...c,a],d=u.filter(f=>f!==a);if(await m(y),await r(d),k){const f=I.find(V=>V.coinMinimalDenom===a),W=G.filter(V=>V!==a);K(W),await C(a,{chain:x,name:f.name,coinDenom:f.coinDenom,coinMinimalDenom:f.coinMinimalDenom,coinDecimals:f.coinDecimals,icon:f?.icon,coinGeckoId:f?.coinGeckoId},x)}};return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement(F.Z,{header:e.createElement(g.Header,{action:{onClick:()=>b(-1),type:g.HeaderActionType.BACK},title:"Manage Tokens"})},e.createElement("div",{className:"w-full flex flex-col justify-center py-[28px] items-center px-7 gap-[16px]"},e.createElement("div",{className:"w-full flex items-center justify-between gap-[10px]"},e.createElement("div",{className:"w-[296px] flex h-10 bg-white-100 dark:bg-gray-900 rounded-[30px] py-2 pl-5 pr-[10px]"},e.createElement("input",{placeholder:"Search by token or paste address...",className:"flex flex-grow text-base text-gray-600 dark:text-gray-200  outline-none bg-white-0",onChange:t=>ve(t.target.value)}),e.createElement("img",{src:D.r.Misc.Search})),e.createElement("button",{className:"h-10 bg-white-100 dark:bg-gray-900 w-10 flex justify-center items-center rounded-full",onClick:()=>ne()},e.createElement("span",{className:"material-icons-round !text-lg text-gray-400 dark:text-gray-400"},"add"))),Y===!0?e.createElement("div",{className:"flex items-center justify-center"},e.createElement(O.T,{color:"#29a874"})):null,Y===!1&&B.length===0&&L.length===0?e.createElement(ue,{onAddTokenClick:ne,searchedText:E}):null,L.length>0?e.createElement(ge,{tokens:L,handleToggleChange:ae}):null,B.length>0?e.createElement(fe,{onDeleteClick:t=>{Q(!0),X(t)},tokens:B,handleToggleChange:ae,fetchedTokens:G}):null)),e.createElement(me,{isOpen:A,onClose:()=>{Q(!1),X(void 0)},tokenToDelete:Ee}))}},842543:(oe,R,s)=>{s.d(R,{s:()=>F});var n=s(722912),g=s(348834).Buffer;async function F(O,P){const D=`${O}/cosmwasm/wasm/v1/contract/${P}/smart/${g.from('{"token_info":{}}').toString("base64")}`,{data:e}=await n.Z.get(D);return e.error&&e.error.toLowerCase().includes("decoding bech32 failed")?"Invalid Contract Address":e.data}}}]);
