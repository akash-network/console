(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[5203],{86211:(Ke,be,a)=>{"use strict";a.d(be,{K:()=>oe});var n=a(964266),M=a(564510),j=a(339279),Ne=a.n(j),ge=a(240483),g=a(202784),W=a(410289),G=a(610675);const Se=({isOpen:$,tokenAmount:J,feeAmount:e,setAmount:he,nativeDenom:de,onAdjust:le,onCancel:Te,onBack:Me})=>{const{theme:Pe}=(0,j.useTheme)(),F=(0,g.useMemo)(()=>(0,n.ww6)({tokenAmount:J,feeAmount:e,nativeDenom:de}),[e,de,J]),De=(0,g.useCallback)(()=>{F?(he(F),le()):Te()},[le,Te,he,F]),ae=(0,g.useMemo)(()=>`${(0,M.TGo)(J,de?.coinDecimals??6)} ${de?.coinDenom??""}`,[de?.coinDecimals,de?.coinDenom,J]),xe=(0,g.useMemo)(()=>F?`${F} ${de?.coinDenom??""}`:null,[de?.coinDenom,F]);return g.createElement(ge.Z,{isOpen:$,title:"Adjust for Transaction Fees",closeOnBackdropClick:!0,onClose:Te,onActionButtonClick:Me,containerClassName:"!max-h-[600px]",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},g.createElement("p",{className:"text-gray-200 font-medium mb-6"},"Confirming this transaction may leave you with insufficient ",de?.coinDenom??""," ","balance for future transaction fees."),g.createElement("div",{className:"rounded-2xl p-4 dark:bg-gray-900 bg-gray-50 mb-6"},g.createElement("p",{className:"text-sm text-white-100 font-bold mb-4"},"Should we auto-adjust the amount?"),g.createElement("div",{className:"flex items-center rounded-xl p-4 dark:bg-gray-850 bg-gray-100 gap-4"},g.createElement("div",{className:"flex-1 text-right text-sm text-white-100 font-bold"},ae),g.createElement("div",{className:"material-icons-round text-gray-400 !text-lg"},"east"),g.createElement("div",{className:"flex-1 text-sm text-green-500 font-bold"},xe))),g.createElement("div",{className:"flex items-center gap-6"},g.createElement(j.Buttons.Generic,{color:Pe===j.ThemeName.DARK?G.w.gray900:G.w.gray300,size:"normal",className:"w-full",title:"Don't adjust",onClick:Te},"Cancel"),g.createElement(j.Buttons.Generic,{color:G.w.green600,size:"normal",className:"w-full",title:"Proceed",onClick:De},"Proceed")))},ne=({isOpen:$,tokenAmount:J,tokenBalance:e,feeAmount:he,setAmount:de,nativeDenom:le,onAdjust:Te,onCancel:Me})=>{const{theme:Pe}=(0,j.useTheme)(),F=(0,g.useMemo)(()=>(0,n.ww6)({tokenAmount:e,feeAmount:he,nativeDenom:le}),[he,le,J]),De=(0,g.useCallback)(()=>{F?(de(F),Te()):Me()},[Te,Me,de,F]),ae=(0,g.useMemo)(()=>`${(0,M.TGo)(J,le?.coinDecimals??6)} ${le?.coinDenom??""}`,[le?.coinDecimals,le?.coinDenom,J]),xe=(0,g.useMemo)(()=>F?`${F} ${le?.coinDenom??""}`:null,[le?.coinDenom,F]);return g.createElement(ge.Z,{isOpen:$,onClose:Me,closeOnBackdropClick:!1,title:"Adjust for Transaction Fees",containerClassName:"!bg-white-100 dark:!bg-gray-950 !max-h-[600px]",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},g.createElement("p",{className:"text-gray-200 font-medium mb-6"},"You seem to have insufficient ",le?.coinDenom??""," balance to pay transaction fees."),g.createElement("div",{className:"rounded-2xl p-4 dark:bg-gray-900 bg-gray-50 mb-6"},g.createElement("p",{className:"text-sm text-white-100 font-bold mb-4"},"Should we auto-adjust the amount?"),g.createElement("div",{className:"flex items-center rounded-xl p-4 dark:bg-gray-850 bg-gray-100 gap-4"},g.createElement("div",{className:"flex-1 text-right text-sm text-white-100 font-bold"},ae),g.createElement("div",{className:"material-icons-round text-gray-400 !text-lg"},"east"),g.createElement("div",{className:"flex-1 text-sm text-green-500 font-bold"},xe))),g.createElement("div",{className:"flex items-center gap-6"},g.createElement(j.Buttons.Generic,{color:Pe===j.ThemeName.DARK?G.w.gray900:G.w.gray300,size:"normal",className:"w-full",title:"Don't adjust",onClick:Me},"Cancel"),g.createElement(j.Buttons.Generic,{color:G.w.green600,size:"normal",className:"w-full",title:"Proceed",onClick:De},"Proceed")))},oe=({amount:$,setAmount:J,selectedToken:e,fee:he,setShowReviewSheet:de,closeAdjustmentSheet:le,forceChain:Te,forceNetwork:Me})=>{const Pe=(0,n.QSC)(Te),F=(0,n.ZYP)(Te,Me),De=(0,W.s0)(),ae=(0,n.X82)(),xe=(0,g.useMemo)(()=>{if(Pe.beta)return Object.values(Pe.nativeDenoms)[0];const et=(0,n.QBt)(e.coinMinimalDenom,e.chain??"");return ae[et]},[Pe.beta,Pe.nativeDenoms,ae,e.chain,e.coinMinimalDenom]),me=(0,g.useCallback)(()=>{le(),de(!0)},[le,de]),Ye=(0,g.useCallback)(()=>{le(),De("/home")},[le,De]),Le=(0,g.useMemo)(()=>(0,M.hI1)(e?.amount??"0",xe?.coinDecimals??6),[xe?.coinDecimals,e?.amount]),$e=(0,g.useMemo)(()=>(0,M.hI1)($,xe?.coinDecimals??6),[$,xe?.coinDecimals]),Ve=(0,g.useMemo)(()=>F({feeAmount:he.amount,feeDenom:he.denom,tokenAmount:$e,tokenDenom:e.coinMinimalDenom,tokenBalance:Le}),[he.amount,he.denom,e.coinMinimalDenom,F,$e,Le]);return(0,g.useEffect)(()=>{Ve===n.S2X.NONE&&me()},[Ve,me]),g.createElement(g.Fragment,null,g.createElement(Se,{isOpen:Ve===n.S2X.OPTIONAL,nativeDenom:xe,tokenAmount:$e,feeAmount:he.amount,setAmount:J,onBack:le,onAdjust:me,onCancel:me}),g.createElement(ne,{isOpen:Ve===n.S2X.COMPULSORY,nativeDenom:xe,tokenAmount:$e,tokenBalance:Le,feeAmount:he.amount,setAmount:J,onAdjust:me,onCancel:Ye}))}},722031:(Ke,be,a)=>{"use strict";a.d(be,{Z:()=>ge});var n=a(294184),M=a.n(n),j=a(202784);const ge=({options:g,selectedOption:W,onChange:G,className:Se,themeColor:ne})=>j.createElement("fieldset",{className:M()("flex flex-col",Se)},g.map(oe=>{const $=W===oe.value;return j.createElement("label",{key:oe.value,className:`inline-flex items-center last-of-type:border-0 border-b dark:border-b-gray-800 border-b-gray-300 ${oe.subTitle?"py-2 last-of-type:pb-0":"py-3 last-of-type:pb-0"}`},j.createElement("input",{type:"radio",value:oe.value,checked:$,readOnly:!0,className:"hidden"}),j.createElement("div",{"aria-label":"radio-button",className:M()("w-5 h-5 rounded-full border-[2px] flex items-center justify-center cursor-pointer border-gray-300 transition-all",{"shadow-sm":$}),style:{borderColor:$?ne:void 0},tabIndex:0,onClick:()=>G(oe.value),onKeyDown:J=>{(J.key==="Enter"||J.key===" ")&&!$&&G(oe.value)}},j.createElement("div",{className:"w-[10px] h-[10px] rounded-full bg-gray-300 transition-all",style:{backgroundColor:$?ne:void 0,opacity:$?1:0}})),j.createElement("div",{className:"flex flex-col ml-3"},j.createElement("p",{className:"dark:text-white-100 text-gray-900 font-medium"},oe.title),oe.subTitle?j.createElement("p",{className:"text-gray-500 text-xs"},oe.subTitle):null))}))},675335:(Ke,be,a)=>{"use strict";a.d(be,{u:()=>n});var n=(M=>(M.signResponse="sign-response",M.signingPopupOpen="signing-popup-open",M.signTransaction="sign-transaction",M.signSeiEvmResponse="sign-sei-evm-response",M))(n||{})},367738:(Ke,be,a)=>{"use strict";a.d(be,{_d:()=>le,qe:()=>Me});var n=a(964266),M=a(564510),j=a(395362),Ne=a(389320),ge=a(675335),g=a(164012),W=a(336023),G=a.n(W),Se=a(789405),ne=a(105959),oe=a(472565),$=a.n(oe),J=a(348834).Buffer;const e=400,he=600;$().tabs.onRemoved.addListener(()=>{});async function de(){const N=await $().storage.local.get([g.Pw]);if(N[g.Pw])return JSON.parse(N[g.Pw])}const le=async()=>{const N=await de()??{};return Object.assign(M.NOo,Object.keys(N).reduce((O,b)=>(O[N[b].chainId]=b,O),{}),{"elgafar-1":"stargaze"})},Te=async N=>{const O=await(0,n.eli)(),b=Object.values(O).filter(Ee=>Ee.enabled).map(Ee=>Ee.chainId),R=Object.values(O).filter(Ee=>Ee.enabled).map(Ee=>Ee.testnetChainId),T=await de()??{},ue=Object.values(T).filter(Ee=>Ee.enabled).map(Ee=>Ee.chainId),Ae=[...b,...R,...ue];return N.reduce((Ee,Ie)=>(Ee[Ie]=Ae.indexOf(Ie)!==-1,Ee),{})};async function Me(N,O,b,R){const T=b.origin===Ne.x3||b.origin===Ne.s3;let ue=!R;R&&N.forEach(Ie=>{(O?.[R]?.[Ie]||[]).includes(b?.origin)||(ue=!0)});const Ae=await Te(N),Ee=Object.keys(Ae).filter(Ie=>!!Ae[Ie]);return Ee.length&&T&&(ue=!1,await(0,Se.E)(N,[R],b.origin)),{validChainIds:Ee,isNewChainPresent:ue}}const Pe=async()=>{const{connections:N={}}=await browser.storage.local.get(CONNECTIONS);return N},F=async()=>{const{"active-wallet":N={}}=await browser.storage.local.get([ACTIVE_WALLET]);return N},De=async()=>(await browser.storage.local.get([ACTIVE_WALLET_ID]))[ACTIVE_WALLET_ID];async function ae(N,O){const[b,R]=await Promise.all([De(),Pe()]);return await Me(N,R,O,b)}const xe={},me={};async function Ye(){return xe.length===0?void 0:[await browser.windows.get(xe[0],{populate:!0})]}function Le(N){return N?N.find(O=>O.id?O.type==="popup"&&Object.values(xe).includes(O.id):!1):void 0}async function $e(N,O){let b="index.html#/";N!=="login"&&(b=b+N),O&&(b=b+O);const R={width:e,height:he,type:"popup",left:0,top:0,url:b};if(xe[b]||me[b])try{let T=xe[b];if(!T){const Ae=await me[b];Ae.id&&(T=Ae.id)}const ue=await browser.windows.get(T,{populate:!0});if(ue.tabs?.length){const[Ae]=ue.tabs;if(Ae?.id)await browser.tabs.update(Ae.id,{active:!0,url:b});else throw new Error("No tabs")}else throw new Error("No tabs")}catch(T){try{if(T.message.includes("No tab with id")){const ue=browser.windows.create(R);me[b]=ue;const Ae=await ue;Ae.id&&(xe[b]=Ae.id)}}finally{delete me[b]}}else try{const T=browser.windows.create(R);me[b]=T;const ue=await T;return ue.id&&(xe[b]=ue.id),ue}finally{delete me[b]}}$().windows.onRemoved.addListener(N=>{Object.entries(xe).forEach(([b,R])=>{R===N&&delete xe[b]})});async function Ve(N){const[O,b]=await Promise.all([F(),Pe()]);return!!(b?.[O.id]?.[N?.chainId]||[]).includes(N.origin)}async function et(N){const[O,b]=await Promise.all([F(),Pe()]);let R=b[O.id]?.[N?.chainId]||[];return R.includes(N.origin)?(R=R.filter(T=>T!==N.origin),b[O.id][N.chainId]=R,await browser.storage.local.set({[CONNECTIONS]:b}),!0):!1}async function wt(){const N=await getChains();try{const b=(await browser.storage.local.get([BETA_CHAINS]))[BETA_CHAINS];return{...N,...JSON.parse(b??"{}")}}catch{return N}}async function nt(N){const{"active-wallet":O}=await browser.storage.local.get([ACTIVE_WALLET]);let R=(await le())[N];return R=R==="cosmoshub"?"cosmos":R,O.addresses[R]}async function Ct(N){const O=await F(),b=`seed-phrase/${O.id}`,T=(await chrome.storage.local.get([b]))[b];if(T){const q=J.from(T,"hex");if(q.length===32)return q}const ue=await nt("secret-4"),Ae=getStorageAdapter();initStorage(Ae);const Ee=await KeyChain.getSigner(O.id,N,{addressPrefix:"secret",coinType:"529"}),Ie=CryptoJs.SHA256(await Ee.signAmino(ue,J.from(JSON.stringify({account_number:0,chain_id:"secret-4",fee:[],memo:"Create leap Secret encryption key. Only approve requests by Leap.",msgs:[],sequence:0}))));return await chrome.storage.local.set({[`seed-phrase/${O.id}`]:Ie.toString()}),J.from(Ie.toString())}function ke(N){const O=new RegExp(/^(http|https):\/\/[^ "]+$/),b=new RegExp(/^\d+$/);if(!O.test(N.rpc))throw new Error("Invalid RPC URL");if(!O.test(N.rest))throw new Error("Invalid REST URL");if(!b.test(N.bip44.coinType))throw new Error("Invalid bip44 coin type");if(N.feeCurrencies?.length<1)throw new Error("Invalid fee currencies")}function ze(N){const O=(b,R)=>{if(R.id!==browser.runtime.id)throw new Error("Invalid sender");b.type==="approval-popup-open"&&(browser.runtime.sendMessage({type:"enable-access",payload:N}),browser.runtime.onMessage.removeListener(O))};browser.runtime.onMessage.addListener(O)}async function Nt(N){return new Promise((O,b)=>{const R=T=>{T.type===N&&(T.payload.status==="success"?O("success"):b("failed"),browser.runtime.onMessage.removeListener(R))};browser.runtime.onMessage.addListener(R)})}async function ct(N){return new Promise((O,b)=>{const R=async(T,ue)=>{ue.id!==browser.runtime.id&&b("Invalid sender"),T.type==="chain-enabled"&&T.payload.payloadId===N?O({status:"success",payloadId:T.payload.payloadId}):T.type==="chain-approval-rejected"&&T.payload.payloadId===N?(b({status:"rejected",payloadId:T.payload.payloadId}),browser.runtime.onMessage.removeListener(R)):T.type==="popup-closed"?(O("popup-closed"),browser.runtime.onMessage.removeListener(R)):T.type==="user-logged-in"&&T.status!=="success"&&(b("failed"),browser.runtime.onMessage.removeListener(R))};browser.runtime.onMessage.addListener(R)})}function St(N){const O=(b,R)=>{if(R.id!==browser.runtime.id)throw new Error("Invalid Sender");b.type===MessageTypes.signingPopupOpen&&(browser.runtime.sendMessage({type:MessageTypes.signTransaction,payload:N}),browser.runtime.onMessage.removeListener(O))};browser.runtime.onMessage.addListener(O)}async function dt(N){return new Promise((O,b)=>{const R=T=>{T.type===N&&(T.payload.status==="success"?O(T.payload.data):b(T.payload.data),browser.runtime.onMessage.removeListener(R))};browser.runtime.onMessage.addListener(R)})}},19451:(Ke,be,a)=>{"use strict";a.d(be,{A:()=>Ne,L:()=>ge});var n=a(99930),M=a(735255),j=a(202784);const Ne=(g,W)=>{const[G,Se]=(0,j.useState)({}),[ne,oe]=(0,j.useState)(!1),{debounce:$}=(0,M.S)(),J=(0,j.useCallback)(async he=>{try{oe(!0),n.i_.setNetwork(W);const de={allowedTopLevelDomains:n.L},le=await n.i_.resolveAll(he,de);Se(le)}catch{}finally{oe(!1)}},[W]),e=$(J,200);return(0,j.useEffect)(()=>{g&&e(g)},[g]),[ne,G]},ge={ibcDomains:"IBC Domains",icns:"Interchain Name Service",stargazeNames:"Stargaze Names",archIds:"Arch ID",spaceIds:"Space ID",sns:"SNS"}},220338:(Ke,be,a)=>{"use strict";a.d(be,{Z:()=>ge,g:()=>Ne});var n=a(571659),M=a(202784),j=a(8025);const Ne=()=>{const[g,W]=(0,M.useState)({}),[G,Se]=(0,M.useState)(!0);return(0,M.useEffect)(()=>{let ne=!1;return j.o.subscribe(W),(async()=>{const $=await j.o.getAllEntries();if(ne)return;const J=Object.entries($).filter(([,e])=>e.blockchain!=="injective"||e.blockchain==="injective"&&e.ethAddress==="").reduce((e,[he,de])=>(e[he]=de,e),{});W(J),Se(!1)})(),()=>{j.o.unsubscribe(W),ne=!0}},[]),{contacts:g,loading:G}},ge=g=>{const{contacts:W,loading:G}=Ne();return(0,M.useMemo)(()=>{if(G)return[];const ne=Object.values(W),oe=g?.trim().toLowerCase()??"";return oe.length===0?ne:new n.default(ne,{threshold:.3,keys:["name","address","ethAddress"]}).search(oe).map($=>$.item)},[W,G,g])}},489062:(Ke,be,a)=>{"use strict";a.d(be,{X:()=>g});var n=a(964266),M=a(726089),j=a(202784);const Ne="was submitted but was not yet found on the chain. You might want to check later. There was a wait of 60 seconds.",ge="Reward is too low";function g(W){const{rpcUrl:G}=(0,n.U9i)();(0,j.useEffect)(()=>{if(W){if(W.includes(Ne)||W.includes(ge)||W.includes("You don't have enough"))return;M.Tb(`${W} - node: ${G}`)}},[W,G])}},574358:(Ke,be,a)=>{"use strict";a.d(be,{E:()=>W});var n=a(964266),M=a(395362),j=a(840575),Ne=a(202784),ge=a(444318),g=a.n(ge);function W(){const G=(0,n.rTu)(),Se=(0,j.iJ)();return(0,Ne.useCallback)(async()=>{const ne=(0,M.pe)(G?.cipher,Se);return await new ge.Wallet(ne,{hdAccountIndex:G?.addressIndex})},[Se,G])}},776548:(Ke,be,a)=>{"use strict";a.r(be),a.d(be,{default:()=>ka});var n=a(964266),M=a(339279),j=a(892742),Ne=a(910416),ge=a(389320),g=a(64125),W=a(532833),G=a(830911),Se=a(634680),ne=a(372149),oe=a(656687),$=a(702860),J=a(681),e=a(202784),he=a(410289),de=a(198652);const le=e.memo(function({chain:s,setAggregatedSpendableTokens:i}){return(0,n.X2z)(s,i),e.createElement(e.Fragment,null)});le.displayName="FetchSpendableChainBalance";const Te=e.memo(function(){const{setAggregatedSpendableTokens:s}=(0,n.NKk)();return e.createElement(de.ox,{setAggregatedStore:s,render:({key:i,chain:c,setAggregatedStore:t})=>e.createElement(le,{key:i,chain:c,setAggregatedSpendableTokens:t})})});Te.displayName="AggregatedSpendableNullComponents";const Me=e.memo(function({setAllAssets:s,setIsAllAssetsLoading:i}){const{spendableAllAssets:c,spendableIsLoading:t}=(0,n.Mkf)();return(0,e.useEffect)(()=>{s(c),i(t)},[c,t]),null});Me.displayName="LoadAggregateAssets";function Pe({setAllAssets:s,setIsAllAssetsLoading:i}){const{allAssets:c,nativeTokensStatus:t,s3IbcTokensStatus:m}=(0,n.zSw)();return(0,e.useEffect)(()=>{s(c),i([t,m].some(f=>f==="loading"))},[c,t,m]),null}var F=a(564510),De=a(206391),ae=a.n(De),xe=a(294184),me=a.n(xe),Ye=a(608740),Le=a(244876),$e=a(574358),Ve=a(953718),et=a(998073);const wt=Le.w.useGetWallet,nt=(0,e.createContext)(null),Ct=({children:s})=>{const{tokenFiatValue:i,feeTokenFiatValue:c,confirmSend:t,confirmSendEth:m,selectedToken:f,setCustomIbcChannelId:r,sendActiveChain:u,...h}=(0,n.TH7)(),o=(0,et._)(),d=wt(u),E=(0,n.SFn)(),I=(0,$e.E)(),[l,p]=(0,e.useState)(null),[L,w]=(0,e.useState)(!1),[y,C]=(0,e.useState)(!0),[S,k]=(0,e.useState)(""),x=(0,e.useCallback)(async D=>{await t({...D,getWallet:()=>(0,F.cSx)(f?.coinMinimalDenom??"","secret")?I():d()},o)},[t,I,d,f?.coinMinimalDenom,o]),U=(0,e.useCallback)(async(D,ee,se,Y,te,K)=>{m(D,ee,se,Y,o,te,K)},[m,o]);(0,e.useEffect)(()=>{w(!1),r(void 0)},[f,h?.selectedAddress]);const B=(0,e.useMemo)(()=>{const D=(0,F.z_q)(E),{selectedAddress:ee}=h,se=(0,F.z_q)(ee?ee.address??"":"");return{ethAddress:S,setEthAddress:k,tokenFiatValue:i??"",feeTokenFiatValue:c??"",selectedToken:f,confirmSend:x,confirmSendEth:U,sameChain:D===se,transferData:l,setTransferData:p,isIbcUnwindingDisabled:L,setIsIbcUnwindingDisabled:w,setCustomIbcChannelId:r,pfmEnabled:y,setPfmEnabled:C,sendActiveChain:u,...h}},[E,h,S,i,c,f,x,U,l,L,w,r,y,C,u]);return e.createElement(nt.Provider,{value:B},s)},ke=()=>{const s=(0,e.useContext)(nt);return(0,Ve.h)(s!==null,"useSendContext must be used within SendContextProvider"),s};var ze=a(240483),Nt=a(30447),ct=a(637299),St=a(676709);const dt=e.memo(({assets:s,selectedToken:i,isOpen:c,onClose:t,onTokenSelect:m})=>{const f=(0,n.X82)(),[r,u]=(0,e.useState)(""),h=(0,n.AeS)(),{sendActiveChain:o}=ke(),d=(0,he.TH)().state,E=(0,n.QSC)(o),I=(0,e.useMemo)(()=>({...f,...h}),[]);let l=(0,$.Z)().get("assetCoinDenom")??void 0;l=(0,e.useMemo)(()=>{if(d&&d.coinMinimalDenom){const y=d;return y.ibcDenom||y.coinMinimalDenom}return l},[l,d]);const p=(0,e.useMemo)(()=>s.filter(y=>String(y.amount)!=="0"&&(I[y.coinMinimalDenom]??Object.values(E.nativeDenoms).find(C=>C.coinMinimalDenom===y.coinMinimalDenom))),[E.nativeDenoms,s,I]),L=(0,e.useMemo)(()=>p.filter(y=>y.symbol.toLowerCase().includes(r.trim().toLowerCase())),[p,r]),w=y=>{m(y),t()};return e.createElement(ze.Z,{title:"Select Token",isOpen:c,closeOnBackdropClick:!0,onClose:t,contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},e.createElement("div",{className:"flex flex-col items-center h-full"},e.createElement(ct.M,{value:r,onChange:y=>u(y.target.value),onClear:()=>u(""),placeholder:"Search tokens...",divClassName:"rounded-2xl w-full flex gap-[10px] bg-gray-50 dark:bg-gray-900 py-3 pr-3 pl-4 focus-within:border-green-600 border border-transparent",inputClassName:"flex flex-grow text-base outline-none bg-white-0 font-bold text-black-100 dark:text-white-100 text-md placeholder:font-medium dark:placeholder:text-gray-400 !leading-[21px]"}),e.createElement("div",{className:"bg-white-100 dark:bg-gray-950 rounded-2xl min-h-[200px] max-h-[360px] w-full mt-4",style:{overflowY:"scroll"}},L.length>0?L.map((y,C)=>{const S=C===L.length-1;let k=i?.coinMinimalDenom===y.coinMinimalDenom;return(i?.ibcDenom||y.ibcDenom)&&(k=i?.ibcDenom===y.ibcDenom),(i?.isEvm||y?.isEvm)&&(k=k&&i?.isEvm===y?.isEvm),e.createElement(e.Fragment,{key:`${y.coinMinimalDenom}-${C}`},e.createElement(St.H,{onTokenSelect:w,token:y,hideAmount:y.amount==="0",isSelected:k,selectedChain:void 0,showRedirection:!1}),!S&&e.createElement("div",{className:"border-b w-full border-gray-100 dark:border-gray-850"}))}):e.createElement(Nt.Z,{searchQuery:r}))))});dt.displayName="SelectTokenSheet";var N=a(428217),O=a(903049),b=a(905865),R=a(14080),T=a(610675),ue=a(861111);function Ae({isInputInUSDC:s,setIsInputInUSDC:i,value:c,token:t,loadingAssets:m,balanceStatus:f,onChange:r,onTokenSelectSheet:u,amountError:h,sendActiveChain:o,selectedChain:d}){const[E]=(0,N.nB)(),{formatHideBalance:I}=(0,O.Zh)(),l=(0,n.DI5)(),p=(0,e.useRef)(null),[L,w]=(0,e.useState)(!1),y=(0,b.a)(),[C,S]=(0,e.useState)(c?.toString()),{pfmEnabled:k,isIbcUnwindingDisabled:x,allGasOptions:U,gasOption:B}=ke(),D=(0,e.useMemo)(()=>{if(t&&t.usdPrice&&t.usdPrice!=="0")return t.usdPrice},[t]);(0,e.useEffect)(()=>{!D&&s&&i(!1)},[D,s]);const{formattedDollarAmount:ee}=(0,e.useMemo)(()=>{let A="0";return c===""||c&&isNaN(parseFloat(c))?{formattedDollarAmount:""}:(t&&t.usdPrice&&c&&(A=String(parseFloat(t.usdPrice)*parseFloat(c))),{formattedDollarAmount:I(E(new(ae())(A)))})},[E,t,c]),se=(0,e.useMemo)(()=>I((0,n.LHZ)(c??"0",(0,n.MDB)(t?.symbol??"",4,4),3,"en-US")),[c,t?.symbol]),Y=(0,e.useMemo)(()=>I((0,n.LHZ)(t?.amount??"0",(0,n.MDB)(t?.symbol??"",4,4),3,"en-US")),[t?.amount,t?.symbol]),te=(0,e.useMemo)(()=>t?.amount===c,[t?.amount,c]),K=(0,e.useMemo)(()=>t?.amount&&t?.amount!=="0"&&!te,[te,t?.amount]),_=(0,e.useMemo)(()=>!D||new(ae())(D??0).isLessThan(10**-6),[D]);(0,e.useEffect)(()=>{p.current&&p.current.focus()},[]),(0,e.useEffect)(()=>{if(r)if(s&&D){if(!C.trim()){r("");return}const ve=new(ae())(C).dividedBy(D);r(isNaN(parseFloat(ve.toString()))?"":ve?.toFixed(6))}else r(isNaN(parseFloat(C))?"":C)},[C,s,D]);const Q=()=>{if(s){if(!D)throw"USD price is not available";const A=new(ae())(t?.amount??"0").multipliedBy(D);S(A.toString())}else{const A=!!l[o].nativeDenoms[t?.coinMinimalDenom??""],ve=t?.coinDecimals||6;if(!U||!B)return;if(A){const we=parseFloat(U[B]);new(ae())(t?.amount??0).isGreaterThan(new(ae())(we))?S(new(ae())(t?.amount??0).minus(new(ae())(we)).toFixed(ve,ae().ROUND_DOWN)):S(new(ae())(t?.amount??0).toFixed(ve,ae().ROUND_DOWN))}else S(new(ae())(t?.amount??0).toFixed(ve,ae().ROUND_DOWN))}},z=(0,e.useCallback)(()=>{if(!D)throw"USD price is not available";if(s){i(!1);const A=new(ae())(C).dividedBy(D);S(A.toString())}else{i(!0);const A=new(ae())(C).multipliedBy(D);S(A.toString())}},[s,D,C]);return e.createElement("div",{className:"w-full bg-white-100 dark:bg-gray-950 rounded-2xl p-4 flex flex-col gap-3",key:Y},e.createElement("div",{className:"flex rounded-2xl justify-between w-full items-center bg-gray-50 dark:bg-gray-900 gap-2 pl-4 h-[48px] p-[2px] border",style:h?{borderColor:T.w.red300}:!k&&!x?{borderColor:"#FFC770"}:L?{borderColor:T.w.green600}:{borderColor:"transparent"}},m?e.createElement(R.Z,{width:71,height:24,containerClassName:"block !leading-none overflow-hidden rounded-lg"}):e.createElement(e.Fragment,null,e.createElement("div",{className:"flex gap-1 w-full"},s&&e.createElement("span",{className:"dark:text-white-100 font-bold text-md"},"$"),e.createElement("input",{type:"number",className:"bg-transparent outline-none w-full text-left dark:text-white-100 placeholder:font-bold placeholder:text-md placeholder:text-gray-600 dark:placeholder:text-gray-400 font-bold text-md",placeholder:"0",value:s?C:c,ref:p,onFocus:()=>w(!0),onBlur:()=>w(!1),onChange:A=>S(A.target.value)})),e.createElement("button",{className:"flex justify-end items-center gap-2 shrink-0 py-2 pr-2",onClick:u},e.createElement("div",{className:"relative"},e.createElement("img",{src:t?.img??y,className:"w-[24px] h-[24px] rounded-full",onError:(0,ue._)(y)}),d?e.createElement("img",{src:l[d]?.chainSymbolImageUrl??y,className:"w-[14px] h-[14px] rounded-full absolute bottom-[-2px] right-[-2px]",onError:(0,ue._)(y)}):null),e.createElement("p",{className:me()("dark:text-white-100 text-sm font-bold",{"flex flex-col justify-between items-start text-xs border-r border-gray-800 pl-1 pr-2":!!d})},t?.symbol?(0,n.MDB)(t?.symbol??"",4,4):"Select Token",d?e.createElement("span",{className:"text-gray-400 font-medium mt[-4px]"},l[d]?.chainName??"Unknown"):null),e.createElement("p",{className:"!text-lg material-icons-round dark:text-white-100 flex items-center"},"expand_more")))),e.createElement("div",{className:"flex flex-row items-center justify-between text-gray-200 text-xs font-medium w-full h-[24px]"},e.createElement("div",{className:"flex items-center gap-1"},c!==""&&e.createElement("span",{className:"text-gray-800 dark:text-gray-200 font-normal text-xs"},s?se:ee),e.createElement("button",{disabled:_,onClick:z,className:me()("rounded-full h-6 bg-gray-50 dark:bg-gray-900 items-center flex gap-1 justify-center",{"opacity-50 pointer-events-none":_,"w-6":c!=="","px-[10px]":c===""})},c===""&&e.createElement("span",{className:"text-gray-800 dark:text-gray-200 font-normal text-xs"},"Switch to ",s?"Token":"USD"),e.createElement("span",{className:"text-black-100 dark:text-white-100 material-icons-round !text-xs !leading-[12px]"},"swap_vert"))),e.createElement("div",{className:"flex justify-end items-center gap-2"},e.createElement("span",{className:me()({"text-red-400 dark:text-red-300":(h||"").includes("Insufficient balance"),"text-gray-600 dark:text-gray-400":!h})},"Bal:"," ",!f||f==="success"?Y:e.createElement(R.Z,{width:50})),K&&e.createElement("button",{onClick:Q,className:"rounded-full bg-[#29A87433] py-1 px-[10px] font-medium text-xs text-green-600"},"Max"))))}const Ee=e.memo(({allAssets:s,isAllAssetsLoading:i})=>{const c=(0,e.useRef)(null),t=(0,he.TH)().state,m=(0,Se.a7)(),f=(0,ne.p)(),[r,u]=(0,e.useState)(!1),[h,o]=(0,e.useState)(""),[d,E]=(0,e.useState)(!1),I=Le.w.useGetWallet(),{addressLinkState:l}=(0,n.uaF)(I),{data:p,status:L}=(0,n.uUy)(),{snip20Tokens:w}=(0,n.r4i)(),y=(0,n.wMW)(),C=(0,$.Z)().get("assetCoinDenom")??void 0,{inputAmount:S,setInputAmount:k,selectedToken:x,setSelectedToken:U,sendActiveChain:B,selectedChain:D,setSelectedChain:ee,setAmountError:se,amountError:Y,userPreferredGasPrice:te,userPreferredGasLimit:K,gasEstimate:_,selectedAddress:Q,fee:z,feeDenom:A,sameChain:ve,setFeeDenom:we,addressWarning:ye,setGasError:pe,associatedSeiAddress:re}=ke(),ie=(0,n.cJs)(),Ce=(0,n.uVs)(B),Ge=(0,n._ty)();function X(P,H){return(Math.floor(P*Math.pow(10,H))/Math.pow(10,H)).toFixed(H)}(0,e.useEffect)(()=>{const P=h.split(".")?.[1]?.length,H=x?.coinDecimals??6;P>H?k(X(Number(h),H)):k(h)},[h,x?.coinDecimals]);const Fe=(0,e.useMemo)(()=>Q&&(0,F.cSx)(Q.address??"","secret"),[Q]),V=(0,e.useMemo)(()=>{let P=s;return w&&Fe&&(P=[...P,...w]),["done","unknown"].includes(l)||(P=[...P,...p?.seiEvmBalance??[]].filter(H=>new De.BigNumber(H.amount).gt(0))),m===ge.HW?P.sort((H,Oe)=>Number(Oe.usdValue)-Number(H.usdValue)):P},[l,s,Fe,p?.seiEvmBalance,w]),fe=(0,e.useMemo)(()=>{let P=i===!1;return["done","unknown"].includes(l)||(P=P&&L==="success"),P},[l,i,L]),Z=(0,e.useCallback)(P=>{if(U(P),m===ge.HW?ee(P?.tokenBalanceOnChain):ee(null),P&&P?.isEvm&&we({coinMinimalDenom:P.coinMinimalDenom,coinDecimals:P.coinDecimals??6,coinDenom:P.symbol,icon:P.img,coinGeckoId:P.coinGeckoId??"",chain:P.chain??""}),P&&m===ge.HW){const H=Object.values(f[P.tokenBalanceOnChain]?.nativeDenoms)?.[0]||P;we({coinMinimalDenom:H.coinMinimalDenom,coinDecimals:H.coinDecimals??6,coinDenom:H.coinDenom||P.symbol,icon:H.icon||P.img,coinGeckoId:H.coinGeckoId??"",chain:H.chain??""})}},[we,U,m]);return(0,e.useEffect)(()=>{if(!x&&!C&&fe){if(t&&t.coinMinimalDenom)Z(t);else if(V.length>0){const H=V.filter(Oe=>new De.BigNumber(Oe.amount).gt(0))[0];Z(H)}}},[V,t,fe,x,Z,C]),(0,e.useEffect)(()=>{if(l==="done"&&x&&x?.isEvm){const H=V.filter(Oe=>new De.BigNumber(Oe.amount).gt(0))[0];Z(H)}},[l,V,x,Z]),(0,e.useEffect)(()=>{if(C){const P=V.find(H=>H.ibcDenom===C||H.coinMinimalDenom===C)||null;Z(P)}},[C,m,V,Z]),(0,e.useEffect)(()=>{if(ye.type==="link"){k("0.0001");return}},[ye]),(0,e.useEffect)(()=>{se((()=>{if(Ce&&x&&Q?.address?.toLowerCase()?.startsWith("0x")&&!ie(x)&&x.coinMinimalDenom!=="usei"){if(re)return"";if(!re)return"You can only send this token to a SEI address and not an EVM address."}if(Q?.address&&!ve&&x&&y(x))return"IBC transfers are not supported for cw20 tokens.";if(S==="")return"";if(isNaN(Number(S)))return"Please enter a valid amount";if(new De.BigNumber(S).lt(0))return"Please enter a positive amount";if(new De.BigNumber(S).gt(new De.BigNumber(x?.amount??"")))return"Insufficient balance";const H=V.find(Be=>x?.isEvm&&Be?.isEvm?Be.coinMinimalDenom===A?.coinMinimalDenom:Be.ibcDenom===A.coinMinimalDenom||Be.coinMinimalDenom===A.coinMinimalDenom);if(!z||!te||!H)return"";const{amount:Oe}=(0,Ye.X$)({gasPrice:te.amount.toFloatApproximation(),gasLimit:K??_,feeDenom:A,gasAdjustment:Ge});if(Oe.gt(H.amount))return"Insufficient funds for fees."})())},[V,z?.amount,A?.coinMinimalDenom,S,x,Q,Ge,Ce,re]),e.createElement(g.E.div,{className:me()({"opacity-50 pointer-events-none":ye.type==="link"}),style:{overflow:"hidden"}},e.createElement(Ae,{isInputInUSDC:d,setIsInputInUSDC:E,value:h,token:x,loadingAssets:!fe,balanceStatus:i,onChange:P=>o(P),onTokenSelectSheet:()=>u(!0),amountError:Y,sendActiveChain:B,selectedChain:D}),e.createElement(dt,{isOpen:r,assets:V,selectedToken:x,onClose:()=>{u(!1)},onTokenSelect:P=>{Z(P),pe(""),o(""),c.current?.focus()}}))});Ee.displayName="AmountCard";var Ie=a(465062),q=a(94608),mt=a(625890),Wt=a(593723),kt=a(65214),Xe=a(128844),Rt=a(722031);const Ut=({targetChain:s,onAddComplete:i})=>{const[c,t]=(0,e.useState)(""),[m,f]=(0,e.useState)("idle"),[r,u]=(0,e.useState)(""),{sendActiveChain:h}=ke(),o=(0,n.jaG)({targetChain:s}),{chains:d}=(0,n._IL)(),E=d[h],I=(0,e.useCallback)(async l=>{f("loading");try{const p=await o(l);p.success?(i(p.channel),t(""),f("success"),u(p.message)):(f("error"),u(p.message))}catch{f("error"),u("Something went wrong")}},[o,i]);return e.createElement(e.Fragment,null,e.createElement("input",{type:"number",value:c,placeholder:"Source channel ID",className:"w-full h-12 rounded-2xl px-4 py-1 font-medium placeholder:text-gray-600 dark:placeholder:text-gray-400 placeholder:text-left text-right text-black-100 dark:text-white-100 outline-none border border-[transparent] focus-within:border-green-600 bg-gray-50 dark:bg-gray-900",onChange:l=>{t(l.target.value),m==="error"&&(f("idle"),u(""))},onKeyUp:()=>I(c)}),e.createElement("p",{className:"text-xs mt-2 dark:text-gray-400 text-gray-600"},"You can enter ",e.createElement("span",{className:"font-medium dark:text-gray-200 text-gray-800"},"24")," for"," ",e.createElement("span",{className:"font-medium dark:text-gray-200 text-gray-800"},"channel-24")," on"," ",E.chainName),m==="error"?e.createElement("p",{className:"text-xs mt-2 text-red-300 font-medium"},r):null,m==="success"?e.createElement("p",{className:"text-xs mt-2 text-green-300 font-medium"},r):null)},Ft=({targetChain:s,sourceChain:i})=>{const[c,t]=(0,e.useState)(!1),[m,f]=(0,e.useState)(null),[r,u]=(0,e.useState)(!1),[h,o]=(0,e.useState)(!1),[d,E]=(0,e.useState)(),{chains:I}=(0,n._IL)(),l=I[i],p=I[s],L=(0,n.zkP)(),{data:w,status:y}=(0,n.Zob)(i,s),{transferData:C,setIsIbcUnwindingDisabled:S,customIbcChannelId:k,setCustomIbcChannelId:x}=ke(),U=(0,e.useMemo)(()=>C?.isSkipTransfer&&C?.routeResponse?{...C?.routeResponse,messages:C?.messages}:{operations:[],messages:[],sourceAsset:{denom:null}},[C?.isSkipTransfer,C?.messages,C?.routeResponse]),{groupedTransactions:B}=(0,Ie.nC)(U),D=[];Object.values(B)?.forEach((z,A)=>{z.forEach((ve,we)=>{A==0&&we==0&&D.push(ve.sourceChain),D.push(ve.destinationChain)})}),(0,e.useEffect)(()=>{y==="success"?f(w):y==="error"&&f(void 0)},[w,y]);const ee=(0,e.useCallback)(()=>{t(z=>!z)},[t]),se=(0,e.useCallback)(z=>{E(z===d&&d!==void 0?void 0:z)},[d,E]),Y=(0,e.useMemo)(()=>L.filter(({counterPartyChain:z})=>z===s).map(({channelId:z})=>({title:z,subTitle:"Custom channel",value:z})).sort((z,A)=>z.title.localeCompare(A.title)),[L,s]),te=(0,e.useMemo)(()=>m?[{title:m,subTitle:"Prefetched from Cosmos directory registry",value:m},...Y]:Y,[Y,m]),K=te.length>0,_=(0,e.useCallback)(()=>{K&&(o(z=>!z),E(void 0))},[K,o]),Q=()=>{S(!0),t(!1),x(d)};return e.createElement(e.Fragment,null,e.createElement("div",{className:me()("p-4 rounded-2xl bg-red-100 dark:bg-red-900 items-center flex gap-2",{"bg-orange-200 dark:bg-orange-900":k})},e.createElement("span",{className:me()("!text-lg material-icons-round text-red-400 dark:text-red-300 self-start",{"!text-[#FFB33D] !dark:text-orange-300":k})},k?"info":"warning"),e.createElement("div",{className:"flex-1"},e.createElement(q.Z,{size:"xs",className:"font-bold mb-2"},k?"Unverified Channel":"No verified routes available."),e.createElement(q.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium"},k||(K?"You can select channels from an unverified list to transfer.":"You can add a custom channel to transfer."))),e.createElement("button",{title:`${K?"Select":"Add"} channel`,onClick:ee,className:"text-xs font-bold text-black-100 bg-white-100 py-2 px-4 rounded-3xl"},k?"Edit selection":K?"Select channel":"Add channel")),e.createElement(ze.Z,{isOpen:c,onClose:()=>t(!1),title:"Advanced IBC Settings",closeOnBackdropClick:!0,containerClassName:"!max-h-[600px]",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},e.createElement("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-gray-900 justify-center items-center"},e.createElement("div",{className:"flex items-center mb-4 justify-between"},e.createElement("div",{className:"flex gap-2 items-center"},e.createElement(q.Z,{className:"font-bold"},"Select channels"),e.createElement(Wt.Z,{content:e.createElement("p",{className:"text-gray-500 dark:text-gray-100 text-sm"},"ID of the channel that will relay your tokens from ",l.chainName," ","to ",p?.chainName,".")},e.createElement("div",{className:"relative flex"},e.createElement("div",{className:"!text-lg text-gray-600 dark:text-gray-400 material-icons-round"},"help_outline")))),e.createElement("div",{className:"bg-gray-100 dark:bg-gray-850 rounded-3xl px-[10px] py-1 flex gap-1 items-center cursor-pointer",onClick:_},e.createElement("span",{className:"material-icons-round !text-xs text-black-100 dark:text-white-100"},!h&&K?"add_circle":"remove_circle"),e.createElement(q.Z,{size:"xs",className:"font-medium"},"Add Channel"))),e.createElement("div",{className:"bg-gray-100 dark:bg-gray-850 rounded-2xl p-4 gap-4"},!h&&K?e.createElement(e.Fragment,null,e.createElement(q.Z,{size:"sm",className:"text-gray-800 dark:text-gray-200 font-bold capitalize"},l.chainName," to ",p?.chainName," channels"),m===null?e.createElement("div",{className:"flex justify-center items-center my-3"},e.createElement(Xe.T,{color:"white"})):e.createElement(Rt.Z,{themeColor:T.w.green600,options:te,onChange:se,selectedOption:d})):e.createElement(Ut,{targetChain:s,onAddComplete:se}))),e.createElement("div",{className:"p-4 rounded-2xl bg-red-100 dark:bg-red-900 my-4"},e.createElement("div",{className:"items-center flex gap-2"},e.createElement("span",{className:"!text-lg material-icons-round text-red-400 dark:text-red-300 self-start"},"warning"),e.createElement(q.Z,{size:"sm",className:"font-bold mb-2"},"Sending via unverified channel.")),e.createElement("div",{className:"items-start flex gap-2"},e.createElement("div",{className:"ml-[1px]"},e.createElement(kt.X,{checked:r,onClick:()=>u(z=>!z)})),e.createElement(q.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium"},"Usability of tokens sent via unverified channels is not guaranteed. I understand and wish to proceed."))),e.createElement(M.Buttons.Generic,{color:T.w.green600,size:"normal",className:"w-full",title:"Proceed",disabled:!r||!d,onClick:Q},"Proceed")))};function jt(){const[s,i]=(0,e.useState)(null),{amountError:c,addressError:t,pfmEnabled:m,setPfmEnabled:f,transferData:r,isIbcUnwindingDisabled:u,setSelectedAddress:h,selectedAddress:o,selectedToken:d,customIbcChannelId:E,sendActiveChain:I}=ke(),l=(0,n.SFn)(I),{chains:p}=(0,n._IL)(),L=(0,n.tIw)(),w=(0,e.useMemo)(()=>{if(d&&d.usdPrice&&d.usdPrice!=="0")return d.usdPrice},[d]),y=(0,e.useMemo)(()=>!w||new(ae())(w??0).isLessThan(10**-6),[w]),C=(0,ne.p)(),S=(0,mt.ZP)().activeWallet,k=Object.values(C).find(Y=>Y.chainId===s?.chainId)?.key,x=S?.addresses?.[k],U=()=>{h({address:x,name:x?.slice(0,5)+"..."+x?.slice(-5),avatarIcon:s?.icon,emoji:void 0,chainIcon:s?.icon,chainName:s?.addressPrefix,selectionType:"notSaved",information:{autofill:!0}})},{data:B}=(0,Ie.Uj)();(0,e.useEffect)(()=>{if(r?.isSkipTransfer&&r?.routeResponse){const Y=r?.messages?.[1],te=B?.find(K=>K.chainId===Y?.multi_chain_msg?.chain_id);i(te?.addressPrefix==="sei"?{...te,addressPrefix:"seiTestnet2"}:te),f(te?.pfmEnabled!==!1)}else i(null),f(!0);return()=>{f(!0)}},[B,r?.isSkipTransfer,r?.routeResponse,r?.messages]);const D=(c||"").includes("IBC transfers are not supported"),ee=(c||"").includes("You can only send this token to a SEI address");if(D||ee)return e.createElement("div",{className:"p-4 rounded-2xl bg-red-100 dark:bg-red-900 items-center flex gap-2"},e.createElement("span",{className:"!text-lg material-icons-round text-red-400 dark:text-red-300"},"warning"),e.createElement(q.Z,{size:"xs",className:"font-medium"},c));if((t||"").includes("IBC transfers are not supported")||E){const Y=()=>{if(!o?.address)return null;const te=(0,F.z_q)(o.address);if(!te)return null;const K=L[te];return K?p[K]:null};return e.createElement(Ft,{targetChain:Y()?.key,sourceChain:I})}return!m&&!u?e.createElement("div",{className:"p-4 rounded-2xl bg-orange-200 dark:bg-orange-900 items-center flex gap-2"},e.createElement("span",{className:"material-icons-round text-[#FFB33D] dark:text-orange-300 self-start"},"info"),e.createElement(q.Z,{size:"xs",className:"flex-1 font-medium"},"You will have to send this token to ",s?.chainName," first to able to use it."),e.createElement("button",{title:"Autofill address",onClick:U,className:"text-xs font-bold text-black-100 bg-white-100 py-2 px-4 rounded-3xl"},"Autofill address")):l===o?.address?e.createElement("div",{className:"p-4 rounded-2xl bg-orange-200 dark:bg-orange-900 items-center flex gap-2"},e.createElement("span",{className:"material-icons-round text-[#FFB33D] dark:text-orange-300 self-start"},"info"),e.createElement(q.Z,{size:"xs",className:"font-medium"},"You're transferring funds to the same address within your own wallet")):y&&d?.chain?e.createElement("div",{className:"py-3 px-4 rounded-2xl bg-orange-200 dark:bg-orange-900 items-center flex gap-2"},e.createElement("span",{className:"material-icons-round text-[#FFB33D] dark:text-orange-300 self-start"},"warning"),e.createElement(q.Z,{size:"xs",className:"font-medium"},"USD value cannot be calculated for this transaction")):null}const Kt=jt,Gt=()=>{const{memo:s,setMemo:i,addressWarning:c}=ke();return e.createElement("div",{className:me()("p-4 rounded-2xl bg-white-100 dark:bg-gray-950",{"opacity-50 pointer-events-none":c.type==="link"})},e.createElement("p",{className:"font-bold text-sm text-gray-600 dark:text-gray-400 mb-3"},"Memo"),e.createElement("input",{type:"text",value:s,placeholder:"Required for CEX transfers...",className:"w-full h-10 rounded-xl px-4 py-2 font-medium text-xs placeholder:text-gray-600 dark:placeholder:text-gray-400 text-black-100 dark:text-white-100 outline-none border border-[transparent] focus-within:border-green-600 bg-gray-50 dark:bg-gray-900",onChange:t=>i(t.target?.value)}))};var zt=a(121273),st=a.n(zt),Zt=a(611049),$t=a(926205),ut=a(220338),Re=a(508181),tt=a(8025),He=a(15815),ft=a(93931),Ue=a(712878),gt=a(19451),It=a(378268),Vt=a(374227);const ht=()=>e.createElement("div",{className:"flex px-2 py-2 min-w-[344px] z-0"},e.createElement("div",{className:"w-10 "},e.createElement(R.Z,{circle:!0,className:"w-10 h-10",style:{zIndex:0}})),e.createElement("div",{className:"w-[250px] z-0 ml-2"},e.createElement(R.Z,{count:1,className:"z-0"}),e.createElement(R.Z,{count:1,className:"z-0"}))),La=({contacts:s,handleContactSelect:i})=>{const c=useChainInfos();return React.createElement("div",{className:"mt-4"},React.createElement(Text,{size:"sm",className:"text-gray-600 dark:text-gray-200"},"From your contacts"),React.createElement("ul",{className:"list-none space-y-2 mt-2 max-h-[180px] overflow-y-auto"},s.map(t=>{const m=c[t.blockchain].chainSymbolImageUrl;return React.createElement("li",{key:t.address,className:"flex items-center ml-0 py-1 cursor-pointer",onClick:()=>{i({avatarIcon:void 0,chainIcon:m??GenericLight,chainName:c[t.blockchain].chainName,name:t.name,address:t.address,emoji:t.emoji,selectionType:"saved"})}},React.createElement(Avatar,{chainIcon:m,emoji:t.emoji??1,size:"sm",className:"mr-2"}),React.createElement("div",null,React.createElement(Text,{size:"md",color:"text-gray-800 dark:text-gray-100"},t.name),React.createElement(Text,{size:"sm",color:"text-gray-600 dark:text-gray-400"},sliceAddress(t.ethAddress?t.ethAddress:t.address))))})))},Ht=({address:s,handleContactSelect:i})=>{const{sendSelectedNetwork:c}=ke(),t=(0,ne.p)(),[m,f]=(0,gt.A)(s,c),r=(0,e.useMemo)(()=>Object.entries(f).filter(([,h])=>h),[f]);return e.createElement("div",{className:"mt-4"},e.createElement(q.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200"},'"',s,'" from different name services'),m?e.createElement("div",{className:"space-y-1 mt-2"},e.createElement(ht,null),e.createElement(ht,null),e.createElement(ht,null)):e.createElement(e.Fragment,null,r&&r.length>0?e.createElement("ul",{className:"list-none space-y-2 mt-2 max-h-[180px] overflow-y-auto"},r.map(([u,h])=>{const o=Re.r.Logos.getNameServiceLogo(u),d=Vt.$.getChainKey(h);return e.createElement("li",{key:u,className:`flex items-center ml-0 py-1 ${h?"cursor-pointer":"cursor-not-allowed"}`,onClick:()=>{h&&i({avatarIcon:o,chainIcon:d?t[d].chainSymbolImageUrl??It.GenericLight:It.GenericLight,chainName:d?t[d].chainName:"Chain",name:s,address:h,emoji:void 0,selectionType:"nameService",information:{nameService:gt.L[u]}})}},e.createElement(M.Avatar,{avatarImage:o,size:"sm",className:"mr-2 rounded-full overflow-hidden"}),e.createElement("div",null,e.createElement(q.Z,{size:"md",color:"text-gray-800 dark:text-gray-100"},gt.L[u]),e.createElement(q.Z,{size:"sm",color:"text-gray-600 dark:text-gray-400"},h?(0,n.Hnh)(h):"Not Found")))})):e.createElement("p",{className:"text-sm font-bold text-red-300 mt-2"},"No results found in any name service")))},_t=s=>(s-1)%20+(s>=1?0:20),Qt=s=>(s+1)%20;function At({title:s="Save Contact",isOpen:i,onClose:c,address:t,ethAddress:m,onSave:f}){const[r,u]=(0,e.useState)(""),[h,o]=(0,e.useState)(""),[d,E]=(0,e.useState)(1),[I,l]=(0,e.useState)(!1),[p,L]=(0,e.useState)(""),[w,y]=(0,e.useState)(!1),{setMemo:C}=ke(),S=tt.o.useGetContact(t),{contacts:k,loading:x}=(0,ut.g)(),U=(0,ne.p)(),B=(0,n.tIw)(),D=(0,b.a)(),ee=(0,e.useRef)(null),se=(0,e.useMemo)(()=>{try{const{prefix:_}=st().decode(t),Q=B[_];return Q==="cosmoshub"?"cosmos":Q}catch{return(0,He.l)()?"seiTestnet2":"cosmos"}},[t,B]),Y=U[se]?.chainSymbolImageUrl??D;(0,e.useEffect)(()=>{S&&(o(S.name),E(S.emoji),u(S.memo??""),l(S?.saveAsCEX??!1))},[S]),(0,e.useEffect)(()=>{i&&ee.current&&ee.current.focus()},[i]);const te=_=>{p&&L("");const Q=_.target.value;Q.length<24&&(Q.length&&!x&&Object.values(k).some(({name:z,address:A})=>A!==t&&z.trim().toLowerCase()===Q.trim().toLowerCase())&&L("Contact with same name already exists"),o(Q))},K=async()=>{h&&!w&&(y(!0),await tt.o.save({address:t,blockchain:se,emoji:d,name:h,memo:r,ethAddress:m,saveAsCEX:I}),C(r),f?.({ethAddress:m,address:t,chainIcon:Y??"",emoji:d,name:h,avatarIcon:"",chainName:U[se]?.chainName,selectionType:"saved"}),c(),y(!1))};return e.createElement(ze.Z,{title:s,onClose:c,isOpen:i,closeOnBackdropClick:!0,containerClassName:"!max-h-[600px]",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},e.createElement("form",{className:"flex flex-col items-center w-full gap-y-4",onSubmit:_=>{_.preventDefault(),K()}},e.createElement("div",{className:"flex flex-col gap-y-4 w-full bg-gray-50 dark:bg-gray-900 rounded-2xl p-4 justify-center items-center"},e.createElement("div",{className:"flex flex-row justify-center items-center gap-5"},e.createElement("div",{className:"!text-[32px] text-black-100 dark:text-white-100 material-icons-round p-1 bg-gray-100 dark:bg-gray-850 rounded-full cursor-pointer",onClick:()=>E(_t(d))},"chevron_left"),e.createElement(M.Avatar,{size:"lg",chainIcon:Y,emoji:d??0}),e.createElement("div",{className:"!text-[32px] text-black-100 dark:text-white-100 material-icons-round p-1 bg-gray-100 dark:bg-gray-850 rounded-full cursor-pointer",onClick:()=>E(Qt(d))},"chevron_right")),e.createElement("p",{className:"text-gray-600 dark:text-gray-400 font-bold"},(0,Ue.Hn)(t)),e.createElement("div",{className:"w-full"},e.createElement("div",{className:"w-full flex shrink relative justify-center"},e.createElement(M.Input,{placeholder:"Enter name",value:h,onChange:te,ref:ee,className:"h-12 rounded-xl placeholder:text-gray-600 dark:placeholder:text-gray-400 text-black-100 dark:text-white-100 outline-none border !border-[transparent] focus-within:!border-green-600 !bg-gray-100 dark:!bg-gray-850"}),e.createElement("div",{className:"absolute right-[16px] top-[14px] text-gray-400 text-sm font-medium"},`${h.length}/24`)),p&&e.createElement(q.Z,{size:"xs",color:"text-red-300",className:"mt-2 ml-1 font-bold"},p))),e.createElement("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-gray-900 w-full"},e.createElement("p",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-3"},"Add Memo"),e.createElement("input",{type:"text",value:r,placeholder:"Required for CEX transfers...",className:"w-full h-10 rounded-xl px-4 py-2 font-medium text-sm placeholder:text-gray-600 dark:placeholder:text-gray-400 text-black-100 dark:text-white-100 outline-none border border-[transparent] focus-within:border-green-600 bg-gray-100 dark:bg-gray-850",onChange:_=>u(_.target?.value)})),e.createElement("div",{className:"flex gap-3 p-4 rounded-2xl bg-gray-50 dark:bg-gray-900 w-full"},e.createElement(kt.X,{checked:I,onClick:()=>l(_=>!_)}),e.createElement("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200"},"Save as Centralized Exchange Address")),w?e.createElement(Xe.T,{color:T.w.white100}):e.createElement(M.Buttons.Generic,{color:(0,He.l)()?T.w.compassPrimary:T.w.green600,size:"normal",className:"w-full",disabled:!h||!!p,title:"Save contact",type:"submit"},"Save contact")))}const pt=({leftIcon:s,onClick:i,children:c,className:t,iconClassName:m})=>e.createElement("button",{className:me()(t,"flex gap-1 items-center rounded-full px-[10px] py-1 bg-gray-50 dark:bg-gray-900 focus:bg-gray-400 dark:focus:bg-gray-500 outline-none"),onClick:i},s&&e.createElement("div",{className:me()(m,"material-icons-round text-base text-black-100 dark:text-white-100")},s),e.createElement("span",null,c));function Yt({handleContactSelect:s}){const[i,c]=(0,e.useState)(""),t=i.trim(),m=(0,ut.Z)(t),f=(0,ne.p)(),{setMemo:r}=ke(),u=(0,b.a)(),h=(o,d)=>{s({avatarIcon:"",chainIcon:d??"",chainName:f[o.blockchain].chainName,name:o.name,address:o.address,emoji:o.emoji,selectionType:"saved"}),r(o.memo??"")};return e.createElement(e.Fragment,null,e.createElement(ct.M,{value:i,onChange:o=>c(o.target.value),onClear:()=>c(""),placeholder:"Search your contacts...",divClassName:"rounded-2xl w-full flex gap-[10px] bg-gray-50 dark:bg-gray-900 py-3 pr-3 pl-4 focus-within:border-green-600 border border-transparent",inputClassName:"flex flex-grow text-base outline-none bg-white-0 font-bold text-black-100 dark:text-white-100 text-md placeholder:font-medium dark:placeholder:text-gray-400 !leading-[21px]"}),e.createElement("div",{className:"mt-4 w-full h-[300px] overflow-auto"},m.length>0?m.map((o,d)=>{const E=f[o.blockchain]?.chainSymbolImageUrl??u,I=d===m.length-1;return e.createElement(e.Fragment,{key:o.address},e.createElement("div",{className:"w-full flex items-center gap-3 py-3",onClick:()=>h(o,E)},e.createElement(M.Avatar,{chainIcon:E,emoji:o.emoji??0}),e.createElement("div",null,e.createElement("p",{className:"font-bold dark:text-white-100 text-gray-700 capitalize"},o.name),e.createElement("p",{className:"text-sm font-medium dark:text-gray-400 text-gray-600"},(0,n.Hnh)(o.ethAddress?o.ethAddress:o.address)))),!I&&e.createElement("div",{className:"border-b w-full border-gray-100 dark:border-gray-850"}))}):e.createElement("div",{className:"py-[88px] w-full flex-col flex  justify-center items-center gap-4"},e.createElement("div",{className:"material-icons-round !text-[40px] !leading-[40px] dark:text-white-100"},"person_search"),e.createElement("div",{className:"flex flex-col justify-start items-center w-full gap-1"},e.createElement("div",{className:"text-md text-center font-bold !leading-[21.5px] dark:text-white-100"},t.length>0?`No contacts found for "${t}"`:"No contacts to show"),e.createElement("div",{className:"text-sm font-normal !leading-[22.4px] text-gray-400 dark:text-gray-400"},t.length>0?"Try searching for a different term ":"Add a contact see them appear here")))))}const Xt=Yt;var xt=a(606367),Dt=a(111819);const Jt=Le.w.useWallets,qt=({isOpen:s,onClose:i,setSelectedWallet:c,selectedWallet:t})=>{const m=Jt(),{topChainColor:f}=(0,W.Cd)(),{sendActiveChain:r}=ke(),u=(0,n.QSC)(r),h=(0,e.useMemo)(()=>m?Object.values(m).map(o=>o).sort((o,d)=>o.name.localeCompare(d.name)):[],[m]);return e.createElement(ze.Z,{title:"Wallets",onClose:i,isOpen:s,closeOnBackdropClick:!0,contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"pt-3 px-6 pb-6"},e.createElement("div",null,h.map((o,d,E)=>{const I=d===E.length-1;let l="";o.walletType===n._KQ.LEDGER&&(l=` \xB7 /0'/0/${o.addressIndex}`),(o.walletType===n._KQ.PRIVATE_KEY||o.walletType===n._KQ.SEED_PHRASE_IMPORTED)&&(l=" \xB7 Imported");const p=o.walletType==n._KQ.LEDGER&&!xt.li.test(o.name)?`${ge.dN[o.walletType]} Wallet ${o.addressIndex+1}`:(0,Dt.k)(o.name),L=p.length,w=o.walletType===n._KQ.LEDGER?10:19,y=L>w?p.slice(0,w)+"...":p;let C=`${(0,Ue.Hn)(o.addresses[u.key])}${l}`;return o.walletType===n._KQ.LEDGER&&!(0,ft.i)(u.key,u.bip44.coinType)&&(C=`Ledger not supported on ${u.chainName}`),o.walletType===n._KQ.LEDGER&&(0,ft.i)(u.key,u.bip44.coinType)&&!o.addresses[u.key]&&(C="Please import EVM wallet"),e.createElement("div",{className:"relative min-h-[56px]",key:o.id},e.createElement("div",{className:"w-full flex items-center gap-3 py-3 cursor-pointer",onClick:()=>{c(o),i()}},e.createElement("img",{src:o?.avatar??Re.r.Misc.getWalletIconAtIndex(o.colorIndex),alt:"wallet icon",className:"rounded-full border border-white-30 h-10 w-10"}),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"flex items-center gap-1 font-bold dark:text-white-100 text-gray-700 capitalize"},y,o.walletType===n._KQ.LEDGER&&e.createElement(q.Z,{className:"bg-gray-900 font-normal rounded-2xl justify-center items-center px-2 ml-1 h-[18px]",color:"text-gray-400",size:"xs"},"Ledger")),e.createElement("p",{className:"text-sm font-medium dark:text-gray-400 text-gray-600"},C)),t?.id===o.id?e.createElement("span",{className:"material-icons-round ml-2",style:{color:f}},"check_circle"):null),!I&&e.createElement("div",{className:"border-b w-full border-gray-100 dark:border-gray-850"}))})))};function ea({value:s,onChange:i,setSelectedWallet:c,selectedWallet:t}){const m=(0,e.useRef)(null),[f,r]=(0,e.useState)(!1);(0,e.useEffect)(()=>{m.current&&setTimeout(()=>{m.current?.focus()},100)},[]);const u=t?.walletType===n._KQ.LEDGER&&!xt.li.test(t.name)?`${ge.dN[t.walletType]} Wallet ${t.addressIndex+1}`:(0,Dt.k)(t?.name||""),h=(0,e.useMemo)(()=>(0,He.l)()?Re.r.Logos.CompassCircle:t?.avatar?t.avatar:Re.r.Misc.getWalletIconAtIndex(t.colorIndex),[t?.avatar,t.colorIndex]);return e.createElement("div",{className:"rounded-2xl w-full flex gap-[10px] bg-gray-50 dark:bg-gray-900 py-3 pr-3 pl-4 focus-within:border-green-600 border border-transparent"},e.createElement("input",{placeholder:"Search chain",className:"flex flex-1 min-w-[160px] text-base outline-none bg-white-0 font-bold text-black-100 dark:text-white-100 text-md placeholder:font-medium dark:placeholder:text-gray-400 !leading-[21px]",value:s,onChange:i,ref:m}),e.createElement("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-900 cursor-pointer border-l-2 border-gray-200 dark:border-gray-800 pl-4 pr-1",onClick:()=>r(!0)},h?e.createElement("img",{className:"w-5 h-5 rounded-full",src:h,alt:"wallet-avatar"}):e.createElement("img",{className:"w-5 h-5",src:Re.r.Logos.LeapLogo28,alt:"wallet-avatar"}),e.createElement(q.Z,{size:"sm",className:"font-bold"},(0,Ue.fy)(u,8)),e.createElement("p",{className:"!text-sm material-icons-round dark:text-white-100"},"expand_more")),e.createElement(qt,{isOpen:f,onClose:()=>r(!1),setSelectedWallet:c,selectedWallet:t}))}function ta({skipSupportedDestinationChainsIDs:s,setSelectedAddress:i}){const{displayAccounts:c,isIbcSupportDataLoading:t,sendActiveChain:m}=ke(),f=(0,ne.p)(),r=(0,mt.ZP)(),u=(0,b.a)(),[h,o]=(0,e.useState)(r?.activeWallet),[d,E]=(0,e.useState)(""),I=d.trim(),l=[];Object.keys(f).map(S=>{s?.includes(f[S]?.chainId)&&l.push([S,h?.addresses?.[S]])});const p=l.length>0?l:c,{name:L,colorIndex:w}=h,y=(0,e.useMemo)(()=>p.filter(([S])=>(0,He.l)()&&S!=="seiTestnet2"?null:(f[S]?.chainName??S).toLowerCase().includes(I.toLowerCase())),[p,f,I]),C=(0,$.Z)().get("toChainId")??void 0;return(0,e.useEffect)(()=>{if(C&&y?.length>0){const S=Object.values(f).find(U=>U.chainId===C)?.key,k=y.filter(([U])=>U===S)?.[0],x=f[S]?.chainSymbolImageUrl??u;i({address:k?.[1],avatarIcon:Re.r.Misc.getWalletIconAtIndex(w),chainIcon:x??"",chainName:k?.[0],emoji:void 0,name:`${L.length>12?`${L.slice(0,12)}...`:L} - ${(0,Ue.kC)(k?.[0]==="seiTestnet2"?"sei":k?.[0])}`,selectionType:"currentWallet"})}},[C,y?.length>0,m]),t?e.createElement("div",{className:"bg-white-100 dark:bg-gray-900 rounded-2xl p-3 relative h-48 w-full"},e.createElement(q.Z,{size:"xs",className:"p-1 font-bold",color:"text-gray-600 dark:text-gray-200"},"Loading IBC Supported Chains"),e.createElement(Xe.Z,null)):e.createElement(e.Fragment,null,e.createElement(ea,{value:d,onChange:S=>E(S.target.value),setSelectedWallet:o,selectedWallet:h}),e.createElement("div",{className:"relative mt-4 h-[300px] overflow-auto"},y.length>0?y.map(([S,k],x)=>{const U=S,B=f[U]?.chainSymbolImageUrl??u,D=f[U]?.chainName??U,ee=x===y.length-1;return e.createElement(e.Fragment,{key:S},e.createElement("div",{className:"w-full flex items-center gap-3 py-3",onClick:()=>{i({address:k,avatarIcon:Re.r.Misc.getWalletIconAtIndex(w),chainIcon:B??"",chainName:U,emoji:void 0,name:`${L.length>12?`${L.slice(0,12)}...`:L} - ${(0,Ue.kC)(U==="seiTestnet2"?"sei":U)}`,selectionType:"currentWallet"})}},e.createElement("img",{src:B,alt:`${D} logo`,className:"rounded-full border border-white-30 h-10 w-10"}),e.createElement("div",null,e.createElement("p",{className:"font-bold dark:text-white-100 text-gray-700 capitalize"},D),e.createElement("p",{className:"text-sm font-medium dark:text-gray-400 text-gray-600"},(0,Ue.Hn)(k)))),!ee&&e.createElement("div",{className:"border-b w-full border-gray-100 dark:border-gray-850"}))}):e.createElement("div",{className:"py-[88px] w-full flex-col flex  justify-center items-center gap-4"},e.createElement("div",{className:"material-icons-round !text-[40px] !leading-[40px] dark:text-white-100"},"help_outline"),e.createElement("div",{className:"flex flex-col justify-start items-center w-full gap-1"},e.createElement("div",{className:"text-md text-center font-bold !leading-[21.5px] dark:text-white-100"},I.length>0?`No chains found for "${I}"`:`No chains support IBC with ${f[m].chainName}`),e.createElement("div",{className:"text-sm font-normal !leading-[22.4px] text-gray-400 dark:text-gray-400"},"Try searching for a different term")))))}const aa=ta,na=({isOpenType:s,onClose:i,setSelectedAddress:c,handleContactSelect:t,skipSupportedDestinationChainsIDs:m})=>{const[f,r]=(0,e.useState)(s);return(0,e.useEffect)(()=>{r(s)},[s]),e.createElement(ze.Z,{title:"Select Destination",onClose:i,isOpen:!!s,closeOnBackdropClick:!0,contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},e.createElement("div",{className:"w-full flex bg-gray-50 dark:bg-black-100 border-[3px] border-gray-50 dark:border-black-100 rounded-[25px] mb-6"},["My Contacts","My Wallets"].map(u=>e.createElement("div",{key:u,className:me()("rounded-[40px] flex-1 text-center py-2 cursor-pointer text-sm font-bold transition-all duration-200",{"bg-white-100 dark:bg-gray-950 text-black-100 dark:text-white-100":f===u},{"bg-[transparent] text-gray-600 dark:text-gray-400":f!==u}),onClick:()=>r(u)},u))),e.createElement("div",null,f==="My Contacts"?e.createElement(Xt,{handleContactSelect:t}):e.createElement(aa,{skipSupportedDestinationChainsIDs:m,setSelectedAddress:c})))};function sa({isOpen:s,onCloseHandler:i,onDelete:c,selectedAddress:t}){const[m,f]=(0,e.useState)(!1),r=tt.o.useGetContact(t.address??""),{theme:u}=(0,M.useTheme)(),h=(0,e.useCallback)(o=>{o.stopPropagation()},[]);return e.createElement("div",{onClick:h},e.createElement(ze.Z,{title:"Contact details",onClose:i,isOpen:s,closeOnBackdropClick:!0,contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},e.createElement("div",{className:"flex flex-col items-center gap-4"},e.createElement("div",{className:"w-full bg-gray-50 dark:bg-gray-900 rounded-2xl p-4 flex items-center flex-col"},e.createElement(M.AvatarCard,{chainIcon:t.chainIcon,emoji:r?.emoji??t.emoji,size:"lg",title:r?.name??t.name,className:"mt-3"}),e.createElement(M.Buttons.CopyWalletAddress,{className:"mt-1",color:T.w.juno,walletAddress:(0,Ue.Hn)(t.address)})),e.createElement("div",{className:"flex gap-4 w-full"},e.createElement(M.Buttons.Generic,{title:"Delete contact",color:T.w.red300,onClick:async()=>{await tt.o.removeEntry(t.address??""),c(),i()},className:"flex-1"},"Delete contact"),e.createElement(M.Buttons.Generic,{title:"Edit contact",color:u===M.ThemeName.DARK?T.w.gray900:"#F4F4F4",onClick:()=>f(!0),className:"flex-1"},e.createElement("p",{className:"!text-black-100 dark:!text-white-100"},"Edit contact"))))),e.createElement(At,{isOpen:m,title:"Edit Contact",address:t.address??"",onClose:()=>f(!1)}))}const ra=({selectedAddress:s,showEditMenu:i,onDelete:c})=>{const t=(0,b.a)(),[m,f]=(0,e.useState)(!1),r=u=>{u.stopPropagation(),f(!0)};return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex items-center",title:`${s.chainName}: ${s.ethAddress?s.ethAddress:s.address}`},e.createElement(M.Avatar,{size:"sm",avatarImage:s.avatarIcon??t,avatarOnError:(0,ue._)(t),emoji:s.emoji,chainIcon:s.avatarIcon===s.chainIcon?void 0:s.chainIcon,className:"bg-gray-200 dark:bg-gray-800 !h-8 !w-8"}),e.createElement(q.Z,{size:"md",className:"text-black-100 dark:text-white-100 ml-2 font-bold"},s.ethAddress&&s.chainName!=="injective"?(0,n.Hnh)(s.ethAddress):s.name),i?e.createElement("button",{onClick:r,className:"ml-auto"},e.createElement("img",{src:Re.r.Misc.Menu,alt:"Menu",className:"ml-auto"})):null),e.createElement(sa,{isOpen:i&&m,selectedAddress:s,onDelete:c,onCloseHandler:()=>f(!1)}))},oa=/^[a-zA-Z0-9_]+\.[a-z]+$/,la=({themeColor:s})=>{const i=(0,n.cJs)(),[c,t]=(0,e.useState)(null),[m,f]=(0,e.useState)(!1),[r,u]=(0,e.useState)(""),{theme:h}=(0,M.useTheme)(),o=h===M.ThemeName.DARK,d=Le.w.useGetWallet(),{addressLinkState:E}=(0,n.uaF)(d),{ethAddress:I,selectedAddress:l,setSelectedAddress:p,addressError:L,setAddressError:w,isIBCTransfer:y,setMemo:C,setCustomIbcChannelId:S,setEthAddress:k,selectedToken:x,addressWarning:U,setAddressWarning:B,isIbcUnwindingDisabled:D,fetchAccountDetails:ee,fetchAccountDetailsData:se,fetchAccountDetailsStatus:Y,setFetchAccountDetailsData:te,setAssociatedSeiAddress:K,sendActiveChain:_,sendSelectedNetwork:Q,associatedSeiAddress:z}=ke(),{chains:A}=(0,n._IL)(),[ve]=(0,$t.A4)(),we=(0,n.SFn)(),ye=(0,n.tIw)(),pe=A[_],{data:re}=(0,Ie.C$)(),{data:ie}=(0,n.S2A)(),Ce=(0,e.useMemo)(()=>I||r,[I,r]),Ge=(0,ut.Z)(Ce),X=tt.o.useGetContact(Ce),Fe=l?.selectionType==="currentWallet",V=(0,b.a)(),fe=(0,n.rTu)(),Z=(0,n.uVs)(),P=(0,e.useCallback)(v=>{if(Z&&v.toLowerCase().startsWith("0x"))w(void 0),k(v),u(v);else if(Number(pe.bip44.coinType)===60&&v.toLowerCase().startsWith("0x")&&pe.key!=="injective")try{w(void 0);const ce=(0,F.Jyw)(pe.addressPrefix,v);k(v),u(ce);return}catch{w("The entered address is invalid")}k(""),u(v)},[pe.addressPrefix,pe.bip44.coinType,pe.key,Z,w,k]),H=(0,e.useCallback)(v=>{const ce=v.target.value.trim();P(ce)},[P]),Oe=(0,e.useCallback)((v,ce)=>{switch(ce){case"clear":k(""),u(""),p(null),C("");break;default:break}},[P,k,C,p]),Be=(0,e.useCallback)(v=>{p(v),k(v.ethAddress??""),u(v.address??""),c&&t(null)},[c,k,p]),Et=(0,e.useCallback)(v=>{u(v.address??""),p(v),t(null)},[u,p]),rt=(0,e.useCallback)(()=>{try{const{prefix:v}=st().decode(r);if(!ye[v]){w("Unsupported Chain");return}f(!0)}catch{w("The entered address is invalid")}},[ye,r,w]),Je=(0,e.useMemo)(()=>r.length>0?"clear":"",[r]),We=(0,e.useMemo)(()=>{if(r.length>0)return Re.r.Misc.CrossFilled},[r]),je=(0,e.useMemo)(()=>{const v=[...Object.keys(ye),"arch","sol"],[,ce]=r.split("."),Ze=v.indexOf(ce)!==-1;return oa.test(r)&&Ze},[r,ye]),_e=(0,e.useMemo)(()=>{if(l)return e.createElement(ra,{selectedAddress:l,showEditMenu:l.address===X?.address&&l.ethAddress===X?.ethAddress,onDelete:()=>{p(null),u(""),k("")}});if(Ce.length>0)try{return st().decode(Ce),e.createElement(q.Z,{size:"md",className:"text-gray-800 dark:text-gray-200"},(0,Ue.Hn)(Ce))}catch{return}},[X?.address,X?.ethAddress,Ce,l,k,p]),qe={denom:x?.ibcDenom||x?.coinMinimalDenom||"",symbol:x?.symbol||"",logoUri:x?.img||"",decimals:x?.coinDecimals||0,originDenom:x?.coinMinimalDenom||"",denomTracePath:x?.ibcChainInfo?`transfer/${x.ibcChainInfo?.channelId}`:""},ot=re?.find(v=>v.chainId===pe.chainId),{data:Lt}=ie?.ibc?.extension!=="disabled"?(0,Ie.Mf)(qe,ot,Q==="mainnet"):{data:null},lt=(0,e.useMemo)(()=>Lt?.filter(v=>!(fe?.walletType===n._KQ.LEDGER&&!(0,ft.i)(v.key,v.coinType)||!fe?.addresses[v.key])).map(v=>v.chainId)||[],[Lt,fe]),Ia=r.trim().length>0&&Ge.length>0,yt=l?.address===r&&l?.selectionType==="saved",it=!Ia&&r.length>0&&!yt&&!X&&r!==we&&!Fe&&!je&&!L?.includes("The entered address is invalid"),Ot=!yt&&!it&&!X&&!l&&!je,Bt=!yt&&!it&&!X&&!l&&!je&&Q==="mainnet"&&!(0,He.l)(),Aa=Ot||Bt||it;(0,e.useEffect)(()=>{switch(Y){case"loading":{B({type:"erc20",message:e.createElement(e.Fragment,null,"Recipient will receive this on address:"," ",e.createElement(Xe.T,{color:T.w.white100,className:"w-[20px] h-[20px]"}))});break}case"success":{if(se?.pubKey.key){const v=(0,F.yNR)(se.pubKey.key);v.toLowerCase().startsWith("0x")?B({type:"erc20",message:`Recipient will receive the ERC-20 token on associated EVM address: ${v}`}):B({type:"erc20",message:"You can only transfer ERC-20 tokens to an EVM address."})}break}case"error":{B({type:"erc20",message:"You can only transfer ERC-20 tokens to an EVM address."});break}default:B(n.wL6)}},[se?.pubKey.key,Y]),(0,e.useEffect)(()=>{(async function(){if(K(""),we!==r)if(Z&&r.length&&x){if(r.toLowerCase().startsWith("0x")&&fe?.walletType===n._KQ.LEDGER){w(ge.tR);return}if(E==="loading"){B({type:"link",message:e.createElement(e.Fragment,null,"Checking the Ox and Sei address link status"," ",e.createElement(Xe.T,{color:T.w.white100,className:"w-[20px] h-[20px]"}))});return}else B(n.wL6);if(!r.toLowerCase().startsWith("0x")){x.isEvm?B({type:"link",message:"To send Sei EVM tokens to Sei address, link your EVM and Sei addresses first."}):i(x)&&r.length>=42?await ee(r):(B(n.wL6),te(void 0));return}if(r.toLowerCase().startsWith("0x")){let v="";K("loading");try{const ce=await(0,n.auI)({infoType:n.SGB.EVM_RPC_URL,activeChain:_,activeNetwork:Q});v=await F.kZr.GetSeiAddressFromHex(r,ce)}catch{v=""}!x.isEvm&&x.coinMinimalDenom==="usei"&&!["done","unknown"].includes(E)?v?(K(v),B({type:"erc20",message:`Recipient will receive the token on associated Sei address: ${v}`})):(K(""),B({type:"link",message:"To send Sei tokens to EVM address, link your EVM and Sei addresses first."})):!i(x)&&x.coinMinimalDenom!=="usei"&&v?(K(v),B({type:"erc20",message:`Recipient will receive the token on associated Sei address: ${v}`})):K("");return}}else r&&!(0,F.AtH)(r)&&!je?w("The entered address is invalid"):(B(n.wL6),w(void 0))})()},[Z,E,we,i,r,x,x?.coinMinimalDenom,x?.isEvm,je,fe?.walletType,_,Q]),(0,e.useEffect)(()=>{if(l?.information?.autofill){u(l?.address||"");return}if(r===l?.address)return;const v=r.trim();if(l&&v!==l.address){p(null);return}try{if(Z&&v.toLowerCase().startsWith("0x")){const Qe=pe.chainSymbolImageUrl??"";p({ethAddress:v,address:v,name:(0,Ue.Hn)(v),avatarIcon:pe.chainSymbolImageUrl??"",emoji:void 0,chainIcon:Qe??"",chainName:pe.key,selectionType:"notSaved"});return}const{prefix:ce}=st().decode(v),Ze=ye[ce],bt=A[Ze]?.chainSymbolImageUrl??V;p({ethAddress:I,address:v,name:(0,Ue.Hn)(v),avatarIcon:bt??"",emoji:void 0,chainIcon:bt??"",chainName:Ze,selectionType:"notSaved"})}catch(ce){ce?.message?.includes("too short")||w("Invalid Address")}},[ye,A,we,r,l,p,Z]),(0,e.useEffect)(()=>{if(X&&l&&(X.ethAddress!==l?.ethAddress||X.address!==l?.address||X.name!==l?.name||X.emoji!==l?.emoji||X.blockchain!==l?.chainName)){const ce=A[X.blockchain]?.chainSymbolImageUrl??V;C(X.memo??""),p({ethAddress:X?.ethAddress,address:X.address,name:X.name,avatarIcon:void 0,emoji:X.emoji,chainIcon:ce??"",chainName:X.blockchain,selectionType:"saved"})}},[A,X,r,l,C,p]);const Da=(0,e.useMemo)(()=>{if(!l?.address)return null;const v=(0,F.z_q)(l.address);if(!v)return null;const ce=ye[v];return ce?A[ce]:null},[ye,A,l?.address]);(0,e.useEffect)(()=>{let v,ce;if(Z&&(l?.address?.startsWith("0x")||z==="loading"))return;if(l?.address)if(ce=(0,F.z_q)(l.address),ce)v=ye[ce];else{w("The entered address is invalid");return}else return;const Ze=ce&&ce!==A[_].addressPrefix;if(Ze){if(Ze&&Q==="testnet"){w("IBC transfers are not supported on testnet.");return}if(Ze&&v&&(0,He.l)()&&!ve.filter(Qe=>Qe.chainName!=="cosmos").find(Qe=>Qe.chainName===v)){const Qe=A[v].chainName,Ta=pe.chainName;w(`IBC transfers are not supported between ${Qe} and ${Ta}`);return}if(!D&&A[v]?.apiStatus===!1){w(`IBC transfers are not supported between ${A[v]?.chainName||"this address"} and ${pe.chainName}.`);return}else w(void 0);!D&&lt?.length>0&&!lt.includes(A[v]?.chainId)?w(`IBC transfers are not supported between ${A[v]?.chainName||"this address"} and ${pe.chainName} for ${(0,n.MDB)(x?.symbol)} token.`):w(void 0)}},[pe,l,w,we,A,ye,lt,ve,D,x?.symbol,Z,_,Q,z]),(0,e.useEffect)(()=>{l?.chainName&&S(void 0)},[l?.chainName,S]);const vt=L?!L.includes("IBC transfers are not supported"):!1;return e.createElement("div",null,e.createElement(g.E.div,{className:"p-4 rounded-2xl bg-white-100 dark:bg-gray-950"},e.createElement(Zt.q,{invalid:!!vt,warning:!!U.message,action:Je,buttonText:Je,buttonTextColor:s,icon:We,value:Ce,onAction:Oe,onChange:H,placeholder:"Enter recipient address or contact",autoComplete:"off",spellCheck:"false",className:`rounded-xl h-12 pl-4 py-[2px] text-md font-medium placeholder:text-gray-600 dark:placeholder:text-gray-400 text-black-100 dark:text-white-100 bg-gray-50 dark:bg-gray-900 border ${!vt&&!U.message&&"!border-transparent focus-within:!border-green-600"}`,preview:_e}),vt?e.createElement(q.Z,{size:"xs",color:"text-red-300",className:"mt-2 ml-1 font-bold","data-testing-id":"send-recipient-address-error-ele"},L):null,U.message?e.createElement(q.Z,{size:"xs",color:"text-yellow-600",className:"mt-2 ml-1 font-bold","data-testing-id":"send-recipient-address-error-ele"},U.message):null,e.createElement("div",{className:"flex w-full items-center justify-between mt-3"},e.createElement("div",{className:"flex flex-wrap space-x-1 gap-2 w-full"},Aa?e.createElement(e.Fragment,null,Ot?e.createElement(pt,{leftIcon:"contact_page",onClick:()=>t("My Contacts"),actionLabel:"Open Contacts Sheet",iconClassName:"!text-sm !text-gray-800 dark:!text-gray-200"},e.createElement(q.Z,{size:"xs",className:"text-gray-800 dark:text-gray-200 whitespace-nowrap font-medium"},"Contacts")):null,Bt?e.createElement(pt,{leftIcon:"account_balance_wallet",onClick:()=>t("My Wallets"),actionLabel:"Show My Wallets on Other Chains",iconClassName:"!text-sm !text-gray-800 dark:!text-gray-200"},e.createElement(q.Z,{size:"xs",className:"text-gray-800 dark:text-gray-200 whitespace-nowrap font-medium"},"My Wallets")):null,it?e.createElement(pt,{onClick:rt,actionLabel:"Add Contact to Address Book",leftIcon:"person_add",iconClassName:"[transform:rotateY(180deg)] !text-sm !text-gray-800 dark:!text-gray-200"},e.createElement(q.Z,{size:"xs",className:"text-gray-800 dark:text-gray-200 whitespace-nowrap font-medium"},"Add Contact")):null):null,y&&!(0,He.l)()&&Q==="mainnet"&&Da?e.createElement("div",{className:"flex flex-1 justify-end"},e.createElement("div",{className:"flex w-fit gap-1 py-1 px-[10px] bg-[#F7EDFC] dark:bg-[#290939] rounded-3xl h-8 items-center"},e.createElement(Re.r.Misc.IbcProtocol,{color:o?"#E0B9F4":"#A22CDD"}),e.createElement(q.Z,{size:"xs",color:"text-[#A22CDD] dark:text-[#E0B9F4]",className:"whitespace-nowrap font-medium"},"IBC Transfer"))):null)),je?e.createElement(Ht,{address:r,handleContactSelect:Be}):null,e.createElement(na,{isOpenType:c,setSelectedAddress:Et,handleContactSelect:Be,onClose:()=>t(null),skipSupportedDestinationChainsIDs:lt}),e.createElement(At,{isOpen:m,onSave:Be,onClose:()=>f(!1),address:r,ethAddress:I})))};var ia=a(888491),ca=a(86211);const da=s=>(0,e.useMemo)(()=>{if(s?.trim()?.length===0)return"";const c=parseFloat(s);return isNaN(c)?"":c.toString()},[s]);var ma=a(825639),ua=a(128972),fa=a(367738),Tt=a(348834).Buffer;const Mt=s=>{const{activeWallet:i}=(0,mt.ZP)(),c=Le.w.useGetWallet(),{chains:t}=(0,n._IL)(),m=(0,n.a74)(),f=(0,e.useMemo)(()=>s||m,[m,s]),r=i?.walletType===n._KQ.LEDGER,u=(0,e.useCallback)(async(E,I)=>{const l=await c(t[f]?.key??"");if("signDirect"in l){const p=await l.signDirect(E,I);return{signature:new Uint8Array(Tt.from(p.signature.signature,"base64")),signed:p.signed}}else throw new Error("signDirect not supported")},[f,t,c]),h=(0,e.useCallback)(async(E,I)=>{const l=await c(t[f]?.key??"");if("signAmino"in l){const p=await l.signAmino(E,I);return{signature:new Uint8Array(Tt.from(p.signature.signature,"base64")),signed:p.signed}}else throw new Error("signAmino not supported")},[f,t,c]),o=(0,e.useMemo)(()=>({signDirect:u,signAmino:h}),[h,u]);return{walletClient:(0,e.useMemo)(()=>({enable:async()=>{},getAccount:async E=>{if(!i)throw new Error("No active wallet");const l=(await(0,fa._d)())[E]??f,p=i.addresses[l],L=i.pubKeys?.[l];if(!p||!L)throw new Error("No address or pubKey");return{bech32Address:p,pubKey:(0,ua.fromBase64)(L),isNanoLedger:r}},getSigner:async()=>o}),[f,i,r,o])}};var ga=a(863262),ha=a(595196);const pa=()=>{const[s,i]=(0,e.useState)(!1),{userPreferredGasPrice:c,userPreferredGasLimit:t,setUserPreferredGasLimit:m,setUserPreferredGasPrice:f,gasEstimate:r,gasOption:u,setGasOption:h,setFeeDenom:o,selectedToken:d,gasError:E,setGasError:I,addressWarning:l,sendActiveChain:p,sendSelectedNetwork:L,isSeiEvmTransaction:w}=ke(),y=(0,Ye.e7)({activeChain:p,selectedNetwork:L,isSeiEvmTransaction:w}),[C,S]=(0,e.useState)({option:u,gasPrice:c??y.gasPrice}),k=(0,e.useRef)(!1),x=(0,e.useCallback)(()=>{i(!1)},[]),U=(0,e.useCallback)((B,D)=>{k.current=!0,S(B),o({...D.denom,ibcDenom:D.ibcDenom})},[o]);return(0,e.useEffect)(()=>{k.current||S({option:u,gasPrice:y.gasPrice})},[y.gasPrice.amount.toString(),y.gasPrice.denom]),(0,e.useEffect)(()=>{h(C.option),f(C.gasPrice)},[C,h,f]),e.createElement("div",null,e.createElement(Ye.ZP,{recommendedGasLimit:r.toString(),gasLimit:t?.toString()??r.toString(),setGasLimit:B=>m(Number(B.toString())),gasPriceOption:C,onGasPriceOptionChange:U,error:E,setError:I,isSelectedTokenEvm:d?.isEvm,chain:p,network:L,isSeiEvmTransaction:w},l.type==="link"?null:e.createElement(ga.a,{setShowFeesSettingSheet:i}),E&&!s?e.createElement("p",{className:"text-red-300 text-sm font-medium mt-2 text-center"},E):null,e.createElement(ha.k,{showFeesSettingSheet:s,onClose:x,gasError:E})))};function xa(){const[s,i]=(0,e.useState)(new(ae())(1)),[c]=(0,n.fOz)(),{feeDenom:t,feeTokenFiatValue:m,sendActiveChain:f,sendSelectedNetwork:r}=ke(),{lcdUrl:u}=(0,n.U9i)(f,r);return(0,e.useEffect)(()=>{(async function(){switch(f){case"mayachain":{const h=await(0,n.Tti)(u??"");i(new(ae())(h).div(10**t.coinDecimals));break}case"thorchain":{const h=await(0,n.d5w)(u??"");i(new(ae())(h).div(10**t.coinDecimals));break}}})()},[t.coinDecimals,u,f]),e.createElement("div",{className:"flex items-center justify-center text-gray-600 dark:text-gray-400"},e.createElement("p",{className:"font-semibold text-center text-sm"},"Transaction fee: "),e.createElement("p",{className:"font-semibold text-center text-sm ml-1"},e.createElement("strong",{className:"mr-1"},s.toString()," ",t.coinDenom),m?`(${c(s.multipliedBy(m))})`:null))}var Ea=a(726089),ya=a(472415),va=a(138371),ba=a(489062),wa=a(547505),at=a(496402);const Ca=()=>{const[s,i]=(0,e.useState)(!1),[c,t]=(0,e.useState)(),{selectedToken:m,selectedAddress:f,fee:r,inputAmount:u,isIBCTransfer:h,transferData:o,memo:d,sendActiveChain:E,sendSelectedNetwork:I,associatedSeiAddress:l}=ke(),p=(0,n.X82)(),{chains:L}=(0,n._IL)(),{data:w}=(0,Ie.C$)(),{setPendingTx:y}=(0,n.EEe)(),C=(0,et._)(),{walletClient:S}=Mt(E),k=(0,n.FmJ)(),x=n.rNU.useOperateCosmosTx(),[U,B]=(0,e.useState)(!1),D=Le.w.useGetWallet(),ee=(0,n.DI5)(),se=(0,n.SFn)(E),Y=(0,n.xxU)(E,I);return{confirmSkipTx:async()=>{if(!r||!o||!("messages"in o)||!o?.messages||!L){r?!o||!("messages"in o)||!o?.messages?t("Invalid transfer message"):t(L?"Invalid transfer data":"Invalid transfer chains"):t("Invalid transfer fee");return}t(void 0),i(!0);const{messages:K}=o;for(let _=0;_<K.length;_++){const z=K[_]?.multi_chain_msg,A=JSON.parse(z.msg),ve=new Date().getTime();if(Number(A.timeout_timestamp/10**6)<ve){t("Transaction timed out"),i(!1);return}const{senderAddress:ye,encodedMessage:pe}=(0,at.u0)(z.msg_type_url,A),re=pe,ie=w?.find(V=>V.chainId===z.chain_id);if(!ie){t("Chain info is not found");return}let Ce,Ge;try{Ce=await S.getAccount(""),Ge=await S.getSigner(""),Ce?.isNanoLedger&&B(!0)}catch(V){t(V?.message),i(!1);return}let X;const Fe=new at.gO(String(ie.chainId),ie.restUrl,ie.coinType,Ge,Ce);try{if(!xt.F3.includes(ie.key))X=await Fe.sign(ye,[re],r,d);else if(ie.key==="injective"){const V=await D(ie.key),fe=new F.QQ$(!1,V,ie.restUrl),P=(await(0,F.WdH)(ie.restUrl,re.value.sourceChannel,"transfer")).data.identified_client_state.client_state.latest_height,H={revisionHeight:P.revision_height+150,revisionNumber:P.revision_number},Oe={...re,value:{memo:re.value.memo,receiver:re.value.receiver,sender:re.value.sender,amount:re.value.token,height:H,timeout:re.value.timeoutTimestamp,port:re.value.sourcePort,channelId:re.value.sourceChannel}},Be=await fe.signTx(ye,[Oe],r,d);X=wa.gOZ.encode(Be)}else if(ie.key==="dymension"||ie.key==="evmos"){const V=await D(ie.key),fe=new F.c6u(ie.restUrl,V,F.oCA[ie.key].chainId,F.oCA[ie.key].evmChainId),Z=re.value;if(!Z.token)throw new Error("Invalid token");X=await fe.signIbcTx({fromAddress:Z.sender,toAddress:Z.receiver,transferAmount:Z.token,sourcePort:Z.sourcePort,sourceChannel:Z.sourceChannel,timeoutTimestamp:void 0,timeoutHeight:void 0,fee:r,memo:d||"",txMemo:Z.memo})}}catch(V){const fe=V;fe?.message?.includes("rejected")||fe?.message?.includes("declined")?(i(!1),t(fe?.message)):(t(fe?.message),i(!1)),B(!1);return}finally{B(!1)}try{let V="",fe=!1;try{const We=await Fe.submitTx(String(ie.chainId),X);if(fe=We.success,!fe)throw new Error("SubmitTx Failed");V=We.response.tx_hash}catch(We){if(We.message==="SubmitTx Failed"){const{transactionHash:je,code:_e,codespace:qe}=await Fe.broadcastTx(X);if(V=je,_e!==0)throw new Error(`BroadcastTx Failed ${(0,F.f4W)(_e,qe)}`);fe=!0}else throw new Error(`BroadcastTx Failed ${(0,F.f4W)(We.code,We.codespace)}`)}const Z=async()=>{let We=0;const je=100;for(;We<=je;){const _e=await at.xJ.getTxnStatus({chain_id:z.chain_id,tx_hash:V});if(_e.success){const{state:qe,error:ot}=_e.response;if(qe===at._T.STATE_COMPLETED_SUCCESS)return{code:0};if(qe===at._T.STATE_ABANDONED)return{code:0};if(ot?.code)return ot}We+=1,await(0,F._vH)(2e3)}},P=l||f?.address||"",H=m?.coinMinimalDenom||m?.ibcDenom||"",Oe={img:ie.icon,sentAmount:u,sentTokenInfo:{...m,coinDenom:m?.symbol||m?.name},sentUsdValue:"",subtitle1:(0,n.Hnh)(P),title1:`${u} ${m?.symbol||m?.name}`,txStatus:"loading",txType:h?"ibc/transfer":"send",txHash:V,promise:Z(),sourceChain:E,sourceNetwork:I},Be=ee[p[m?.coinMinimalDenom??""]?.chain??""],Et=await(0,n.IGx)(u,{coinGeckoId:p[m?.coinMinimalDenom??""]?.coinGeckoId,coinMinimalDenom:m?.coinMinimalDenom??"",chainId:(0,n.LQk)(Be,I),chain:m?.chain??""}),rt=(0,F.hI1)(u.toString(),m?.coinDecimals??6);let Je=h?await(0,n.V51)(A?.source_channel,P,{denom:H,amount:rt}):(0,n.dSc)(P,{denom:H,amount:rt});Je={...Je,...k},await x({txHash:V,txType:h?n.pb0.IbcSend:n.pb0.Send,amount:Et,metadata:Je,feeDenomination:r?.amount[0]?.denom,feeQuantity:r?.amount[0]?.amount,forceChain:E,forceNetwork:I,forceWalletAddress:se,chainId:Y}),y(Oe),C(fe?"success":"txDeclined")}catch(V){i(!1),V?.message?.includes("insufficient fees")?t("Send failed due to low gas fees. Please try again with higher gas."):t(V?.message);return}}i(!1)},txnProcessing:s,error:c,showLedgerPopupSkipTx:U,setError:t}},Na=({isOpen:s,onClose:i})=>{const[c]=(0,n.fOz)(),t=(0,b.a)(),m=(0,n.DI5)(),f=Le.w.useGetWallet(),r=(0,n.cJs)(),u=(0,n.uVs)(),{memo:h,selectedToken:o,selectedAddress:d,fee:E,showLedgerPopup:I,inputAmount:l,tokenFiatValue:p,isSending:L,txError:w,isIBCTransfer:y,sendDisabled:C,confirmSend:S,confirmSendEth:k,clearTxError:x,userPreferredGasPrice:U,userPreferredGasLimit:B,gasEstimate:D,transferData:ee,isIbcUnwindingDisabled:se,fetchAccountDetailsData:Y,associatedSeiAddress:te,sendActiveChain:K}=ke(),{confirmSkipTx:_,txnProcessing:Q,error:z,showLedgerPopupSkipTx:A,setError:ve}=Ca(),we=(0,e.useMemo)(()=>c(new(ae())(l).multipliedBy(p??0)),[c,l,p]),ye=(0,e.useCallback)(()=>{ve(""),i()},[]),pe=(0,e.useCallback)(async()=>{if(x(),!(!E||!d?.address||!o))try{let re=d.address;const ie=r(o);if(u&&ie&&re.toLowerCase().startsWith(m[K].addressPrefix)&&Y?.pubKey.key&&(re=(0,F.yNR)(Y.pubKey.key)),d.address.toLowerCase().startsWith("0x")&&te&&(re=te),u&&(0,F.Ohs)(re)){const Ce=await f(K,!0);await k(re,l,B??D,Ce,parseInt(String(Number(U?.amount.toString())*10**18)),{isERC20Token:ie,contractAddress:o.coinMinimalDenom,decimals:o.coinDecimals})}else ee?.isSkipTransfer&&!se&&y?_():await S({selectedToken:o,toAddress:te||d?.address||"",amount:new(ae())(l),memo:h,fees:E})}catch(re){(0,Ea.Tb)(re)}},[x,E,d?.address,o,r,u,m,K,te,Y?.pubKey.key,ee?.isSkipTransfer,se,y,f,k,l,B,D,U?.amount,_,S,h]);return(0,ba.X)(w),(I||A)&&!w?e.createElement(va.Z,{showLedgerPopup:I||A}):e.createElement(ze.Z,{isOpen:s,closeOnBackdropClick:!0,onClose:ye,title:"Review Transaction",contentClassName:"!bg-white-100 dark:!bg-gray-950",className:"p-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement("div",{className:"w-full flex items-center gap-2 p-4 rounded-2xl bg-gray-50 dark:bg-gray-900"},e.createElement("div",{className:"flex flex-col flex-1 items-center"},e.createElement(M.Avatar,{avatarImage:o?.img??t,chainIcon:m?.[K]?.chainSymbolImageUrl,size:"sm",avatarOnError:(0,ue._)(t),className:"mb-4 bg-gray-100 dark:bg-gray-850 rounded-full p-2 !h-11 !w-11"}),e.createElement("p",{className:"text-sm text-black-100 dark:text-white-100 font-bold mb-1","data-testing-id":"send-review-sheet-inputAmount-ele"},(0,n.LHZ)(l,o?.symbol??"")),e.createElement("p",{className:"text-xs text-gray-800 dark:text-gray-200 font-medium"},we," \xB7 on ",m?.[K]?.chainName)),e.createElement("div",{className:"material-icons-round !text-md text-black-100 dark:text-white-100 bg-gray-100 dark:bg-gray-850 rounded-full p-[6px]"},"arrow_forward"),e.createElement("div",{className:"flex flex-col flex-1 items-center"},e.createElement(M.Avatar,{avatarImage:d?.avatarIcon,emoji:d?.emoji,chainIcon:d?.chainIcon,size:"sm",avatarOnError:(0,ue._)(t),className:"mb-4 bg-gray-100 dark:bg-gray-850 rounded-full p-2 !h-11 !w-11"}),e.createElement("p",{className:"text-sm text-black-100 dark:text-white-100 font-bold mb-1","data-testing-id":"send-review-sheet-to-ele"},d?.ethAddress&&d?.chainName!=="injective"?(0,n.Hnh)(d.ethAddress):d?.selectionType==="currentWallet"?d?.name?.split("-")[0]:d?.name),e.createElement("p",{className:"text-xs text-gray-800 dark:text-gray-200 font-medium"},"on ",F.oCA?.[d?.chainName]?.chainName," ",e.createElement("br",null)))),h?e.createElement("div",{className:"w-full flex items-baseline gap-4 p-4 rounded-2xl bg-gray-50 dark:bg-gray-900"},e.createElement("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-bold"},"Memo"),e.createElement("p",{className:"font-medium text-md text-black-100 dark:text-white-100"},h)):null,e.createElement(M.Buttons.Generic,{color:T.w.green600,size:"normal",title:"Send",className:"w-full mt-2",onClick:pe,disabled:I||L||C||Q,"data-testing-id":"send-review-sheet-send-btn"},L||Q?"Sending...":"Confirm Send"),w||z?e.createElement(ya._,{text:w||z}):null))},Sa=()=>{const s=Le.w.useGetWallet(),[i,c]=(0,e.useState)(!1),[t,m]=(0,e.useState)(!1),{sendDisabled:f,clearTxError:r,fee:u,inputAmount:h,setInputAmount:o,selectedToken:d,addressWarning:E,setAddressWarning:I,setGasError:l,selectedAddress:p,setTransferData:L,pfmEnabled:w,isIbcUnwindingDisabled:y,isIBCTransfer:C,fetchAccountDetailsStatus:S,amountError:k,addressError:x,sendActiveChain:U,sendSelectedNetwork:B}=ke(),{addressLinkState:D,updateAddressLinkState:ee}=(0,n.uaF)(s),{chains:se}=(0,n._IL)(),Y=(0,n.SFn)(U),{walletClient:te}=Mt(U),K=(0,ma.G)(),_=da(h),Q=(0,Ie.cF)(_,500),{data:z}=(0,Ie.C$)(),{data:A}=(0,n.S2A)(),ve=(0,e.useRef)(null),[we,ye]=(0,e.useState)(""),[pe,re]=(0,e.useState)(""),ie={denom:(d?.ibcDenom||d?.coinMinimalDenom)??"",symbol:d?.symbol||"",logoUri:d?.img||"",decimals:d?.coinDecimals||0,originDenom:d?.coinMinimalDenom||"",denomTracePath:d?.ibcChainInfo?`transfer/${d.ibcChainInfo?.channelId}`:""},Ce=(0,Ie.DA)({amount:Q,asset:ie,destinationChain:z?.find(Z=>Z.chainId===se[p?.chainName]?.chainId),destinationAddress:p?.address,sourceChain:z?.find(Z=>Z.chainId===se[U].chainId),userAddress:Y??"",walletClient:te,enabled:C&&A?.ibc?.extension!=="disabled",isMainnet:B==="mainnet"});(0,e.useEffect)(()=>{Ce?.messages?L(Ce):L({isSkipTransfer:!1,isGasFeesLoading:!1,gasFees:void 0,gasFeesError:void 0})},[d?.coinMinimalDenom,p?.chainName,Ce?.messages]);const Ge=(0,e.useMemo)(()=>k?k.includes("IBC transfers are not supported")?"Select different chain or address":k.includes("You can only send this token to a SEI address")?"Address not supported":k:x?x==="The entered address is invalid"?"Invalid address":x.includes("IBC transfers are not supported")?"Select different chain or address":x:E.type==="link"&&D==="success"?"Addresses linked successfully":E.type==="link"&&!["done","unknown"].includes(D)?A?.link_evm_address?.extension==="redirect"?e.createElement("span",{className:"flex items-center gap-1"},"Link Addresses",e.createElement("span",{className:"!leading-[20px] !text-lg material-icons-round"},"open_in_new")):"Link Addresses":"Review Transfer",[x,D,E.type,k,A?.link_evm_address?.extension]),X=async()=>{if(A?.link_evm_address?.extension==="redirect"){const Z=await(0,n.auI)({activeNetwork:B,activeChain:U,infoType:n.SGB.NO_FUNDS_DAPP_LINK});window.open(Z,"_blank")}else if(A?.link_evm_address?.extension==="no-funds")try{const Z=await ve.current?.execute({async:!0});if(!Z){ye("Could not get hCaptcha response. Please try again.");return}await ee({setError:l,ethAddress:K[0],token:Z.response,setShowLoadingMessage:re})}catch{ye("Failed to verify captcha. Please try again.")}else await ee({setError:l,ethAddress:K[0]});I(n.wL6)},Fe=(0,e.useCallback)(()=>{m(!0)},[]),V=(0,e.useCallback)(()=>{m(!1)},[]),fe=(0,e.useMemo)(()=>E.type==="link"?["loading","success"].includes(D)||A?.link_evm_address?.extension==="disabled":f||!w&&!y||["error","loading"].includes(S),[D,E.type,A?.link_evm_address?.extension,S,y,w,f]);return e.createElement(e.Fragment,null,e.createElement("div",{className:"absolute w-full flex flex-col gap-4 p-4 bottom-0 left-0 dark:bg-black-100 bg-gray-50"},h&&(ge.Vv.includes(U)?e.createElement(xa,null):e.createElement(pa,null)),A?.link_evm_address?.extension==="no-funds"&&E.type==="link"&&!["done","unknown"].includes(D)?e.createElement("form",null,e.createElement(ia.Z,{ref:ve,sitekey:"MISSING_ENV_VAR".LINK_ADDRESS_HCAPTCHA_SITE_KEY??"",size:"invisible",theme:"dark"})):null,e.createElement(M.Buttons.Generic,{size:"normal",color:x||k?T.w.red300:T.w.green600,onClick:E.type==="link"&&!["done","unknown"].includes(D)?X:Fe,disabled:fe,"data-testing-id":"send-review-transfer-btn",className:"w-full"},E.type==="link"&&D==="loading"?e.createElement(Xe.T,{color:T.w.white100}):Ge),we?e.createElement("p",{className:"text-red-300 text-center mt-4"},we):null,pe?e.createElement("p",{className:"text-yellow-600 text-center mt-4"},pe):null),d&&u&&t?e.createElement(ca.K,{amount:h,setAmount:o,selectedToken:d,fee:u.amount[0],setShowReviewSheet:c,closeAdjustmentSheet:V,forceChain:U,forceNetwork:B}):null,e.createElement(Na,{isOpen:i,onClose:()=>{c(!1),r()}}))},Pt=e.memo(()=>{(0,G.a)(Ne.q.Send);const s=(0,he.s0)(),i=(0,he.TH)(),c=(0,ne.p)(),t=(0,n.a74)(),m=(0,Se.N8)(),{refetchBalances:f}=(0,n.zSw)(),[r,u]=(0,e.useState)(!1),{headerChainImgSrc:h,topChainColor:o}=(0,W.Cd)(),[d,E]=(0,e.useState)([]),[I,l]=(0,e.useState)(!0),p=(0,$.Z)().get("chainId")??void 0,L=(0,oe._)();return(0,e.useEffect)(()=>{f()},[]),(0,e.useEffect)(()=>{if(p){const w=Object.values(c).find(y=>y.chainId===p)?.key;w&&m(w)}},[p,c]),e.createElement("div",null,e.createElement(g.E.div,{className:"relative h-full w-full"},e.createElement(j.Z,{header:e.createElement(M.Header,{action:{onClick:()=>s(-1),type:M.HeaderActionType.BACK},imgSrc:h,onImgClick:L?void 0:()=>u(!0),title:i.pathname==="/ibc"?"IBC":"Send"})},t===ge.HW?e.createElement(e.Fragment,null,e.createElement(Me,{setAllAssets:E,setIsAllAssetsLoading:l}),e.createElement(Te,null)):e.createElement(Pe,{setAllAssets:E,setIsAllAssetsLoading:l}),e.createElement(Ct,{activeChain:t},e.createElement("div",{className:"p-4 space-y-4 overflow-y-auto",style:{height:"calc(100% - 72px)"}},e.createElement(Ee,{allAssets:d,isAllAssetsLoading:I}),e.createElement(la,{themeColor:o}),e.createElement(Gt,null),e.createElement(Kt,null),e.createElement("div",{className:"h-[100px]"}),e.createElement(Sa,null))),e.createElement(J.Z,{isVisible:r,onClose:()=>u(!1)}))))});Pt.displayName="Send";const ka=Pt},374227:(Ke,be,a)=>{"use strict";a.d(be,{$:()=>Ne});var n=a(564510),M=a(121273),j=a.n(M);class Ne{constructor(g){this.address=g}static shortenAddress(g,W){if(W>=g.length)return g;const G=g.indexOf("1"),Se=g.slice(0,G),ne=g.slice(G+1);if(W-=Se.length,W-=3,W-=1,W<=0)return"";const oe=Math.floor(ne.length/2);let $=ne.slice(0,oe),J=ne.slice(oe);for(;W<$.length+J.length;)($.length+J.length)%2===1&&$.length>0?$=$.slice(0,$.length-1):J=J.slice(1);return Se+"1"+$+"..."+J}static fromBech32(g,W){const G=j().decode(g);if(W&&G.prefix!==W)throw new Error("Unmatched prefix");return new Ne(new Uint8Array((0,M.fromWords)(G.words)))}static validate(g,W){const{prefix:G}=j().decode(g);if(W&&W!==G)throw new Error(`Unexpected prefix (expected: ${W}, actual: ${G})`)}static getChainKey(g){try{const{prefix:W}=j().decode(g),G=n.BU_[W];return G==="cosmoshub"?"cosmos":G}catch{return}}toBech32(g){const W=j().toWords(this.address);return j().encode(g,W)}}},150633:()=>{}}]);
