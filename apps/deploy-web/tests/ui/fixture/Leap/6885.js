"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[6885],{608899:(Ge,oe,i)=>{i.d(oe,{h:()=>w});var E=i(339279),Ee=i(395516),ge=i(892742),xe=i(532833),fe=i(656687),pe=i(681),$=i(701743),e=i(202784);function w({title:Ae,bottomNavLabel:L}){const[Se,ce]=(0,e.useState)(!1),[te,z]=(0,e.useState)(!1),{headerChainImgSrc:he}=(0,xe.Cd)(),ie=(0,fe._)();return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement($.ZP,{isShown:Se,toggler:()=>ce(!Se)}),e.createElement(ge.Z,{header:e.createElement(E.Header,{action:{onClick:function(){ce(!0)},type:E.HeaderActionType.NAVIGATION,className:"w-[48px] h-[40px] px-3 bg-[#FFFFFF] dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full"},imgSrc:he,onImgClick:ie?void 0:()=>z(!0),title:Ae})},e.createElement("div",{className:"h-[475px] px-4 flex flex-col items-center justify-center text-center gap-[4px]"},e.createElement("div",{className:"relative"},e.createElement("span",{className:"absolute w-[200px] h-[100px] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ml-[0.3rem]",style:{boxShadow:"2px -2px 4.5rem 1.5rem #28ba5b",borderRadius:"100% 100% 0 0"}}),e.createElement("img",{className:"z-[1] relative",src:"https://assets.leapwallet.io/frog-coming-soon.png",alt:"frog-coming-soon"})),e.createElement("h3",{className:"dark:text-white-100 font-bold text-[24px]"},"Coming soon"),e.createElement("p",{className:"text-gray-400 text-[16px] font-medium"},"We're working on it. Or perhaps the chain is...",e.createElement("br",null),"Either way, this page is coming soon!"))),e.createElement(pe.Z,{isVisible:te,onClose:()=>z(!1)}),e.createElement(Ee.Z,{label:L}))}},489062:(Ge,oe,i)=>{i.d(oe,{X:()=>pe});var E=i(964266),Ee=i(726089),ge=i(202784);const xe="was submitted but was not yet found on the chain. You might want to check later. There was a wait of 60 seconds.",fe="Reward is too low";function pe($){const{rpcUrl:e}=(0,E.U9i)();(0,ge.useEffect)(()=>{if($){if($.includes(xe)||$.includes(fe)||$.includes("You don't have enough"))return;Ee.Tb(`${$} - node: ${e}`)}},[$,e])}},106885:(Ge,oe,i)=>{i.r(oe),i.d(oe,{default:()=>Qt});var E=i(964266),Ee=i(395516),ge=i(608899),xe=i(910416),fe=i(389320),pe=i(830911),$=i(890707),e=i(202784),w=i(339279),Ae=i(294184),L=i.n(Ae),Se=i(198652),ce=i(754699),te=i(892742),z=i(508181),he=i(681),ie=i(410289),Ue=i(550166);const Nt={60:18,118:6,529:6,750:6,394:8,234:6,564:6,852:6,639:6,459:6,330:6,990:6,931:6,4444:6,505:9,494:6};function ke(t){let a=t,l=Math.floor(a/3600);l>=1?a=a-l*3600:l="00";let n=Math.floor(a/60);return n>=1?a=a-n*60:n="00",a<1&&(a="00"),n.toString().length==1&&(n="0"+n),a.toString().length==1&&(a="0"+a),l+":"+n+":"+a}function je(t,a,l){if(!a)return!0;const n=a.trim().toLowerCase();return!!((t.chain?l[t.chain].chainName:"").toLowerCase().includes(n)||(t?.title??t?.content?.title??"").toLowerCase().includes(n)||t.proposal_id.toString().includes(n)||t.status.toLowerCase().includes(n))}function ae(t,a){return a===0?"0%":`${Number(t/a*100).toFixed(2)}%`}function Fe(t,a,l){const n=t.chain??"cosmos",o=a.chain??"cosmos",r=l[n].chainName,d=l[o].chainName;return r.localeCompare(d)}var X=i(564510),Ce=i(726089),De=i(863262),ve=i(128844),W=i(610675),k=(t=>(t.YES="Yes",t.NO="No",t.NO_WITH_VETO="No with Veto",t.ABSTAIN="Abstain",t))(k||{});const bt=[{label:"Yes",icon:"thumb_up",selectedCSS:"text-white-100 bg-green-600"},{label:"No",icon:"thumb_down",selectedCSS:"text-white-100 bg-red-300"},{label:"No with Veto",icon:"thumb_down",selectedCSS:"text-white-100 bg-indigo-300"},{label:"Abstain",icon:"block",selectedCSS:"text-white-100 bg-yellow-600"}];function yt({onSubmitVote:t,setShowFeesSettingSheet:a,setRecommendedGasLimit:l,proposalId:n,setGasLimit:o,feeDenom:r,forceChain:d,forceNetwork:u}){const s=(0,E.a74)(),x=(0,e.useMemo)(()=>d||s,[s,d]),c=(0,E.obn)(),f=(0,e.useMemo)(()=>u||c,[c,u]),h=(0,E.dju)(x,f),b=(0,e.useRef)(!0),[O,C]=(0,e.useState)(!0),[T,y]=(0,e.useState)(void 0);return(0,e.useEffect)(()=>{let g=!1;return(async()=>{try{const m=(0,X.f3G)(r.coinMinimalDenom),A=await h({proposalId:n,voteOption:"Yes",fee:m});if(A!==null&&!g){const P=A.gasUsed.toString();l(P),b.current&&(o(P),b.current=!1)}}catch{}finally{C(!1)}})().catch(Ce.Tb),()=>{g=!0}},[r.coinMinimalDenom,n,h]),e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-col items-center gap-4"},bt.map(g=>e.createElement("button",{key:g.label,onClick:()=>y(g.label),className:L()("flex w-[344px] p-4 rounded-2xl cursor-pointer",{"dark:text-gray-200 dark:bg-gray-900 text-gray-600 bg-white-100":T!==g.label,[g.selectedCSS]:T===g.label})},e.createElement("span",{className:"material-icons-round mr-3"},g.icon),e.createElement("span",{className:"text-base font-bold dark:text-white-100"},g.label)))),O?e.createElement("div",{className:"flex justify-center"},e.createElement(ve.T,{color:W.w.getChainColor(x)})):e.createElement(De.a,{className:"mt-4",setShowFeesSettingSheet:a}),e.createElement(w.Buttons.Generic,{color:W.w.getChainColor(x),size:"normal",className:"w-[344px] py-3 mt-4",disabled:!T||O,onClick:()=>t(T)},e.createElement("div",{className:"flex justify-center text-white-100 items-center"},e.createElement("span",null,"Submit"))))}const K={[k.YES]:"dark:border-green-800 border-green-300",[k.ABSTAIN]:"dark:border-gray-800 border-gray-200",[k.NO]:"dark:border-red-800 border-red-300",[k.NO_WITH_VETO]:"dark:border-red-800 border-red-300",GENERAL:"dark:border-gray-800 border-gray-200"},Q={[k.YES]:"bg-green-600/20",[k.ABSTAIN]:"bg-gray-600/20",[k.NO]:"bg-red-600/20",[k.NO_WITH_VETO]:"bg-red-600/20",GENERAL:"bg-gray-600/20"};function Be(t){const a=Number(t.yes),l=Number(t.no),n=Number(t.no_with_veto??0),o=Number(t.abstain),r=Math.max(a+l+o+n,1),d=a/r*100,u=l/r*100,s=n/r*100,x=o/r*100,c=Math.max(d,u,s,x,1);return[{label:k.YES,percentage:d,selectedBorderCSS:d===c?K[k.YES]:K.GENERAL,selectedBackgroundCSS:d===c?Q[k.YES]:Q.GENERAL,isMajor:d===c},{label:k.NO,percentage:u,selectedBorderCSS:u===c?K[k.NO]:K.GENERAL,selectedBackgroundCSS:u===c?Q[k.NO]:Q.GENERAL,isMajor:u===c},{label:k.NO_WITH_VETO,percentage:s,selectedBorderCSS:s===c?K[k.NO_WITH_VETO]:K.GENERAL,selectedBackgroundCSS:s===c?Q[k.NO_WITH_VETO]:Q.GENERAL,isMajor:s===c},{label:k.ABSTAIN,percentage:x,selectedBorderCSS:x===c?K[k.ABSTAIN]:K.GENERAL,selectedBackgroundCSS:x===c?Q[k.ABSTAIN]:Q.GENERAL,isMajor:x===c}]}var ne=i(240483),Pe=i(608740),Ze=i(595196),Re=i(489062),$e=i(244876),We=i(998073),Ne=(t=>(t.YES="Yes",t.NO="No",t.NO_WITH_VETO="No with Veto",t.ABSTAIN="Abstain",t))(Ne||{});const Oe=(t,a)=>a===!0?t?.proposal?.title:t?.title,me=(t,a)=>a===!0?t?.proposal?.status:t?.status,be=(t,a)=>a===!0?t?.id:t?.proposal_id,wt=(t,a,l)=>l===!0?a/t?.proposal?.total_power*100:t?.turnout,Ct=(t,a)=>a===!0?t?.proposal?.threshold?.threshold_quorum?.quorum?.percent*100:t?.quorum,He=(t,a)=>a===!0?t?.proposal?.description:t?.description,Ye=(t,a)=>a===!0?Math.ceil(t?.proposal?.expiration?.at_time/10**6):t?.voting_end_time,Pt=(t,a)=>a===!0?t?.proposal?.votes:t?.tally,Le=(t,a)=>a===!0?t?.proposal?.proposer:t?.proposer?.address,_e=$e.w.useGetWallet,Ot=[{label:Ne.YES,icon:"thumb_up",selectedCSS:"text-white-100 bg-green-600"},{label:Ne.NO,icon:"thumb_down",selectedCSS:"text-white-100 bg-red-300"},{label:Ne.ABSTAIN,icon:"block",selectedCSS:"text-white-100 bg-yellow-600"}];function Tt({proposalId:t,isOpen:a,setShowFeesSettingSheet:l,onCloseHandler:n,onSubmitVote:o,showFeesSettingSheet:r,gasError:d,forceChain:u,simulateNtrnVote:s}){const[x,c]=(0,e.useState)(void 0),f=(0,E.a74)(),h=(0,e.useMemo)(()=>u||f,[f,u]),b=_e(u),[O,C]=(0,e.useState)(""),[T,y]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{t&&x&&(async()=>{try{y(!0);const g=await b();await s(g,Number(t),x)}catch(g){C(g.message)}finally{y(!1)}})()},[t,x]),(0,Re.X)(O),e.createElement(ne.Z,{isOpen:a,onClose:n,title:"Cast your Vote",closeOnBackdropClick:!0},e.createElement("div",{className:"flex flex-col items-center gap-4"},Ot.map(g=>e.createElement("button",{key:g.label,onClick:()=>c(g.label),className:L()("flex w-[344px] p-4 rounded-2xl cursor-pointer",{"dark:text-gray-200 dark:bg-gray-900 text-gray-600 bg-white-100":x!==g.label,[g.selectedCSS]:x===g.label})},e.createElement("span",{className:"material-icons-round mr-3"},g.icon),e.createElement("span",{className:"text-base font-bold dark:text-white-100"},g.label)))),e.createElement(De.a,{className:"mt-4",setShowFeesSettingSheet:l}),d&&!r?e.createElement("p",{className:"text-red-300 text-sm font-medium mt-2 text-center"},d):null,e.createElement(w.Buttons.Generic,{color:W.w.getChainColor(h),size:"normal",className:"w-[344px] py-3 mt-4",disabled:!x||!!d||T,onClick:()=>o(x)},T?e.createElement(ve.T,{color:W.w.white100}):"Approve"))}function At({proposalId:t,refetchVote:a,showCastVoteSheet:l,setShowCastVoteSheet:n,className:o,forceChain:r,forceNetwork:d}){const u=_e(r),s=(0,Pe.e7)({activeChain:r,selectedNetwork:d}),x=(0,We._)(),{setFeeDenom:c,userPreferredGasPrice:f,userPreferredGasLimit:h,setGasOption:b,gasOption:O,gasEstimate:C,setUserPreferredGasLimit:T,setUserPreferredGasPrice:y,clearTxError:g,txError:S,memo:m,setMemo:A,isVoting:P,handleVote:p,simulateNtrnVote:N}=(0,E.k5N)(r,d),[V,U]=(0,e.useState)(void 0),[j,F]=(0,e.useState)(!1),[D,I]=(0,e.useState)(null),[Y,de]=(0,e.useState)({option:E.j1p.LOW,gasPrice:f??s.gasPrice}),R=(0,e.useCallback)((J,Te)=>{de(J),c(Te.denom)},[c]);(0,e.useEffect)(()=>{de({option:O,gasPrice:s.gasPrice})},[s.gasPrice]),(0,e.useEffect)(()=>{b(Y.option),y(Y.gasPrice)},[Y,b,y]);const B=(0,e.useCallback)(()=>{U(void 0),n(!1),g()},[g,n]),Z=async()=>{g();try{const J=await u();return await p({wallet:J,callback:x,voteOption:V,proposalId:Number(t)}),!0}catch{return!1}};return e.createElement("div",{className:L()("",o)},e.createElement(Pe.ZP,{recommendedGasLimit:C.toString(),gasLimit:h?.toString()??C.toString(),setGasLimit:J=>T(Number(J.toString())),gasPriceOption:Y,onGasPriceOptionChange:R,error:D,setError:I,chain:r,network:d},e.createElement(Tt,{proposalId:t,isOpen:l,setShowFeesSettingSheet:F,onCloseHandler:()=>n(!1),onSubmitVote:U,showFeesSettingSheet:j,gasError:D??"",simulateNtrnVote:N,forceChain:r}),e.createElement(Ze.k,{showFeesSettingSheet:j,onClose:()=>F(!1),gasError:D}),e.createElement(It,{isOpen:V!==void 0,proposalId:t,error:S,loading:P,memo:m,setMemo:A,selectedVote:V,onSubmitVote:Z,refetchCurrVote:a,onCloseHandler:B,gasOption:Y.option,forceChain:r})))}var ze=i(360431),Xe=i(722912),Je=i(141668),se=i(94608),kt=i(727484),q=i.n(kt),Dt=i(121606),Ie=i(905865),H=i(14080),Ke=i(800693),Qe=i(861111),G=(t=>(t.OPEN="open",t.EXECUTED="executed",t.PASSED="passed",t.REJECTED="rejected",t))(G||{});function qe({status:t}){switch(t){case"open":case v.PROPOSAL_STATUS_IN_PROGRESS:case v.PROPOSAL_STATUS_VOTING_PERIOD:return e.createElement("span",{className:"font-semibold  dark:text-orange-300 text-orange-600"},"In Progress");case"passed":case"executed":case v.PROPOSAL_STATUS_PASSED:case v.PROPOSAL_STATUS_EXECUTED:return e.createElement("span",{className:"font-semibold text-green-600 dark:text-green-300"},"Executed");case v.PROPOSAL_STATUS_FAILED:case v.PROPOSAL_STATUS_REJECTED:case"rejected":return e.createElement("span",{className:"font-semibold text-red-300"},"Rejected");default:return e.createElement("span",{className:"font-semibold text-gray-400"},"Unspecified")}}function Rt({proposal:t,onVote:a,currVote:l,isLoading:n,shouldUseFallback:o,forceChain:r}){const[d,u]=(0,e.useState)(),s=(0,E.a74)(),x=(0,e.useMemo)(()=>r||s,[s,r]);switch((0,e.useEffect)(()=>{const f=setInterval(()=>{const h=q()(),O=q()(Ye(t,o)).diff(h,"seconds");u(ke(O))},1e3);return()=>clearInterval(f)},[t,o]),me(t,o)){case G.OPEN:case v.PROPOSAL_STATUS_IN_PROGRESS:case v.PROPOSAL_STATUS_VOTING_PERIOD:return e.createElement(e.Fragment,null,e.createElement("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4"},e.createElement("div",{className:"flex items-center justify-between gap-3 p-4"},e.createElement("div",{className:"text-black-100 dark:text-white-100 text-base font-bold"},"Voting Ends"),e.createElement("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold"},q()(Ye(t,o)).format("MMM DD, YYYY"))),e.createElement("div",{className:"px-4 pb-4 text-xs text-gray-600 dark:text-gray-200 min-h-[32px]"},d&&`Ending in ${d}`)),n?e.createElement("div",{className:"rounded-2xl mt-4 h-18 w-full p-4 flex bg-white-100 dark:bg-gray-900"},e.createElement(H.Z,{count:1,className:"rounded-full mt-4 h-10 w-10"}),e.createElement("div",{className:"ml-3 w-full"},e.createElement(H.Z,{count:1,className:"h-6"}),e.createElement(H.Z,{count:1,className:"h-5"}))):null,l&&l!=="NO_VOTE"&&e.createElement("div",{className:L()("flex p-4 w-[344px] mt-4 dark:bg-green-900 bg-green-300 border-2 dark:border-green-800 border-green-600 rounded-2xl")},e.createElement("div",{className:"h-10 w-10 bg-green-400 rounded-full flex items-center justify-center"},e.createElement("span",{className:"material-icons-round text-green-700"},"thumb_up")),e.createElement("div",{className:"flex flex-col justify-center items-start px-3"},e.createElement("div",{className:"text-base text-white-100 text-left"},"Vote submitted"),e.createElement("div",{className:"text-sm text-gray-600 font-medium"},"Voted ",l.toUpperCase()))),e.createElement(w.Buttons.Generic,{color:W.w.getChainColor(x),size:"normal",className:"w-[344px] py-4 mt-4",onClick:()=>a()},e.createElement("div",{className:"flex justify-center text-white-100 items-center"},e.createElement("span",{className:"mr-2 material-icons-round"},"how_to_vote"),e.createElement("span",null,"Vote"))));case G.EXECUTED:case G.PASSED:case G.REJECTED:case v.PROPOSAL_STATUS_PASSED:case v.PROPOSAL_STATUS_EXECUTED:case v.PROPOSAL_STATUS_FAILED:case v.PROPOSAL_STATUS_REJECTED:return e.createElement("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4"},e.createElement("div",{className:"flex items-center gap-3 p-4"},e.createElement("div",{className:"text-gray-600 w-[200px] dark:text-gray-200 text-xs font-bold"},"Results"),e.createElement("div",{className:"text-gray-600 dark:text-gray-200 text-xs font-bold"})),e.createElement("div",{className:"flex flex-col justify-center gap-3 p-4"},Be(Pt(t,o)).filter(c=>c.label!==Ne.NO_WITH_VETO).map(c=>e.createElement("div",{key:c.label,className:"flex rounded-2xl relative overflow-clip"},e.createElement("div",{className:L()("text-black-100 dark:text-white-100 w-52 font-bold py-2 border-y-2 border-l-2 rounded-l-2xl z-10",c.selectedBorderCSS)},e.createElement("span",{className:"ml-4 max-h-10"},c.label)),e.createElement("div",{className:L()("w-full text-black-100 py-[10px] dark:text-white-100 border-y-2 border-r-2 rounded-r-2xl",c.selectedBorderCSS)},e.createElement("span",{className:"absolute right-4 font-bold"},c.percentage.toFixed(2))),e.createElement("div",{style:{width:(c.percentage*3.12).toString()+"px"},className:L()("h-10 absolute l-0 m-[2px] rounded-2xl",c.selectedBackgroundCSS)})))))}return e.createElement(e.Fragment,null)}function et({selectedProp:t,onBack:a,proposalList:l,shouldUseFallback:n,forceChain:o,forceNetwork:r}){const{chains:d}=(0,E._IL)(),u=(0,E.a74)(),s=(0,e.useMemo)(()=>o||u,[u,o]),x=(0,Dt.ob)(),c=(0,e.useMemo)(()=>r||x,[x,r]),f=(0,E.SFn)(s),h=d[s],{rpcUrl:b,txUrl:O}=(0,E.U9i)(s,c),C=(0,Ie.a)(),[T,y]=(0,e.useState)(!1),g=(0,e.useMemo)(()=>l.find(D=>(n?D.id:D.proposal_id)===t),[l,t,n]),{abstain:S,yes:m,no:A}=n?g.proposal.votes:g.tally,P=[m,A,S].reduce((D,I)=>D+Number(I),0),p=(0,e.useMemo)(()=>[G.OPEN,v.PROPOSAL_STATUS_IN_PROGRESS,v.PROPOSAL_STATUS_VOTING_PERIOD].includes(me(g,n)),[g,n]),N=(0,e.useMemo)(()=>P?[{title:"YES",value:+m,color:"#29A874",percent:ae(+m,P)},{title:"NO",value:+A,color:"#FF707E",percent:ae(+A,P)},{title:"Abstain",value:+S,color:"#D1A700",percent:ae(+S,P)}]:[{title:"loading",value:1,color:"#ccc",percent:"0%"}],[S,A,P,m]),V=(0,e.useMemo)(()=>[{label:"Turnout",value:wt(g,P,n)},{label:"Quorum",value:Ct(g,n)}],[g,n,P]),{data:U,refetch:j,isLoading:F}=(0,ze.useQuery)(["neutron-currVote",s,f,t,b],async function(){try{const{data:D}=await Xe.Z.post(`https://api.leapwallet.io/gov/vote/${h.chainId}/${t}`,{userAddress:f});return{vote:D}}catch{return await(0,X.Jk_)(b??"",Number(t??""),f)}},{retry:D=>D<=2,enabled:p&&!!b});return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement(te.Z,null,e.createElement(w.Header,{action:{onClick:a,type:w.HeaderActionType.BACK},title:"Proposal"}),e.createElement("div",{className:"flex flex-col py-6 px-7 max-h-[520px] overflow-y-scroll"},e.createElement("div",{className:"text-gray-600 dark:text-gray-200 text-sm mb-1"},"#",be(g,n)," \xB7"," ",e.createElement(qe,{status:me(g,n)})),e.createElement("div",{className:"text-black-100 dark:text-white-100 font-bold text-xl break-words"},Oe(g,n)),e.createElement(Rt,{proposal:g,onVote:()=>y(!0),currVote:U?.vote,isLoading:F,shouldUseFallback:n,forceChain:o}),e.createElement("div",{className:"my-8"},e.createElement(w.LineDivider,{size:"sm"})),P&&e.createElement(e.Fragment,null,e.createElement("div",{className:"w-full h-full flex items-center justify-center mb-8"},e.createElement("div",{className:"w-[180px] h-[180px] flex items-center justify-center relative"},e.createElement(Ke.PieChart,{data:N,lineWidth:20}),e.createElement("p",{className:"text-md dark:text-white-100 text-dark-gray font-bold absolute"},"Current Status"))),e.createElement(gt,{dataMock:N,chain:h}),e.createElement(xt,{tallying:V})),p&&e.createElement("div",{className:"rounded-2xl mt-6 h-18 w-full p-4 flex items-center justify-between roundex-xxl bg-white-100 dark:bg-gray-900"},e.createElement("div",{className:"flex items-center"},e.createElement("div",{style:{backgroundColor:"#FFECA8",lineHeight:28},className:"relative h-10 w-10 rounded-full flex items-center justify-center text-lg"},e.createElement("span",{className:"leading-none"},"\u{1F464}"),e.createElement("img",{src:h.chainSymbolImageUrl??C,onError:(0,Qe._)(C),alt:"chain logo",width:"16",height:"16",className:"rounded-full absolute bottom-0 right-0"})),e.createElement("div",{className:"flex flex-col ml-3"},e.createElement(se.Z,{size:"md",color:"font-bold dark:text-white-100 text-gray-800"},"Proposer"),e.createElement(se.Z,{size:"xs",color:"font-medium text-gray-400"},`${Le(g,n).slice(0,5)}...${Le(g,n).slice(-6)}`))),e.createElement("button",{className:"flex items-center justify-center px-1",onClick:()=>window.open(`${O?.replace("txs","account")}/${Le(g,n)}`,"_blank")},e.createElement("span",{className:"material-icons-round text-gray-400 text-[18px]"},"open_in_new"))),e.createElement("div",{className:"my-8"},e.createElement(w.LineDivider,{size:"sm"})),He(g,n)&&e.createElement(Je.r,{description:He(g,n),title:"Description",btnColor:W.w.getChainColor(s,h),forceChain:o})),e.createElement(At,{refetchVote:j,proposalId:be(g,n),showCastVoteSheet:T,setShowCastVoteSheet:y,forceChain:o,forceNetwork:r})))}var tt=i(182825),at=i(637299);function nt(){return e.createElement("div",{className:"flex-1 p-4 min-w-[344px]"},e.createElement(H.Z,{count:3}))}var st=i(372149),rt=i(712878);const lt=[{key:"all",label:"All Proposals"},{key:G.OPEN,label:"In Progress"},{key:G.EXECUTED,label:"Executed"},{key:G.REJECTED,label:"Rejected"}];function Lt({proposalList:t,proposalListStatus:a,onClick:l,shouldPreferFallback:n}){const[o,r]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1),[s,x]=(0,e.useState)(""),[c,f]=(0,e.useState)("all"),h=(0,st.p)(),b=(0,E.a74)(),O=(0,Ie.a)(),C=(0,ie.s0)(),T=a==="loading",y=h[b],g=(0,e.useMemo)(()=>t?.reduce((S,m)=>(c==="all"?s?(Oe(m,n??!1).toLowerCase().includes(s)||String(m.id)===s)&&S.push(m):S.push(m):(!s&&me(m,n??!1)===c||me(m,n??!1)===c&&(Oe(m,n??!1).toLowerCase().includes(s)||String(m.id)===s))&&S.push(m),S),[]),[t,c,s,n]);return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement(te.Z,{header:e.createElement(w.Header,{action:{onClick:()=>C(-1),type:w.HeaderActionType.BACK},imgSrc:y.chainSymbolImageUrl??O,onImgClick:()=>r(!0),title:"Governance"})},e.createElement(tt.h,null),e.createElement("div",{className:"w-full flex flex-col pt-6 pb-2 px-7 "},e.createElement("div",{className:"text-[28px] text-black-100 dark:text-white-100 font-bold"},"Proposals"),e.createElement("div",{className:"text-sm text-gray-600 font-bold"},"List of proposals in ",b.toUpperCase()),e.createElement("div",{className:"flex items-center justify-between mt-6 mb-4"},e.createElement(at.M,{placeholder:"Search proposals...",onChange:S=>x(S.currentTarget.value.toLowerCase()),value:s,onClear:()=>x(""),inputClassName:"flex flex-grow text-base text-gray-600 dark:text-gray-200 outline-none bg-white-0",divClassName:"w-full flex h-10 bg-white-100 dark:bg-gray-900 rounded-[30px] py-2 pl-5 pr-[10px]"}),e.createElement("button",{className:"flex items-center justify-center h-10 bg-white-100 dark:bg-gray-900 rounded-full w-10 m-w-10 ml-3",style:{minWidth:40},onClick:()=>u(!0)},e.createElement("span",{className:"material-icons-round dark:text-white-100 text-gray-800"},"sort")))),e.createElement("div",{id:"governance-list",className:"pb-20"},e.createElement("div",{className:"rounded-2xl flex flex-col items-center w-[344px] m-auto justify-center dark:bg-gray-900 bg-white-100"},T?e.createElement(nt,null):(g?.length??0)===0?e.createElement(ce.S,{isRounded:!0,subHeading:s?"Please try again with something else":"",heading:s?"No results for \u201C"+(0,rt.jr)(s)+"\u201D":"No Proposals",src:z.r.Misc.Explore}):g?.map((S,m)=>e.createElement("div",{key:be(S,n??!1),className:"w-full"},e.createElement("div",{className:"p-4 cursor-pointer",onClick:()=>l(be(S,n??!1))},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"w-[272px]"},e.createElement("div",{className:"flex flex-col"},e.createElement("div",{className:"text-black-100 dark:text-white-100 font-bold text-base break-words"},Oe(S,n??!1)),e.createElement("div",{className:"text-gray-600 dark:text-gray-200 text-xs"},"#",be(S,n??!1)," \xB7"," ",e.createElement(qe,{status:me(S,n??!1)})))),e.createElement("img",{className:"ml-5",src:z.r.Misc.RightArrow}))),m<g.length-1?e.createElement(w.CardDivider,null):null))))),e.createElement(he.Z,{isVisible:o,onClose:()=>r(!1)}),e.createElement(ne.Z,{isOpen:d,onClose:()=>u(!1),title:"Filter by"},e.createElement("div",{className:"rounded-2xl flex flex-col items-center w-full justify-center dark:bg-gray-900 bg-white-100"},lt.map((S,m)=>e.createElement(e.Fragment,{key:S.label},e.createElement("button",{className:"flex items-center justify-between text-md font-bold p-4 w-full text-gray-800 dark:text-white-100",onClick:()=>{f(S.key),u(!1)}},e.createElement("span",null,S.label),c===S.key?e.createElement("span",{className:"material-icons-round",style:{color:"#E18881"}},"check_circle"):null),m===lt.length-1?null:e.createElement(w.CardDivider,null))))))}var ot=i(472415);function It({isOpen:t,onCloseHandler:a,onSubmitVote:l,selectedVote:n,error:o,loading:r,memo:d,setMemo:u,proposalId:s,gasOption:x,forceChain:c}){const f=(0,E.a74)(),h=(0,e.useMemo)(()=>c||f,[f,c]);return(0,Re.X)(o),e.createElement(ne.Z,{isOpen:t,onClose:a,title:"Review Transaction",className:"!p-0"},e.createElement("div",{className:"flex flex-col items-center w-[400px] gap-y-[16px] mt-[28px] mb-[40px]"},e.createElement("div",{className:"flex p-4 w-[344px] bg-gray-50 dark:bg-gray-900 rounded-2xl"},e.createElement("div",{className:"h-10 w-10 bg-green-300 rounded-full flex items-center justify-center"},e.createElement("span",{className:"material-icons-round text-green-700"},"thumb_up")),e.createElement("div",{className:"flex flex-col justify-center items-start px-3"},e.createElement("div",{className:"text-xs text-gray-400 text-left"},"Vote message"),e.createElement("div",{className:"text-base text-black-100 dark:text-white-100 font-medium"},"Vote ",e.createElement("b",null,n)," on ",e.createElement("b",null,"Proposal #",s)))),e.createElement(w.Memo,{value:d,onChange:b=>{u(b.target.value)}}),e.createElement(De.a,{className:"mt-4"}),e.createElement(w.Buttons.Generic,{color:W.w.getChainColor(h),size:"normal",className:"w-[344px]",title:"Vote",onClick:async()=>{n!==void 0&&await l(n)},disabled:r},r?e.createElement(ve.T,{color:W.w.white100}):"Approve"),o&&e.createElement(ot._,{text:(0,E.azN)(o,x,"vote")})))}function Vt({selectedProposalChain:t,selectedProposalId:a,handleProposalDetailsBack:l,allProposals:n,shouldUseFallback:o,forceNetwork:r}){return t==="neutron"?e.createElement(et,{selectedProp:a,onBack:l,proposalList:n,shouldUseFallback:o,forceChain:t,forceNetwork:r}):e.createElement(ut,{selectedProp:a,onBack:l,shouldUseFallback:o,proposalList:n,forceChain:t,forceNetwork:r})}const Mt="mainnet";function Gt(){const t=(0,ie.s0)(),[a,l]=(0,e.useState)(!1),{votingProposals:n,nonVotingProposals:o,perChainShouldUseFallback:r}=(0,E.UIl)(),d=(0,E.DI5)(),[u,s]=(0,e.useState)(!1),[x,c]=(0,e.useState)(""),[f,h]=(0,e.useState)(),[b,O]=(0,e.useState)(!1),[C,T]=(0,e.useState)(),y=(0,e.useMemo)(()=>{const m=n.filter(P=>je(P,x,d)).sort((P,p)=>Fe(P,p,d)),A=o.filter(P=>je(P,x,d)).sort((P,p)=>Fe(P,p,d));return[...m,...A]},[n,o,x,d]),g=(0,e.useCallback)((m,A)=>{h(m),O(r[A]),T(A)},[r]),S=(0,e.useCallback)(()=>{h(void 0),T(void 0),O(!1)},[]);return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement(it,null),f&&C?e.createElement(Vt,{selectedProposalChain:C,selectedProposalId:f,handleProposalDetailsBack:S,allProposals:y,forceNetwork:Mt,shouldUseFallback:b}):e.createElement(e.Fragment,null,e.createElement(te.Z,{header:e.createElement(w.Header,{action:{onClick:()=>t(-1),type:w.HeaderActionType.BACK},imgSrc:z.r.Misc.AggregatedViewSvg,onImgClick:()=>l(!0),title:"Governance"})},e.createElement("div",{className:"flex flex-col pt-[16px] px-[24px]"},u?e.createElement(Se.SS,{handleClose:()=>{s(!1),c("")},handleChange:m=>c(m),value:x,placeholder:"Search proposal"}):e.createElement("h1",{className:"flex items-center justify-between text-black-100 dark:text-white-100"},e.createElement("span",{className:"text-[24px] font-[700]"},"Governance"),e.createElement("button",{className:"bg-white-100 dark:bg-gray-950 w-[40px] h-[40px] rounded-full flex items-center justify-center",onClick:()=>s(!0)},e.createElement("img",{src:z.r.Misc.SearchWhiteIcon,className:"w-[24px] h-[24px] invert dark:invert-0"}))),e.createElement("div",{className:L()({"mt-4":!u})},y.length>0?e.createElement(Ue.S_,{itemCount:y.length,width:352,height:440,itemSize:()=>124},({index:m,style:A})=>e.createElement("div",{style:A},e.createElement(Bt,{proposal:y[m],handleClick:()=>g(y[m].proposal_id,y[m]?.chain||"cosmos")}))):e.createElement(e.Fragment,null,x.trim().length>0?e.createElement(ce.S,{isRounded:!0,subHeading:"Please try again with something else",heading:"No results for \u201C"+(0,E.jrB)(x)+"\u201D",src:z.r.Misc.Explore,classname:"dark:!bg-gray-950",imgContainerClassname:"dark:!bg-gray-900"}):null)))),e.createElement(he.Z,{isVisible:a,onClose:()=>l(!1)})))}const ct=e.memo(function({chain:t,setAggregatedGovernance:a}){return(0,E.nVf)(t,a),e.createElement(e.Fragment,null)});ct.displayName="FetchChainGovernance";const it=e.memo(function(){const{setAggregatedGovernance:t}=(0,E.dYr)();return e.createElement(Se.ox,{setAggregatedStore:t,render:({key:a,chain:l,setAggregatedStore:n})=>e.createElement(ct,{key:a,chain:l,setAggregatedGovernance:n})})});it.displayName="AggregatedGovernanceNullComponents";var Ut=i(124658),mt=i(634680);const jt=$e.w.useGetWallet;function Ft({className:t,proposalId:a,refetchVote:l,showCastVoteSheet:n,setShowCastVoteSheet:o,forceChain:r,forceNetwork:d}){const u=(0,mt.a7)(),s=(0,e.useMemo)(()=>r||u,[u,r]),x=(0,E.obn)(),c=(0,e.useMemo)(()=>d||x,[x,d]),f=(0,Pe.e7)({activeChain:s,selectedNetwork:c}),h=jt(),b=(0,We._)(),O=(0,E.dco)(),C=(0,E.DR3)(s),{loading:T,vote:y,error:g,memo:S,setMemo:m,feeText:A,showLedgerPopup:P,clearError:p,ledgerError:N}=(0,E.e5I)({proposalId:a,forceChain:s,forceNetwork:c}),{lcdUrl:V}=(0,E.U9i)(s,c),U=(0,E.VMC)(),j=(0,E.bkk)(s,c),F=(0,E._ty)(s),[D,I]=(0,e.useState)(!1),[Y,de]=(0,e.useState)(null),[R,B]=(0,e.useState)(j),[Z,J]=(0,e.useState)(void 0),[Te,pt]=(0,e.useState)(O[s]?.DEFAULT_GAS_TRANSFER?.toString()??X.N7W.DEFAULT_GAS_TRANSFER.toString()),[ye,Me]=(0,e.useState)(Te),[re,we]=(0,e.useState)({option:E.j1p.LOW,gasPrice:f.gasPrice}),St=(0,E.dju)(s,c),qt=(0,E.con)(s,c),ea=(0,E.q5i)(s,c),ht=(0,e.useRef)(!0);(0,e.useEffect)(()=>{(async function(){let M,_,le,ue=!1;if(R.coinMinimalDenom==="uosmo"&&s==="osmosis"?({low:M,medium:_,high:le}=await(0,E.Q3h)(V??"",U),ue=!0):qt&&R.coinMinimalDenom===j?.coinMinimalDenom&&({low:M,medium:_,high:le}=await ea(R.coinMinimalDenom),ue=!0),ue)switch(re.option){case E.j1p.LOW:{we(ee=>({...ee,gasPrice:X.DB5.fromString(`${M}${R.coinMinimalDenom}`)}));break}case E.j1p.MEDIUM:{we(ee=>({...ee,gasPrice:X.DB5.fromString(`${_}${R.coinMinimalDenom}`)}));break}case E.j1p.HIGH:{we(ee=>({...ee,gasPrice:X.DB5.fromString(`${le}${R.coinMinimalDenom}`)}));break}}})()},[s,ye,R.coinMinimalDenom,re.option,j?.coinMinimalDenom]);const vt=(0,e.useMemo)(()=>{const M=Math.ceil(Number(ye)*F);return(0,Ut.calculateFee)(M,re.gasPrice)},[F,ye,re.gasPrice]),ta=(0,e.useCallback)((M,_)=>{we(M),B({..._.denom,ibcDenom:_.ibcDenom})},[]),aa=(0,e.useCallback)(async M=>{try{const _=await h(s);return!!await y({wallet:_,callback:b,voteOption:M,customFee:{stdFee:vt,feeDenom:R},isSimulation:!1})}catch(_){return(0,Ce.Tb)(_),!1}},[s,vt,R,h,b,y]),na=(0,e.useCallback)(()=>{J(void 0),o(!1),p()},[p,o]),sa=(0,e.useCallback)(()=>{I(!1)},[]);return(0,e.useEffect)(()=>{let M=!1;return(async()=>{try{const le=(0,X.f3G)(R.coinMinimalDenom),ue=await St({proposalId:a,voteOption:E.RWi.YES,fee:le});if(ue!==null&&!M){const ee=ue.gasUsed.toString();pt(String(Number(ee)*(C===X.Ufz.Version_Point_47?1.5:1))),ht.current&&(Me(String(Number(ee)*(C===X.Ufz.Version_Point_47?1.5:1))),ht.current=!1)}}catch{}})().catch(Ce.Tb),()=>{M=!0}},[C,a,St]),(0,e.useEffect)(()=>{we({option:E.j1p.LOW,gasPrice:f.gasPrice})},[f.gasPrice.amount.toString(),f.gasPrice.denom]),e.createElement("div",{className:L()("",t)},e.createElement(Pe.ZP,{recommendedGasLimit:Te,gasLimit:ye,setGasLimit:M=>Me(M.toString()),gasPriceOption:re,onGasPriceOptionChange:ta,error:Y,setError:de,chain:s,network:c},e.createElement(ne.Z,{isOpen:n&&!P,onClose:()=>o(!1),title:"Cast your Vote",closeOnBackdropClick:!0},e.createElement(yt,{feeDenom:R,gasLimit:ye,gasPrice:re.gasPrice,setShowFeesSettingSheet:I,onSubmitVote:J,setRecommendedGasLimit:pt,proposalId:a,setGasLimit:Me,forceChain:s,forceNetwork:c})),e.createElement(Ze.k,{showFeesSettingSheet:D,onClose:sa,gasError:Y}),e.createElement(Wt,{isOpen:Z!==void 0,proposalId:a,error:g,ledgerError:N,loading:T,feeText:A,memo:S,setMemo:m,selectedVote:Z,onSubmitVote:aa,refetchCurrVote:l,onCloseHandler:na,showLedgerPopup:P,gasOption:re.option,forceChain:s})))}var v=(t=>(t.PROPOSAL_STATUS_IN_PROGRESS="PROPOSAL_STATUS_IN_PROGRESS",t.PROPOSAL_STATUS_DEPOSIT_PERIOD="PROPOSAL_STATUS_DEPOSIT_PERIOD",t.PROPOSAL_STATUS_VOTING_PERIOD="PROPOSAL_STATUS_VOTING_PERIOD",t.PROPOSAL_STATUS_PASSED="PROPOSAL_STATUS_PASSED",t.PROPOSAL_STATUS_EXECUTED="PROPOSAL_STATUS_EXECUTED",t.PROPOSAL_STATUS_FAILED="PROPOSAL_STATUS_FAILED",t.PROPOSAL_STATUS_REJECTED="PROPOSAL_STATUS_REJECTED",t.PROPOSAL_STATUS_UNSPECIFIED="PROPOSAL_STATUS_UNSPECIFIED",t))(v||{});function Ve({status:t}){switch(t){case"PROPOSAL_STATUS_DEPOSIT_PERIOD":return e.createElement("span",{className:" font-semibold dark:text-orange-300 text-orange-600"},"Deposit Period");case"PROPOSAL_STATUS_VOTING_PERIOD":return e.createElement("span",{className:"font-semibold  dark:text-orange-300 text-orange-600"},"Voting Period");case"PROPOSAL_STATUS_PASSED":return e.createElement("span",{className:"font-semibold text-green-600 dark:text-green-300"},"Passed");case"PROPOSAL_STATUS_FAILED":return e.createElement("span",{className:"font-semibold text-red-300"},"Failed");case"PROPOSAL_STATUS_REJECTED":return e.createElement("span",{className:"font-semibold text-red-300"},"Rejected");case"PROPOSAL_STATUS_UNSPECIFIED":return e.createElement("span",{className:"font-semibold text-gray-400 "},"Unspecified");default:return e.createElement("span",{className:"font-semibold text-gray-400"},"Unspecified")}}function Bt({proposal:t,style:a,handleClick:l}){const n=(0,E.QSC)(t.chain??"cosmos");return e.createElement("div",{className:"bg-white-100 dark:bg-gray-950 rounded-xl flex flex-col items-start justify-start gap-[2px] p-[12px] h-[112px] cursor-pointer",style:a,onClick:l},e.createElement("p",{className:"text-gray-600 dark:text-gray-400 text-[12px] font-bold"},n?.chainName??"Unknown Chain"),e.createElement("p",{className:"text-black-100 dark:text-white-100 font-[700] line-clamp-2",title:t?.title??t?.content?.title},t?.title??t?.content?.title),e.createElement("p",{className:"text-gray-600 dark:text-gray-400 text-[12px] font-[500]"},"#",t.proposal_id," \xB7 ",e.createElement(Ve,{status:t.status})))}var dt=i(532833);const Zt=[v.PROPOSAL_STATUS_VOTING_PERIOD,v.PROPOSAL_STATUS_DEPOSIT_PERIOD];function ut({selectedProp:t,onBack:a,proposalList:l,shouldUseFallback:n,forceChain:o,forceNetwork:r}){const d=(0,E.a74)(),u=(0,e.useMemo)(()=>o||d,[d,o]),s=(0,E.obn)(),x=(0,e.useMemo)(()=>r||s,[s,r]),c=(0,E.SFn)(u),f=(0,E.QSC)(u),{lcdUrl:h,txUrl:b}=(0,E.U9i)(u,x),[O,C]=(0,e.useState)(!1),T=(0,Ie.a)();(0,E.Inm)(u,x);const{delegationInfo:y}=(0,E.$1u)(),g=(0,e.useMemo)(()=>u==="cosmos"?y?.totalDelegation?.gte(1):!0,[u,y?.totalDelegation]),{topChainColor:S}=(0,dt.Cd)(),m=(0,e.useMemo)(()=>l.find(B=>B.proposal_id===t),[l,t]),{data:A,refetch:P,isLoading:p}=(0,ze.useQuery)(["currVote",u,c,t],async()=>{if(u)try{const{data:B}=await Xe.Z.post(`https://api.leapwallet.io/gov/vote/${f.chainId}/${t}`,{userAddress:c});return B}catch{try{return(await(0,X.F$d)({baseURL:h??"",method:"get",url:`/cosmos/gov/v1beta1/proposals/${t}/votes/${c}`},1,"proposals-votes")).data.vote.options[0].option.replace("VOTE_OPTION_","")}catch(Z){if(Z.response.data.code===3||Z.response.data.error?.code===-32700)return"NO_VOTE";throw(0,Ce.Tb)(Z),new Error(Z)}}},{retry:B=>B!==2,enabled:m.status===v.PROPOSAL_STATUS_VOTING_PERIOD});let{data:N,status:V}=(0,E._rB)(m.proposal_id,n,u,x);V=n?V:"success";const{yes:U,no:j,abstain:F,no_with_veto:D}=m.tally||N||m.final_tally_result,I=[U,j,F,D].reduce((B,Z)=>B+Number(Z),0),Y=(0,e.useMemo)(()=>I?[{title:"YES",value:+U,color:"#29A874",percent:ae(+U,I)},{title:"NO",value:+j,color:"#FF707E",percent:ae(+j,I)},{title:"No with Veto",value:+D,color:"#8583EC",percent:ae(+D,I)},{title:"Abstain",value:+F,color:"#D1A700",percent:ae(+F,I)}]:[{title:"loading",value:1,color:"#ccc",percent:"0%"}],[F,j,D,I,U]),de=(0,e.useMemo)(()=>[{label:"Turnout",value:n?I/N?.bonded_tokens*100:m.turnout},{label:"Quorum",value:n?N?.quorum*100:m.quorum}],[N,m.quorum,m.turnout,n,I]),R=(0,e.useMemo)(()=>n?N?.proposer?.depositor?{address:N?.proposer?.depositor,url:N?.proposerTxUrl}:void 0:m?.proposer?.address?{address:m?.proposer?.address,url:m?.proposer?.url??`${b?.replace("txs","account")}/${m?.proposer?.address}`}:void 0,[N?.proposer?.depositor,N?.proposerTxUrl,m?.proposer?.address,m?.proposer?.url,n,b]);return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement(te.Z,null,e.createElement(w.Header,{action:{onClick:a,type:w.HeaderActionType.BACK},title:"Proposal"}),e.createElement("div",{className:"flex flex-col py-6 px-7 max-h-[520px] overflow-y-scroll"},e.createElement("div",{className:"text-gray-600 dark:text-gray-200 text-sm mb-1"},"#",m.proposal_id," \xB7"," ",e.createElement(Ve,{status:m.status})),e.createElement("div",{className:"text-black-100 dark:text-white-100 font-bold text-xl break-words"},m?.title??m?.content?.title),m.status===v.PROPOSAL_STATUS_VOTING_PERIOD&&!g&&e.createElement(Et,{forceChain:u,forceNetwork:x}),e.createElement(Yt,{proposal:m,activeChain:u,onVote:()=>C(!0),currVote:A??"",isLoading:p,hasMinStaked:g}),e.createElement("div",{className:"my-8"},e.createElement(w.LineDivider,{size:"sm"})),m.status!==v.PROPOSAL_STATUS_DEPOSIT_PERIOD&&I&&e.createElement(e.Fragment,null,e.createElement("div",{className:"w-full h-full flex items-center justify-center mb-8"},e.createElement("div",{className:"w-[180px] h-[180px] flex items-center justify-center relative"},V!=="success"?e.createElement(H.Z,{circle:!0,count:1,width:"180px",height:"180px"}):e.createElement(Ke.PieChart,{data:Y,lineWidth:20}),e.createElement("p",{className:"text-md dark:text-white-100 text-dark-gray font-bold absolute"},"Current Status"))),e.createElement(gt,{dataMock:Y,chain:f}),e.createElement(xt,{tallying:de})),Zt.includes(m.status)&&R?.address&&e.createElement("div",{className:`rounded-2xl ${v.PROPOSAL_STATUS_DEPOSIT_PERIOD===m.status?"":"mt-6"} h-18 w-full p-4 flex items-center justify-between roundex-xxl bg-white-100 dark:bg-gray-900`},e.createElement("div",{className:"flex items-center"},e.createElement("div",{style:{backgroundColor:"#FFECA8",lineHeight:28},className:"relative h-10 w-10 rounded-full flex items-center justify-center text-lg"},e.createElement("span",{className:"leading-none"},"\u{1F464}"),e.createElement("img",{src:f.chainSymbolImageUrl??T,onError:(0,Qe._)(T),alt:"chain logo",width:"16",height:"16",className:"rounded-full absolute bottom-0 right-0"})),e.createElement("div",{className:"flex flex-col ml-3"},e.createElement(se.Z,{size:"md",color:"font-bold dark:text-white-100 text-gray-800"},"Proposer"),R?e.createElement(se.Z,{size:"xs",color:"font-medium text-gray-400"},`${R.address.slice(0,5)}...${R.address.slice(-6)}`):e.createElement(H.Z,{count:1,height:"16px",width:"150px",className:"z-0"}))),R?.url&&e.createElement("button",{className:"flex items-center justify-center px-1",onClick:()=>window.open(R?.url,"_blank")},e.createElement("span",{className:"material-icons-round text-gray-400 text-[18px]"},"open_in_new"))),e.createElement("div",{className:"my-8"},e.createElement(w.LineDivider,{size:"sm"})),(m?.description||m?.content?.description)&&e.createElement(Je.r,{description:m?.description||m?.content?.description,title:"Description",btnColor:S,forceChain:u})),e.createElement(Ft,{refetchVote:P,proposalId:m.proposal_id,showCastVoteSheet:O,setShowCastVoteSheet:C,forceChain:u,forceNetwork:x})))}function Et({forceChain:t,forceNetwork:a}){const l=(0,E.QSC)(t),[n]=(0,E.JsT)(t,a),o=(0,ie.s0)(),r=(0,e.useCallback)(()=>{o("/stake")},[o]);return e.createElement("div",{className:"flex mt-4 p-4 w-full flex-row justify-between items-center gap-2 dark:bg-gray-900 bg-white-100 rounded-[20px]"},e.createElement("div",{className:"text-xs font-medium !leading-[19.2px] dark:text-white-100"},l.chainName," requires you to have ",e.createElement("br",null),"at least ",e.createElement("span",{className:"font-bold"},"1 ",n?.coinDenom," staked")," to start voting"),e.createElement("button",{onClick:r,className:"rounded-full shrink-0 bg-gray-950 dark:bg-white-100 font-bold text-xs text-gray-100 py-[6px] px-[12px] dark:text-gray-950 !leading-[20px]"},"Stake ",n?.coinDenom))}var $t=i(138371);function Wt({isOpen:t,onCloseHandler:a,onSubmitVote:l,selectedVote:n,error:o,feeText:r,loading:d,memo:u,setMemo:s,proposalId:x,refetchCurrVote:c,showLedgerPopup:f,ledgerError:h,gasOption:b,forceChain:O}){const C=(0,E.a74)(),T=(0,e.useMemo)(()=>O||C,[C,O]);return(0,Re.X)(o),f?e.createElement($t.Z,{showLedgerPopup:f}):e.createElement(ne.Z,{isOpen:t,onClose:a,title:"Review Transaction",className:"!p-0"},e.createElement("div",{className:"flex flex-col items-center w-[400px] gap-y-[16px] mt-[28px] mb-[40px]"},e.createElement("div",{className:L()("flex p-4 w-[344px] bg-gray-50 dark:bg-gray-900 rounded-2xl")},e.createElement("div",{className:"h-10 w-10 bg-green-300 rounded-full flex items-center justify-center"},e.createElement("span",{className:"material-icons-round text-green-700"},"thumb_up")),e.createElement("div",{className:"flex flex-col justify-center items-start px-3"},e.createElement("div",{className:"text-xs text-gray-400 text-left"},"Vote message"),e.createElement("div",{className:"text-base text-black-100 dark:text-white-100 font-medium"},"Vote ",e.createElement("b",null,n)," on ",e.createElement("b",null,"Proposal #",x)))),e.createElement(w.Memo,{value:u,onChange:y=>{s(y.target.value)}}),e.createElement(se.Z,{size:"sm",className:"text-gray-400 dark:text-gray-600 justify-center"},r),(o??h)&&e.createElement(ot._,{text:(0,E.azN)(o??h??"",b,"vote")}),e.createElement(w.Buttons.Generic,{color:W.w.getChainColor(T),size:"normal",className:"w-[344px]",title:"Vote",disabled:f,onClick:async()=>{n!==void 0&&await l(n)&&(a(),c())}},d?e.createElement(ve.T,{color:W.w.white100}):"Approve")))}const Ht=(t="natural")=>{const a=(0,e.useRef)(null),[l,n]=(0,e.useState)(null),[o,r]=(0,e.useState)(null),[d,u]=(0,e.useState)(!1),s=(0,e.useCallback)(h=>{a.current&&(n(h.screenX),r(a.current.scrollLeft),u(!0))},[]),x=(0,e.useCallback)(h=>{if(a&&a.current&&(h.preventDefault(),h.stopPropagation(),l!==null&&o!==null&&d)){const b=l-h.screenX;a.current.scrollLeft=t==="natural"?o-b:o+b}},[l,d,o,t]),c=(0,e.useCallback)(()=>{d&&(n(null),r(null),u(!1))},[d]);return{props:{onMouseDown:s,onMouseMove:x,onMouseUp:c,onMouseLeave:c},scrollRef:a,clickStartX:l,scrollStartX:o,isDragging:d}};function gt({dataMock:t,chain:a}){const{scrollRef:l,props:n}=Ht(),o=Object.values(a.nativeDenoms)?.[0]?.coinDecimals??Nt[a?.bip44?.coinType];return e.createElement("div",{className:"h-[52px]"},e.createElement("div",{className:"flex items-start no-scrollbar overflow-y-auto whitespace-nowrap",ref:l,...n},t.map(r=>{const d=r.title==="loading";return e.createElement("div",{key:r.color,className:`px-3 py-2 dark:bg-gray-900 bg-white-100 rounded-[12px] mr-3${d?" w-[150px]":""}`},d?e.createElement(H.Z,{count:2}):e.createElement(e.Fragment,null,e.createElement("div",{className:"flex items-center"},e.createElement("div",{className:"rounded-[2px] w-3 h-3 mr-1",style:{backgroundColor:r.color}}),e.createElement("p",{className:"dark:text-white-100 text-gray-400 whitespace-nowrap text-xs font-bold"},`${r.title} - ${r.percent}`)),e.createElement(se.Z,{size:"xs",color:"text-gray-400 font-medium whitespace-nowrap",style:{lineHeight:"20px"}},`${new Intl.NumberFormat("en-US").format(+Number(r.value/Math.pow(10,o)).toFixed(2))} ${a.denom}`)))})))}function xt({tallying:t}){const[a,l]=(0,e.useState)("");return e.createElement(e.Fragment,null,e.createElement("div",{className:"rounded-2xl mt-6 h-18 w-full roundex-xxl bg-white-100 dark:bg-gray-900"},t.map((n,o)=>e.createElement(e.Fragment,{key:n.label},e.createElement("div",{className:"flex items-center justify-between p-4",key:n.label},e.createElement("div",{className:"flex flex-row items-center"},e.createElement("p",{className:"text-md font-bold text-gray-800 dark:text-white-100"},n.label),e.createElement("button",{onClick:()=>l(n.label),className:"h-[18px] w-[18px]"},e.createElement("span",{className:"material-icons-round text-gray-400 ml-1",style:{fontSize:"18px"}},"info"))),n.value?e.createElement("p",{className:"text-sm font-bold text-gray-800 dark:text-white-100"},`${Number(n.value).toFixed(2)}%`):e.createElement(H.Z,{count:1,width:"50px"})),o===0&&e.createElement(w.CardDivider,null)))),e.createElement(ne.Z,{isOpen:!!a,onClose:()=>l(""),title:a,closeOnBackdropClick:!0},e.createElement(se.Z,{size:"sm",color:"text-gray-800 dark:text-white-100"},a==="Turnout"?"Defined as the percentage of voting power already casted on a proposal  as a percentage of total staked tokens.":"Defined as the minimum percentage of voting power that needs to be cast on a proposal for the result to be valid.")))}function Yt({currVote:t,proposal:a,isLoading:l,activeChain:n,hasMinStaked:o,onVote:r}){const[d,u]=(0,e.useState)();switch((0,e.useEffect)(()=>{const x=setInterval(()=>{const c=q()(),h=q()(a.status===v.PROPOSAL_STATUS_DEPOSIT_PERIOD?a.deposit_end_time:a.voting_end_time).diff(c,"seconds");u(ke(h))},1e3);return()=>clearInterval(x)},[a,ke]),a.status){case v.PROPOSAL_STATUS_VOTING_PERIOD:return e.createElement(e.Fragment,null,e.createElement("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4"},e.createElement("div",{className:"flex items-center justify-between gap-3 p-4"},e.createElement("div",{className:"text-black-100 dark:text-white-100 text-base font-bold"},"Voting Starts"),e.createElement("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold"},q()(a.voting_start_time).format("MMM DD, YYYY"))),e.createElement(w.CardDivider,null),e.createElement("div",{className:"flex items-center justify-between gap-3 p-4"},e.createElement("div",{className:"text-black-100 dark:text-white-100 text-base font-bold"},"Voting Ends"),e.createElement("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold"},q()(a.voting_end_time).format("MMM DD, YYYY"))),e.createElement("div",{className:"px-4 pb-4 text-xs text-gray-600 dark:text-gray-200 min-h-[32px]"},d&&`Ending in ${d}`)),l?e.createElement("div",{className:"rounded-2xl mt-4 h-18 w-full p-4 flex bg-white-100 dark:bg-gray-900"},e.createElement(H.Z,{count:1,className:"rounded-full mt-4 h-10 w-10"}),e.createElement("div",{className:"ml-3 w-full"},e.createElement(H.Z,{count:1,className:"h-6"}),e.createElement(H.Z,{count:1,className:"h-5"}))):null,t&&t!=="NO_VOTE"&&e.createElement("div",{className:L()("flex p-4 w-[344px] mt-4 dark:bg-green-900 bg-green-300 border-2 dark:border-green-800 border-green-600 rounded-2xl")},e.createElement("div",{className:"h-10 w-10 bg-green-400 rounded-full flex items-center justify-center"},e.createElement("span",{className:"material-icons-round text-green-700"},"thumb_up")),e.createElement("div",{className:"flex flex-col justify-center items-start px-3"},e.createElement("div",{className:"text-base text-white-100 text-left"},"Vote submitted"),e.createElement("div",{className:"text-sm text-gray-600 font-medium"},"Voted ",t))),e.createElement(w.Buttons.Generic,{color:W.w.getChainColor(n),size:"normal",className:"w-[344px] py-4 mt-4",onClick:()=>r(),disabled:!o},e.createElement("div",{className:"flex justify-center text-white-100 items-center"},e.createElement("span",{className:"mr-2 material-icons-round"},"how_to_vote"),e.createElement("span",null,"Vote"))));case v.PROPOSAL_STATUS_DEPOSIT_PERIOD:return e.createElement(e.Fragment,null,e.createElement("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4"},e.createElement("div",{className:"flex items-center justify-between gap-3 p-4"},e.createElement("div",{className:"text-black-100 dark:text-white-100 text-base font-bold"},"Deposit Period Ends"),e.createElement("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold"},q()(a.deposit_end_time).format("MMM DD, YYYY"))),d&&e.createElement("div",{className:"px-4 pb-4 text-xs text-gray-600 dark:text-gray-200 min-h-[32px]"},d&&`Ending in ${d}`)));case v.PROPOSAL_STATUS_PASSED:case v.PROPOSAL_STATUS_FAILED:case v.PROPOSAL_STATUS_REJECTED:return e.createElement(e.Fragment,null,e.createElement("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4"},e.createElement("div",{className:"flex items-center gap-3 p-4"},e.createElement("div",{className:"text-gray-600 w-[200px] dark:text-gray-200 text-xs font-bold"},"Results"),e.createElement("div",{className:"text-gray-600 dark:text-gray-200 text-xs font-bold"})),e.createElement("div",{className:"flex flex-col justify-center gap-3 p-4"},Be(a.tally||a.final_tally_result).map(s=>e.createElement("div",{key:s.label,className:"flex rounded-2xl relative overflow-clip"},e.createElement("div",{className:L()("text-black-100 dark:text-white-100 w-52 font-bold py-2 border-y-2 border-l-2 rounded-l-2xl z-10",s.selectedBorderCSS)},e.createElement("span",{className:"ml-4 max-h-10"},s.label)),e.createElement("div",{className:L()("w-full text-black-100 py-[10px] dark:text-white-100 border-y-2 border-r-2 rounded-r-2xl",s.selectedBorderCSS)},e.createElement("span",{className:"absolute right-4 font-bold"},s.percentage.toFixed(2))),e.createElement("div",{style:{width:(s.percentage*3.12).toString()+"px"},className:L()("h-10 absolute l-0 m-[2px] rounded-2xl",s.selectedBackgroundCSS)}))))))}return e.createElement(e.Fragment,null)}const ft=[{key:"all",label:"All Proposals"},{key:v.PROPOSAL_STATUS_VOTING_PERIOD,label:"Voting in Progress"},{key:v.PROPOSAL_STATUS_PASSED,label:"Passed"},{key:v.PROPOSAL_STATUS_REJECTED,label:"Rejected"}];function _t({onClick:t,proposalList:a,proposalListStatus:l,fetchMore:n}){const o=(0,st.p)(),[r,d]=(0,e.useState)(""),u=p=>{d(p.currentTarget.value.toLowerCase())},s=(0,ie.s0)(),[x,c]=(0,e.useState)(!1),[f,h]=(0,e.useState)("all"),[b,O]=(0,e.useState)(!1),C=(0,mt.a7)(),T=l==="loading",{totalDelegation:y}=(0,E.nDu)(),g=(0,e.useMemo)(()=>C==="cosmos"?y?.gte(1):!0,[C,y]),S=(0,e.useMemo)(()=>a?.filter(p=>p.status!=="PROPOSAL_STATUS_DEPOSIT_PERIOD").reduce((p,N)=>(f==="all"?r?(N.content?.title.toLowerCase().includes(r)||N.title.toLowerCase().includes(r)||N.proposal_id.toLowerCase().includes(r))&&p.push(N):p.push(N):(!r&&N.status===f||N.status===f&&(N.content.title.toLowerCase().includes(r)||N.title.toLowerCase().includes(r)||N.proposal_id.toLowerCase().includes(r)))&&p.push(N),p),[]),[f,r,a]),m=(0,e.useCallback)(p=>{h(p),c(!1)},[]);(0,e.useEffect)(()=>{const p=document.querySelector("#bottom");if(!p||S.length===0||l!=="success")return;const N=U=>{U[0].isIntersecting&&n()},V=new IntersectionObserver(N,{root:null,rootMargin:"0px",threshold:1});return V.observe(p),()=>{V.disconnect()}},[n,S.length,l]);const A=o[C],{headerChainImgSrc:P}=(0,dt.Cd)();return e.createElement("div",{className:"relative w-[400px] overflow-clip"},e.createElement(te.Z,{header:e.createElement(w.Header,{action:{onClick:()=>s(-1),type:w.HeaderActionType.BACK},imgSrc:P,onImgClick:()=>O(!0),title:"Governance"})},e.createElement(e.Fragment,null,e.createElement(tt.h,null),e.createElement("div",{className:"w-full flex flex-col pt-6 pb-2 px-7 "},e.createElement("div",{className:"text-[28px] text-black-100 dark:text-white-100 font-bold"},"Proposals"),e.createElement("div",{className:"text-sm text-gray-600 font-bold"},"List of proposals in ",A?.chainName??""),!g&&e.createElement(Et,null),e.createElement("div",{className:"flex items-center justify-between mt-6 mb-4"},e.createElement(at.M,{placeholder:"Search proposals...",onChange:u,value:r,onClear:()=>d(""),inputClassName:"flex flex-grow text-base text-gray-600 dark:text-gray-200 outline-none bg-white-0",divClassName:"w-full flex h-10 bg-white-100 dark:bg-gray-900 rounded-[30px] py-2 pl-5 pr-[10px]"}),e.createElement("button",{className:"flex items-center justify-center h-10 bg-white-100 dark:bg-gray-900 rounded-full w-10 m-w-10 ml-3",style:{minWidth:40},onClick:()=>c(!0)},e.createElement("span",{className:"material-icons-round dark:text-white-100 text-gray-800"},"sort")))),e.createElement("div",{id:"governance-list",className:"pb-8"},e.createElement("div",{className:"rounded-2xl flex flex-col items-center w-[344px] m-auto justify-center dark:bg-gray-900 bg-white-100"},T?e.createElement(nt,null):(S?.length??0)===0?e.createElement(ce.S,{isRounded:!0,subHeading:r?"Please try again with something else":"",heading:r?"No results for \u201C"+(0,rt.jr)(r)+"\u201D":"No Proposals",src:z.r.Misc.Explore}):S?.map((p,N)=>e.createElement("div",{key:p.proposal_id,className:"w-full"},e.createElement("div",{className:"p-4 cursor-pointer",onClick:()=>t(p.proposal_id)},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"w-[272px]"},e.createElement("div",{className:"flex flex-col"},e.createElement("div",{className:"text-black-100 dark:text-white-100 font-bold text-base break-words"},p?.title??p?.content?.title),e.createElement("div",{className:"text-gray-600 dark:text-gray-200 text-xs"},"#",p.proposal_id," \xB7"," ",e.createElement(Ve,{status:p.status})))),e.createElement("img",{className:"ml-5",src:z.r.Misc.RightArrow}))),N<S.length-1?e.createElement(w.CardDivider,null):null))),e.createElement("div",{id:"bottom",className:"my-1"}),l==="fetching-more"?e.createElement("div",{className:"px-7 flex items-center justify-center"},e.createElement(ve.T,{color:"white"})):null))),e.createElement(he.Z,{isVisible:b,onClose:()=>O(!1)}),e.createElement(ne.Z,{isOpen:x,onClose:()=>c(!1),title:"Filter by"},e.createElement("div",{className:"rounded-2xl flex flex-col items-center w-full justify-center dark:bg-gray-900 bg-white-100"},ft.map((p,N)=>e.createElement(e.Fragment,{key:p.label},e.createElement("button",{className:"flex items-center justify-between text-md font-bold p-4 w-full text-gray-800 dark:text-white-100",onClick:()=>m(p.key),key:p.label},e.createElement("span",null,p.label),f===p.key?e.createElement("span",{className:"material-icons-round",style:{color:"#E18881"}},"check_circle"):null),N===ft.length-1?null:e.createElement(w.CardDivider,null))))))}const zt=_t;function Xt(){const[t,a]=(0,e.useState)(),{data:l,status:n,fetchMore:o,shouldUseFallback:r}=(0,E.D77)();return(0,$.$)({page:"governance",queryStatus:n,op:"governancePageLoad",description:"loading state on governance page"}),t===void 0?e.createElement(zt,{proposalListStatus:n,proposalList:l,onClick:d=>a(d),fetchMore:o}):e.createElement(ut,{selectedProp:t,onBack:()=>a(void 0),proposalList:l,shouldUseFallback:r})}function Jt(){const[t,a]=(0,e.useState)(),{data:l,status:n,shouldPreferFallback:o}=(0,E.$WT)();(0,$.$)({page:"governance",queryStatus:n,op:"governancePageLoad",description:"loading state on governance page"});const r=u=>{let s=u?.status;switch(u?.status){case v.PROPOSAL_STATUS_EXECUTED:{s=G.EXECUTED;break}case v.PROPOSAL_STATUS_REJECTED:{s=G.REJECTED;break}case v.PROPOSAL_STATUS_PASSED:{s=G.PASSED;break}case v.PROPOSAL_STATUS_IN_PROGRESS:case v.PROPOSAL_STATUS_VOTING_PERIOD:{s=G.OPEN;break}}return{...u,status:s}},d=(0,e.useMemo)(()=>o?l:l?.map(u=>r(u)),[l,o]);return t===void 0?e.createElement(Lt,{proposalListStatus:n,proposalList:d,shouldPreferFallback:o,onClick:u=>a(u)}):e.createElement(et,{selectedProp:t,onBack:()=>a(void 0),proposalList:d,shouldUseFallback:o})}function Kt(){(0,pe.a)(xe.q.Governance);const t=(0,E.a74)(),a=(0,E.Xmk)({checkForExistenceType:"comingSoon",feature:"governance",platform:"Extension"});return t===fe.HW?e.createElement(Gt,null):a?e.createElement(ge.h,{title:"Governance",bottomNavLabel:Ee.W.Governance}):t==="neutron"?e.createElement(Jt,null):e.createElement(Xt,null)}const Qt=Kt}}]);
