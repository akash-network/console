"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[5435],{715668:(V,D,t)=>{t.d(D,{S3:()=>P,eh:()=>M,r4:()=>F,wz:()=>X});var l=t(360431),d=t.n(l),x=t(722912),a=t(899582),y=t(886970);const v="https://api.kado.money";function N(){return useQuery(["kado-chains"],async()=>(await axios.get(`${v}/v1/ramp/blockchains`))?.data?.data?.blockchains?.map(p=>p.officialId),{staleTime:1*60*1e3,cacheTime:5*60*1e3})}function L(){return useQuery(["kado-assets"],async()=>(await axios.get(`${v}/v1/ramp/supported-assets`))?.data?.data?.assets?.map(p=>p.symbol),{staleTime:1*60*1e3,cacheTime:5*60*1e3})}function M(){return(0,l.useQuery)(["kado-asset-list"],async()=>((await x.Z.get(`${v}/v1/ramp/blockchains`))?.data?.data?.blockchains).reduce((w,G)=>{const W=[...w];return G.associatedAssets.forEach(J=>{W.push({...J,origin:G.origin})}),W},[]),{staleTime:1*60*1e3,cacheTime:5*60*1e3})}function X(){return(0,l.useQuery)(["kado-currency-list"],async()=>((await x.Z.get(`${v}/v1/ramp/currencies`))?.data?.data?.currencyData).map(w=>({...w,logo:(0,y.b)(w.code)})),{staleTime:1*60*1e3,cacheTime:5*60*1e3})}async function F(C){const p=(0,a.convertObjInQueryParams)(C);return(await x.Z.get(`${v}/v2/ramp/quote?${p}`,{timeout:1e4}))?.data}async function P({from:C,to:p}){return(await x.Z.get(`${v}/v1/ramp/currencyconvert?from=${C}&to=${p}`))?.data?.data?.conversion}},300950:(V,D,t)=>{t.d(D,{$:()=>a});var l=t(964266),d=t(202784),x=t(610675);const a=y=>{const v=(0,l.a74)(),N=(0,d.useMemo)(()=>y||v,[y,v]),L=(0,l.QSC)(N);return x.w.getChainColor(N,L)}},305435:(V,D,t)=>{t.r(D),t.d(D,{ServiceProviderBaseUrlEnum:()=>oe,ServiceProviderEnum:()=>re,default:()=>Pe});var l=t(964266),d=t(339279),x=t(726089),a=t(206391),y=t.n(a),v=t(892742),N=t(94608),L=t(910416),M=t(64125),X=t(830911),F=t(372149),P=t(715668),C=t(702860),p=t(300950),B=t(927715),w=t(117791),G=t.n(w),W=t(194468),J=t.n(W),ue=t(925292),fe=t(8891),ge=t.n(fe),ye=t(899582),e=t(202784),j=t(14080),ee=t(410289),he=t(886970),Ee=t(712878),te=t(240483),ae=t(754699),se=t(637299);function O(){return e.createElement("div",{className:"flex items-center px-4 bg-white-100 dark:bg-gray-900 w-[344px] h-[72px] rounded-[16px] my-2"},e.createElement(j.Z,{circle:!0,width:28,height:28}),e.createElement("div",{className:"w-[120px] ml-2"},e.createElement(j.Z,{count:1}),e.createElement(j.Z,{count:1})))}function ne(){return e.createElement(e.Fragment,null,e.createElement(O,null),e.createElement(O,null),e.createElement(O,null),e.createElement(O,null),e.createElement(O,null))}var ve=t(360431),pe=t(15815);function be(){const n=(0,F.p)(),u=(0,l.X82)(),{data:f=[],isLoading:c}=(0,P.eh)(),{data:g={},isLoading:h}=(0,l.PCF)();function E(){const b=Object.values(u),s=Object.values(n),z=f.reduce((S,r)=>{const A=s.find(T=>(0,pe.l)()&&T.key==="cosmos"?!1:T.chainId===r.officialChainId),i=b.find(T=>T.coinDenom.toLowerCase()===r.symbol.toLowerCase());return A&&S.push({id:r._id,symbol:r.symbol,chainName:A.chainName,chainId:A.chainId,assetImg:i?.icon,chainSymbolImageUrl:A.chainSymbolImageUrl,priority:g[A.key]?.[r.symbol],origin:r.origin}),S},[]);return z.sort((S,r)=>{const A=S.priority??1/0,i=r.priority??1/0;return A!==i?A-i:S.symbol.localeCompare(r.symbol)}),z}return(0,ve.useQuery)(["filtered-kado-assets"],E,{enabled:n&&u&&!c&&!h})}var Q=t(508181),Z=t(378268);function xe({symbol:n,chainName:u,assetImg:f,onClick:c,chainSymbolImageUrl:g}){const{theme:h}=(0,d.useTheme)();return e.createElement(d.GenericCard,{title:e.createElement("div",{className:"flex items-center"},e.createElement("h3",{className:"text-md mr-1 text-ellipsis overflow-hidden whitespace-nowrap",title:n},(0,l.MDB)(n))),subtitle:u,img:e.createElement("div",{className:"relative"},e.createElement("img",{src:f??(h===d.ThemeName.DARK?Z.ImgNotAvailableDark:Z.ImgNotAvailableLight),className:"w-[28px] h-[28px] mr-2 rounded-full bg-black-100 dark:bg-black-100"}),e.createElement("img",{src:g,className:"w-[12px] h-[12px] absolute -bottom-0.5 right-1 rounded-full bg-black-100 dark:bg-black-100"})),isRounded:!0,className:"my-2",onClick:c,size:"md"})}function Ne({isVisible:n,onClose:u,onAssetSelect:f}){const[c,g]=(0,e.useState)(""),{isLoading:h,data:E=[]}=be(),b=(0,e.useMemo)(()=>E.filter(s=>s.symbol.toLowerCase().includes(c)||s.chainName.toLowerCase().includes(c)),[E,c]);return e.createElement(te.Z,{isOpen:n,onClose:u,closeOnBackdropClick:!0,title:"Select Token"},e.createElement("div",{className:"flex flex-col items-center h-full"},e.createElement(se.M,{value:c,onChange:s=>g(s.target.value),"data-testing-id":"buy-asset-input-search",placeholder:"Search token",onClear:()=>g("")})),h&&e.createElement(ne,null),!h&&e.createElement("div",null,b?.length===0&&e.createElement(ae.S,{isRounded:!0,subHeading:"Try a different search term",src:Q.r.Misc.Explore,heading:"No results found","data-testing-id":"select-asset-empty-card"}),b.length!==0&&b.map(s=>e.createElement(xe,{key:s.id,symbol:s.symbol,chainName:s.chainName,assetImg:s.assetImg,chainSymbolImageUrl:s.chainSymbolImageUrl,onClick:()=>f(s)}))))}var Se=t(861111);function Ae({onClick:n,logo:u,title:f}){return e.createElement("button",{className:"flex items-center cursor-pointer",onClick:n},e.createElement("img",{src:u,onError:(0,Se._)(Z.GenericLight),className:"h-6 w-6 mr-1 rounded-full"}),e.createElement("div",{className:"flex flex-col items-start p-1 pr-2"},e.createElement("div",{className:"text-black-100 dark:text-white-100 font-bold text-xs"},(0,l.MDB)(f))),e.createElement("img",{src:Q.r.Misc.ArrowDown,className:"ml-2"}))}function Ce({onClick:n,logo:u,title:f,subtitle:c,chainImg:g}){const{theme:h}=(0,d.useTheme)();return e.createElement("button",{className:"flex items-center cursor-pointer",onClick:n},e.createElement("div",{className:"relative"},e.createElement("img",{src:u??(h===d.ThemeName.DARK?Z.ImgNotAvailableDark:Z.ImgNotAvailableLight),className:"w-[24px] h-[24px] mr-1 rounded-full bg-black-100 dark:bg-black-100"}),e.createElement("img",{src:g,className:"w-[12px] h-[12px] absolute -bottom-0.5 right-1 rounded-full bg-black-100 dark:bg-black-100"})),e.createElement("div",{className:"flex flex-col items-start p-1 pr-2"},e.createElement("div",{className:"text-black-100 dark:text-white-100 font-bold text-xs"},(0,l.MDB)(f)),e.createElement("div",{style:{fontSize:"10px"},className:"text-gray-600 dark:text-gray-400"},(0,l.MDB)(c))),e.createElement("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-800"}),e.createElement("img",{src:Q.r.Misc.ArrowDown,className:"ml-3"}))}function ke({code:n,name:u,logo:f,onClick:c}){return e.createElement(d.GenericCard,{title:e.createElement("div",{className:"flex items-center"},e.createElement("h3",{className:"text-md mr-1 text-ellipsis overflow-hidden whitespace-nowrap",title:n},(0,l.MDB)(n))),subtitle:u,img:e.createElement("img",{src:f,className:"w-[28px] h-[28px] mr-2 border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,className:"my-2",onClick:c,size:"md"})}function De({isVisible:n,onClose:u,onCurrencySelect:f}){const[c,g]=(0,e.useState)(""),{isLoading:h,data:E=[]}=(0,P.wz)(),b=(0,e.useMemo)(()=>E.filter(s=>s.code.toLowerCase().includes(c)||s.name.toLowerCase().includes(c)),[E,c]);return e.createElement(te.Z,{isOpen:n,onClose:u,closeOnBackdropClick:!0,title:"Select Currency"},e.createElement("div",{className:"flex flex-col items-center h-full"},e.createElement(se.M,{value:c,onChange:s=>g(s.target.value),"data-testing-id":"currency-input-search",placeholder:"Search currency",onClear:()=>g("")})),h&&e.createElement(ne,null),!h&&e.createElement("div",null,b?.length===0&&e.createElement(ae.S,{isRounded:!0,subHeading:"Try a different search term",src:Q.r.Misc.Explore,heading:"No results found","data-testing-id":"select-currency-empty-card"}),b.length!==0&&b.map(s=>e.createElement(ke,{key:s.code,code:s.code,name:s.name,logo:s.logo,onClick:()=>f(s.code)}))))}var re=(n=>(n.KADO="kado",n))(re||{}),oe=(n=>(n.KADO="https://app.kado.money",n))(oe||{});const Pe=()=>{const n=(0,C.Z)().get("pageSource")??void 0,u=(0,e.useMemo)(()=>({pageViewSource:n}),[n]);(0,X.a)(L.q.OnRampQuotePreview,!0,u);const f=(0,p.$)(),{theme:c}=(0,d.useTheme)(),g=(0,ee.s0)(),E=(0,ee.TH)().state,[b,s]=(0,e.useState)(!1),[z,S]=(0,e.useState)(!1),[r,A]=(0,e.useState)("USD"),[i,T]=(0,e.useState)(void 0),le=(0,B.S)(),[H,Te]=(0,e.useState)("0"),K=(0,l.NrF)(H,500),[R,ce]=(0,e.useState)("0"),[Y,q]=(0,e.useState)("0"),[_,ie]=(0,e.useState)(!1),[U,$]=(0,e.useState)(null),I=(0,e.useRef)(null),me=(0,F.p)();(0,e.useEffect)(()=>{async function o(){try{ie(!0);const m=await(0,P.r4)({transactionType:"buy",fiatMethod:"credit_card",partner:"fortress",amount:new(y())(K).toNumber(),currency:r,asset:i?.symbol??"ATOM",blockchain:i?.origin.toLowerCase()??"cosmos hub"});m.success?q(m?.data?.quote?.receiveUnitCountAfterFees?.amount??"0"):q("0")}catch(m){(0,x.Tb)(m)}finally{ie(!1)}}K&&new(y())(K).isGreaterThan("0")?o():q("0")},[K,i,r]),(0,e.useEffect)(()=>{I.current&&I.current?.focus()},[]),(0,e.useEffect)(()=>{if(n===L.q.AssetDetails){const o=me[E.chain];T({symbol:E.symbol,chainName:o.chainName,chainId:o.chainId,chainSymbolImageUrl:o.chainSymbolImageUrl,assetImg:E.img,origin:o.chainName})}else S(!0)},[E,me,n]),(0,e.useEffect)(()=>{async function o(m,k){if(k!=="USD"){const Le=await(0,P.S3)({from:k,to:"USD"}),we=new(y())(m).multipliedBy(Le);ce(we.toString())}else ce(m)}o(K,r)},[K,r]),(0,e.useEffect)(()=>{async function o(){if($(null),parseFloat(R)>0){const m=await(0,P.S3)({from:"USD",to:r});parseFloat(R)<10?$(`Amount should be at least ${(10*m).toFixed(2)} ${r}`):parseFloat(R)>1e4&&$(`Amount exceeds your daily limit of ${(1e4*m).toFixed(2)} ${r}`)}}o()},[R,r]);const de=(0,e.useCallback)((o,m,k)=>{ge().track(L.B_.ButtonClick,{buttonType:"onramp",buttonName:"Redirection",provider:"kado",buyToken:m?.symbol,buyTokenNetwork:m?.origin,chainName:m?.chainName,chainId:m?.chainId,fiatCurrency:k,fiatAmount:new(y())(o).toNumber()})},[]),Ie=(0,e.useCallback)(()=>{const o={apiKey:"4cf40e91-f649-42cc-9999-8449e3706103",onPayAmount:H,onPayCurrency:r,onRevCurrency:i?.symbol,onToAddress:le,network:i?.origin,product:"BUY",productList:"BUY",mode:"minimal",theme:"dark"},k=`https://app.kado.money?${(0,ye.convertObjInQueryParams)(o)}`;window.open(k,"_blank"),i&&de(R,i,r)},[R,H,le,i,r,de]);return e.createElement("div",null,e.createElement(M.E.div,{className:"relative h-full w-full"},e.createElement(v.Z,{header:e.createElement(d.Header,{action:{onClick:()=>g(-1),type:d.HeaderActionType.BACK},imgSrc:void 0,title:"Buy",topColor:f})},e.createElement("div",{className:"flex flex-col justify-between",style:{height:"calc(100% - 72px)"}},e.createElement("div",null,e.createElement("div",{className:"p-4 space-y-4 overflow-y-auto"},e.createElement(M.E.div,{className:"card-container"},e.createElement("div",{className:"flex w-full items-center justify-between mb-3"},e.createElement(N.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200 font-bold"},"You Pay")),e.createElement("div",{className:`border border-gray-50 dark:border-gray-900 bg-gray-50 dark:bg-gray-900 rounded-lg focus-within:${U?"border-red-300":"border-green-600"} dark:focus-within:${U?"border-red-300":"border-green-600"} flex w-full justify-between items-center px-4`},e.createElement("input",{className:" bg-gray-50 dark:bg-gray-900 text-md outline-none font-bold text-black-100 dark:text-white-100 py-2",value:H,onChange:o=>{$(null);const m=o.target.value,k=(0,Ee.Rv)(m);parseFloat(k)<0?$("Please enter a valid positive number."):Te(k)},type:"number",placeholder:"Amount",ref:I}),e.createElement(Ae,{onClick:()=>s(!0),logo:(0,he.b)(r),title:r})),U&&e.createElement(N.Z,{size:"xs",className:"text-red-600 dark:text-red-300 pt-1.5"},U)),e.createElement(M.E.div,{className:"card-container"},e.createElement("div",{className:"flex w-full items-center justify-between mb-3"},e.createElement(N.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200 font-bold"},"You Get")),i&&e.createElement("div",{className:"border border-gray-50 dark:border-gray-900 bg-gray-50 dark:bg-gray-900 rounded-lg flex w-full justify-between items-center px-4"},!_&&e.createElement(N.Z,{size:"md",className:"font-bold text-black-100 dark:text-white-100"},parseFloat(Y)*1e4>0?(0,l.LHZ)(Y,void 0,4):Y),_&&e.createElement("div",{className:"w-[50px] z-0"},e.createElement(j.Z,{className:"rounded-full bg-gray-50 dark:bg-gray-800"})),e.createElement(Ce,{onClick:()=>S(!0),logo:i.assetImg,chainImg:i.chainSymbolImageUrl,title:i.symbol,subtitle:i.chainName}))))),e.createElement("div",{className:"mt-auto mb-4"},e.createElement("div",{className:"flex items-center justify-center"},e.createElement(N.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200 text-center font-extrabold"},"Powered by Kado"),e.createElement("img",{src:c===d.ThemeName.DARK?J():G(),className:"w-[28px] h-[28px] rounded-full dark:border-[#333333] border-[#cccccc]"})),e.createElement("div",{className:"flex items-center justify-center mt-auto"},e.createElement(N.Z,{size:"xs",className:"text-gray-600 dark:text-gray-200 text-center mb-2"},"You'll be redirected to Kado's website for this transaction")),e.createElement("div",{className:"flex w-full justify-center"},e.createElement(d.Buttons.Generic,{size:"normal",color:U?"#FF707E":"#29A874",onClick:Ie,disabled:!new(y())(Y).isGreaterThan(0)||_||(0,ue.HD)(U)},e.createElement("div",{className:"flex"},e.createElement("span",null,"Buy"),e.createElement("span",{className:"material-icons-outlined ml-1.5"},"open_in_new"))))))),e.createElement(De,{isVisible:b,onClose:()=>s(!1),onCurrencySelect:o=>{A(o),s(!1),I.current&&I.current.focus()}}),e.createElement(Ne,{isVisible:z,onClose:()=>{i?S(!1):g(-1)},onAssetSelect:o=>{T(o),S(!1),I.current&&I.current.focus()}})))}},886970:(V,D,t)=>{t.d(D,{b:()=>x});var l=t(508181),d=(a=>(a.USD="USD",a.CAD="CAD",a.EUR="EUR",a.GBP="GBP",a.MXN="MXN",a.COP="COP",a.INR="INR",a.CHF="CHF",a.AUD="AUD",a.ARS="ARS",a.BRL="BRL",a.CLP="CLP",a.JPY="JPY",a.KRW="KRW",a.PEN="PEN",a.PHP="PHP",a.SGD="SGD",a.TRY="TRY",a.UYU="UYU",a.TWD="TWD",a.VND="VND",a.CRC="CRC",a.SEK="SEK",a.PLN="PLN",a.DKK="DKK",a.NOK="NOK",a.NZD="NZD",a))(d||{});const x=a=>{const y=a?.toUpperCase();return l.r.Countries[y]??l.r.Logos.GenericDark}}}]);
