"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[6412],{465995:(H,u,e)=>{e.d(u,{a:()=>O});var C=e(294184),h=e.n(C),s=e(94608),p=e(202784);const O=(0,p.forwardRef)(({placeholder:A,value:M,onChange:T,name:i,error:g,warning:x,onBlur:y},P)=>p.createElement(p.Fragment,null,p.createElement("div",{className:h()({"!border-red-300":g,"!border-yellow-600":x,"w-full border border-gray-500 rounded-xl flex h-12 bg-white-100 dark:bg-gray-900 py-2 pl-5 pr-[10px] mb-4":!0})},p.createElement("input",{placeholder:A,className:h()({"flex flex-grow text-base dark:text-white-100 text-gray-400 outline-none bg-white-0 placeholder-gray-400::placeholder":!0,"border-red-300":g,"border-yellow-600":x}),value:M,name:i,onChange:T,autoComplete:"off",onBlur:y,ref:P})),g&&p.createElement(s.Z,{size:"sm",color:"text-red-300 mb-4"},g),x&&p.createElement(s.Z,{size:"sm",color:"text-yellow-600 mb-4"},x)));O.displayName="InputComponent"},216412:(H,u,e)=>{e.r(u),e.d(u,{default:()=>se});var C=e(964266),h=e(564510),s=e(339279),p=e.n(s),O=e(726089),A=e(492303),M=e(722912),T=e(472415),i=e(465995),g=e(892742),x=e(128844),y=e(94608),P=e(910416),R=e(164012),k=e(634680),z=e(625890),q=e(372149),B=e(508181),ee=e(8891),te=e.n(ee),ae=e(701743),t=e(202784),J=e(410289),ne=e(553476),le=e(15815),F=e(508634),oe=e(472565),Q=e.n(oe);const re=({updateKeyStore:W,activeWallet:D,setActiveWallet:N,setActiveChain:K})=>{const U=(0,q.p)(),I=(0,J.s0)(),[L,V]=(0,t.useState)(!1),ie=(0,ne.Zl)(A.G),[ce,b]=(0,t.useState)({chainName:"",chainId:"",denom:"",coinType:"",rpcUrl:"",restUrl:"",addressPrefix:"",explorerUrl:"",decimals:""}),[r,w]=(0,t.useState)({}),{chainName:d,chainId:S,denom:f,coinType:Z,rpcUrl:$,restUrl:j,addressPrefix:v,explorerUrl:X,decimals:G}=ce,de=async E=>{try{const a=h.NOo[E.trim()];if(!a)return;const l="https://chains.cosmos.directory",{data:_}=await M.Z.get(`${l}/${a}`).catch(()=>({})),n="https://chains.testcosmos.directory",{data:o}=_?{data:null}:await M.Z.get(`${n}/${a}`).catch(()=>({})),c=_?.chain||o?.chain;if(!c)return;const Y=c.explorers.find(he=>he.kind==="mintscan");b({chainId:c.chain_id,chainName:c.pretty_name,denom:c.denom,coinType:String(c.slip44),addressPrefix:c.bech32_prefix,decimals:String(c.decimals),restUrl:c.best_apis.rest[0].address,rpcUrl:c.best_apis.rpc[0].address,explorerUrl:Y?Y.tx_page.slice(0,-10):c.explorers[0].tx_page.slice(0,-10)})}catch{return}},me=(E,a)=>{if(!(0,le.l)())try{te().track(P.B_.ButtonClick,{buttonType:P.L$.CHAIN_MANAGEMENT,buttonName:E,addedChainName:d,redirectURL:a,time:Date.now()/1e3})}catch(l){(0,O.Tb)(l)}},m=E=>{const{name:a,value:l}=E.currentTarget,_=Object.values(U).filter(o=>o.enabled);let n="";l&&(["coinType","decimals"].includes(a)&&(0,F.W)(l)?n=`Invalid ${a} provided`:["rpcUrl","restUrl","explorerUrl"].includes(a)&&(0,F.S)(l.replace(/ /g,""))&&l.replace(/ /g,"")?.length>0?n=`Invalid ${a} provided`:a==="chainName"&&_.some(o=>o.chainName.toLowerCase()===l.toLowerCase())?n="Chain with same name already exists":a==="chainId"&&(_.some(o=>o.chainId.toLowerCase()===l.toLowerCase())?n="Chain with same id already exists":_.some(o=>(o.testnetChainId??"").toLowerCase()===l.toLowerCase())&&(n="Test chain with same id already exists"))),n?w(o=>({...o,[a]:n})):r[a]&&(delete r[a],w(r)),["rpcUrl","restUrl","explorerUrl"].includes(a)?b(o=>({...o,[a]:l.replace(/ /g,"")})):b(o=>({...o,[a]:l}))},Ee=async E=>{V(!0),E.preventDefault();const a={chainId:S,chainName:d,chainRegistryPath:v,key:d,chainSymbolImageUrl:B.r.Logos.GenericLight,txExplorer:{mainnet:{name:"Explorer",txUrl:X}},apis:{rest:(0,C.Qj6)(j),rpc:(0,C.Qj6)($)},denom:f,bip44:{coinType:Z},addressPrefix:v,gasPriceStep:h.rL4,ibcChannelIds:{},nativeDenoms:{[f]:{coinDenom:v,coinMinimalDenom:f,coinDecimals:Number(G),coinGeckoId:"",icon:B.r.Logos.GenericLight,chain:d}},theme:{primaryColor:"#E18881",gradient:"linear-gradient(180deg, rgba(225, 136, 129, 0.32) 0%, rgba(225, 136, 129, 0) 100%)"},enabled:!0,beta:!0,features:[]};ie({...U,[d]:a}),await(0,h._vH)(500),Q().storage.local.get([R.Pw]).then(async l=>{try{const _=await W(D,d,"UPDATE",a);let n=l?.[R.Pw];n=typeof n=="string"?JSON.parse(n):{},n[d]=a,await Q().storage.local.set({[R.Pw]:JSON.stringify(n)}),await N(_[D.id]),await K(d,a),I("/")}catch{w(n=>({...n,submit:"Unable to add chain"}))}finally{V(!1)}}),me(P.$S.ADD_NEW_CHAIN,"/add-chain")},_e=!S||!d||!f||!Z||!$||!j||!v||!G||Object.values(r).length>0;return t.createElement("form",{className:"mx-auto w-[344px] mb-5",onSubmit:Ee},t.createElement(i.a,{placeholder:"Chain Id (Ex: juno-1)",value:S,name:"chainId",onChange:m,error:r.chainId,onBlur:E=>de(E.currentTarget.value)}),t.createElement(i.a,{placeholder:"Chain Name (Ex: Juno)",value:d,name:"chainName",onChange:m,error:r.chainName}),t.createElement(i.a,{placeholder:"New RPC URL (Without Trailing Slash)",value:$,name:"rpcUrl",onChange:m,error:r.rpcUrl}),t.createElement(i.a,{placeholder:"New REST URL (Without Trailing Slash)",value:j,name:"restUrl",onChange:m,error:r.restUrl}),t.createElement(i.a,{placeholder:"Address Prefix (Ex: juno)",value:v,name:"addressPrefix",onChange:m}),t.createElement(i.a,{placeholder:"Native Denom (Ex: ujuno)",value:f,name:"denom",onChange:m}),t.createElement(i.a,{placeholder:"Coin Type (Ex: 118)",value:Z,name:"coinType",onChange:m,error:r.coinType}),t.createElement(i.a,{placeholder:"Decimals (Ex: 6)",value:G,name:"decimals",onChange:m,error:r.decimals}),t.createElement(i.a,{placeholder:"Block explorer URL (Optional)",value:X,name:"explorerUrl",onChange:m,error:r.explorerUrl}),r.submit?t.createElement(T._,{text:r.submit}):null,t.createElement("div",{className:"flex gap-x-4 mt-3"},t.createElement(s.Buttons.Generic,{className:"rounded-2xl w-full font-bold py-3 dark:bg-gray-900 bg-gray-900 text-gray-900 dark:text-white-100 h-12",type:"reset",onClick:()=>I("/"),style:{boxShadow:"none"}},"Cancel"),t.createElement(s.Buttons.Generic,{className:"rounded-2xl w-full font-bold py-3 text-gray-900 dark:text-white-100 relative h-12",style:{backgroundColor:"#E18881",boxShadow:"none"},type:"submit",disabled:L||_e},L?t.createElement(x.Z,null):"Add chain")))};function se(){const W=(0,J.s0)(),[D,N]=(0,t.useState)(!1),K=(0,z.Af)(),{activeWallet:U,setActiveWallet:I}=(0,z.ZP)(),L=(0,k.N8)();return t.createElement("div",{className:"relative overflow-clip m-auto"},t.createElement(ae.ZP,{isShown:D,toggler:()=>N(!D)}),t.createElement(g.Z,{header:t.createElement(s.Header,{title:"Add Chain",action:{onClick:()=>{W("/home")},type:s.HeaderActionType.BACK}})},t.createElement("div",{className:"w-[400px] h-[600px] max-h-[600px] overflow-y-auto bg-gray-50 dark:bg-black-100"},t.createElement("div",{className:"rounded-xl mx-auto w-[344px] flex items-center h-[68px] bg-white-100 dark:bg-gray-900 py-2 pl-5 pr-[10px] mt-7 mb-4"},t.createElement("img",{className:"mr-[16px]",src:B.r.Misc.Warning,width:"40",height:"40"}),t.createElement("div",{className:"flex flex-col gap-y-[2px]"},t.createElement(y.Z,{size:"sm",color:"text-gray-400 font-medium"},"Caution:"),t.createElement(y.Z,{size:"sm",color:"font-bold dark:text-white-100 text-gray-900"},"Only add custom networks you trust."))),t.createElement(re,{updateKeyStore:K,activeWallet:U,setActiveWallet:I,setActiveChain:L}))))}},508634:(H,u,e)=>{e.d(u,{S:()=>C,W:()=>h});function C(s){return!/^(http|https):\/\/[^ "]+$/.test(s)}function h(s){return!/^\d+$/.test(s)}}}]);
