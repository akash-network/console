"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[5238],{335238:(fe,A,t)=>{t.r(A),t.d(A,{default:()=>ce});var I=t(124658),_e=t.n(I),n=t(964266),o=t(339279),ge=t.n(o),V=t(206391),Y=t.n(V),q=t(294184),b=t.n(q),ee=t(892742),te=t(128844),ae=t(903049),v=t(508181),ne=t(673708),e=t(202784),se=t(410289),m=t(610675),w=t(170849),B=t(15815);const L="pending-tx-mobile-qr-code-banner",le={loading:{title:"In Progress..."},success:{title:"Complete"},failed:{title:"Failed"}};function oe({setShowMobileQrCode:x,data:c}){const d=()=>{x(!1),sessionStorage.setItem(L,"true")};return e.createElement("div",{className:"mb-4 relative"},e.createElement("img",{src:c.img_src}),e.createElement("button",{className:"absolute top-[20px] right-[20px] w-[8px]",onClick:d},e.createElement("img",{src:ne.Cross})))}function ce(){const x=(0,se.s0)(),[c,d]=(0,e.useState)(""),[re,ie]=(0,e.useState)(!sessionStorage.getItem(L)),{theme:me}=(0,o.useTheme)(),y=(0,e.useRef)(null),{pendingTx:a,setPendingTx:u}=(0,n.EEe)(),R=n.rNU.useOperateCosmosTx(),de=(0,n.BJx)(),xe=(0,n.f_Q)(),ue=(0,n.fdZ)(),{txType:s,title1:U,subtitle1:W,sentTokenInfo:E,sentAmount:S,receivedAmount:K,sentUsdValue:H,receivedTokenInfo:Q,txStatus:r,txHash:C,sourceChain:F,sourceNetwork:j}=a??{},Z=(0,n.a74)(),l=(0,e.useMemo)(()=>F||Z,[Z,F]),G=(0,n.obn)(),f=(0,e.useMemo)(()=>j||G,[G,j]),M=(0,n.xxU)(l,f),k=(0,n.SFn)(l);(0,e.useEffect)(()=>{const p=()=>{de(l),xe(),ue(l)};a&&a.promise&&a.promise.then(async i=>{if("code"in i?i&&(0,I.isDeliverTxSuccess)(i)?u({...a,txStatus:"success"}):u({...a,txStatus:"failed"}):a.txType==="cw20TokenTransfer"&&u({...a,txStatus:"success"}),a.txType==="secretTokenTransfer"){d(i.transactionHash);const O=i;let J;O?.tx?.auth_info?.fee?.amount&&(J=O?.tx?.auth_info?.fee?.amount[0].amount),R({txHash:O.transactionHash,txType:n.pb0.SecretTokenTransaction,metadata:(0,n.F8j)(a.sentTokenInfo?.coinMinimalDenom??""),feeQuantity:J,feeDenomination:"uscrt",amount:a.txnLogAmount,forceChain:l,forceNetwork:f,forceWalletAddress:k,chainId:M})}a.txType==="cw20TokenTransfer"&&(d(i.transactionHash),R({txHash:i.transactionHash,txType:n.pb0.Send,metadata:(0,n.dSc)(a?.toAddress??"",{amount:new(Y())(a.sentAmount??"").times(10**(a.sentTokenInfo?.coinDecimals??6)).toString(),denom:a.sentTokenInfo?.coinMinimalDenom??""}),feeQuantity:a.feeQuantity,feeDenomination:a.feeDenomination,amount:a.txnLogAmount,forceChain:l,forceNetwork:f,forceWalletAddress:k,chainId:M})),p()}).catch(()=>{a.txType==="cw20TokenTransfer"&&u({...a,txStatus:"failed"}),p()})},[l,k,f,M]),(0,e.useEffect)(()=>{C&&d(C)},[C]);const{formatHideBalance:_}=(0,ae.Zh)(),{status:Ee,data:P}=(0,n.Ndh)(),[N,g]=(0,e.useState)(!1),T=S&&E?(0,n.LHZ)(S,E.coinDenom):void 0,$=K&&Q?(0,n.LHZ)(K,Q.coinDenom):void 0,h=s==="delegate"||s==="send"||s==="liquidity/add",z=s==="undelegate"||s==="receive"||s==="liquidity/remove",{explorerTxnUrl:X}=(0,n.xGX)({forceTxHash:c,forceChain:l}),D=s?["ibc/transfer","send","secretTokenTransfer","cw20TokenTransfer"].includes(s):!1;return e.createElement(ee.Z,null,e.createElement(o.Header,{title:`Transaction ${le[r??"loading"].title}`}),e.createElement("div",{className:"flex h-[528px] p-6 flex-col items-center overflow-y-auto"},e.createElement("div",{className:"bg-white-100 dark:bg-gray-950 rounded-2xl w-full flex flex-col items-center p-4 mb-4"},r==="loading"&&e.createElement(te.T,{color:m.w.green600,className:"w-20 h-20"}),r==="success"&&e.createElement("img",{src:v.r.Activity.SendDetails,className:"w-20 h-20"}),r==="failed"&&e.createElement("img",{src:v.r.Activity.Error,className:"w-20 h-20"}),e.createElement("div",{className:"text-xl font-bold text-black-100 dark:text-white-100 text-left mt-1 break-all"},U),D?e.createElement("div",{className:"text-sm font-medium text-black-100 dark:text-white-100 mt-1"},r==="success"?"sent successfully to":r==="failed"?"failed sending to":"sending to"):null,D?e.createElement("div",{className:"flex rounded-full gap-[6px] py-[6px] pl-2 pr-3 bg-gray-50 dark:bg-gray-900 text-sm font-bold text-black-100 dark:text-white-100 mt-2 items-center"},e.createElement("div",{className:"material-icons-round !text-[18px] text-gray-200 dark:text-gray-800"},"account_circle"),W):e.createElement("div",{className:"text-base text-gray-600 dark:text-gray-400 text-center break-all mt-1"},W),D?null:e.createElement("div",{className:"flex mt-2 space-x-2 text-sm items-center"},s==="swap"?e.createElement(e.Fragment,null,$&&e.createElement("p",{className:"text-right font-semibold text-green-600 dark:text-green-600"},"+ ",_($)),T&&e.createElement("p",{className:"text-right text-gray-600 dark:text-gray-400"},"- ",_(T))):e.createElement(e.Fragment,null,H&&e.createElement("p",{className:b()("text-right font-semibold",{"text-black-100 dark:text-white-100":!z&&!h,"text-red-600 dark:text-red-300":h,"text-green-600 dark:text-green-600":z})},"(",h&&"-"," $",_(Number(H).toFixed(2)),")"),T&&e.createElement("p",{className:b()("text-right text-gray-600 dark:text-gray-400")},h&&"-"," ",_(T))))),c&&e.createElement("div",{className:"rounded-2xl w-full mb-4 px-6 py-4 bg-white-100 dark:bg-gray-950 cursor-pointer flex items-center",onClick:()=>{y.current?.click(),w.i.copyText(c),g(!0),setTimeout(()=>g(!1),2e3)}},e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-sm font-bold text-black-100 dark:text-white-100 mb-1"},"Transaction ID"),e.createElement("div",{className:"text-md font-medium text-gray-600 dark:text-gray-400"},(0,n.Hnh)(c))),e.createElement(o.Buttons.CopyWalletAddress,{copyIcon:v.r.Activity.Copy,ref:y,color:(0,B.l)()?m.w.compassPrimary:m.w.green600,className:N?"":"hidden"}),!N&&e.createElement("span",{className:"!text-lg material-icons-round text-black-100 dark:text-white-100 bg-gray-50 dark:bg-gray-900 rounded-full p-2 ml-2",onClick:()=>{y.current?.click(),w.i.copyText(c),g(!0),setTimeout(()=>g(!1),2e3)}},"content_copy"),X&&!N?e.createElement("span",{className:"!text-lg material-icons-round text-black-100 dark:text-white-100 bg-gray-50 dark:bg-gray-900 rounded-full p-2 ml-2",onClick:p=>{p.stopPropagation(),window.open(X,"_blank")}},"open_in_new"):null),!(0,B.l)()&&re&&Ee==="success"&&P&&P.visible?e.createElement(oe,{setShowMobileQrCode:ie,data:P}):null,e.createElement("div",{className:"w-full flex gap-4"},e.createElement(o.Buttons.Generic,{color:me===o.ThemeName.DARK?m.w.gray900:m.w.gray300,size:"normal",className:"w-full",onClick:()=>x("/home")},e.createElement("p",{className:"!text-black-100 dark:!text-white-100"},"Home")),D&&!U?.toLowerCase()?.includes("nft")?e.createElement(o.Buttons.Generic,{color:m.w.green600,size:"normal",className:"w-full",onClick:()=>x(`/send?assetCoinDenom=${E?.ibcDenom||E?.coinMinimalDenom}`,{replace:!0}),disabled:r!=="success"},"Send Again"):null)))}}}]);
