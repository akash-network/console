"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[3962],{465995:(k,E,t)=>{t.d(E,{a:()=>r});var a=t(294184),d=t.n(a),s=t(94608),u=t(202784);const r=(0,u.forwardRef)(({placeholder:y,value:D,onChange:O,name:e,error:_,warning:C,onBlur:b},A)=>u.createElement(u.Fragment,null,u.createElement("div",{className:d()({"!border-red-300":_,"!border-yellow-600":C,"w-full border border-gray-500 rounded-xl flex h-12 bg-white-100 dark:bg-gray-900 py-2 pl-5 pr-[10px] mb-4":!0})},u.createElement("input",{placeholder:y,className:d()({"flex flex-grow text-base dark:text-white-100 text-gray-400 outline-none bg-white-0 placeholder-gray-400::placeholder":!0,"border-red-300":_,"border-yellow-600":C}),value:D,name:e,onChange:O,autoComplete:"off",onBlur:b,ref:A})),_&&u.createElement(s.Z,{size:"sm",color:"text-red-300 mb-4"},_),C&&u.createElement(s.Z,{size:"sm",color:"text-yellow-600 mb-4"},C)));r.displayName="InputComponent"},653962:(k,E,t)=>{t.r(E),t.d(E,{default:()=>V});var a=t(964266),d=t(564510),s=t(339279),u=t.n(s),r=t(465995),y=t(892742),D=t(94608),O=t(508181),e=t(202784),_=t(410289),C=t(610675),b=t(842543),A=t(15815),N=t(508634);function H(){const I=(0,_.s0)(),P=(0,_.TH)().state,g=(0,a.a74)(),z=(0,a.DI5)(),j=(0,a.X82)(),X=(0,a.AeS)(),Y={...j,...X},W=(0,a.obn)(),J=(0,a.lSw)(),Q=(0,a.G01)(),q=(0,a.Gw1)(),[M,v]=(0,e.useState)({name:"",coinDenom:"",coinMinimalDenom:"",coinDecimals:"",coinGeckoId:"",icon:"",chain:g}),[ee,p]=(0,e.useState)(!1),[ne,L]=(0,e.useState)(!1),[te,oe]=(0,e.useState)(!1),[B,S]=(0,e.useState)(!1),[l,K]=(0,e.useState)({}),[ae,G]=(0,e.useState)(!1),{name:ie,coinDenom:F,coinMinimalDenom:R,coinDecimals:Z,coinGeckoId:le,icon:se,chain:T}=M,{lcdUrl:$}=(0,a.U9i)(),U=(0,e.useRef)(null),w=(0,a.uVs)(),ce=async f=>{let n=f.currentTarget.value.trim();if(!n&&n.toLowerCase().startsWith("ibc/"))return;S(!0),p(!1),L(!1);let c=!1;try{const o=await(0,d.bt3)(g,W==="testnet");if(o&&o.assets)for(const i of o.assets){let m=i.denom.trim(),x=!1;if(m&&(m.startsWith("cw20:")&&(x=!0,m=m.slice(5)),n.startsWith("cw20:")&&(n=n.slice(5)),m.toLowerCase()===n.toLowerCase())){const{name:Ee,symbol:De,image:_e,decimals:he,coingecko_id:Ce}=i;c=!0,p(!!x),v(ge=>({...ge,name:Ee,coinDenom:De,coinMinimalDenom:m,coinDecimals:String(he),coinGeckoId:Ce,icon:_e}));break}}}catch{}if(c===!1)try{const o=await(0,b.s)($??"",n);typeof o!="string"&&o.symbol?(c=!0,p(!0),v(i=>({...i,name:o.name,coinDenom:o.symbol,coinDecimals:o.decimals,coinMinimalDenom:n}))):p(!1)}catch{p(!1)}if(c===!1&&w)try{const o=await(0,a.auI)({activeNetwork:W,activeChain:g,infoType:a.SGB.EVM_RPC_URL}),i=await(0,a.auI)({activeNetwork:W,activeChain:g,infoType:a.SGB.EVM_CHAIN_ID}),m=await(0,d.d_E)(n,o,i);c=!0,L(!0),v(x=>({...x,name:m.name,coinDenom:m.symbol,coinDecimals:String(m.decimals),coinMinimalDenom:n}))}catch{L(!1)}if(c===!1&&T==="mainCoreum")try{const{symbol:o,precision:i}=await(0,a.yaX)($??"",n);c=!0,v(m=>({...m,coinDenom:o,coinMinimalDenom:n,coinDecimals:i}))}catch{}oe(c),S(!1)},h=f=>{const{name:n,value:c}=f.currentTarget;let o="";if(c)if(n==="coinMinimalDenom"){const i=c.trim().toLowerCase();Object.keys(Y).map(x=>x.toLowerCase()).includes(i)?o="Token with same minimal denom already exists":!w&&(i.startsWith("erc20/")||(0,d.Ohs)(i))?o="We don't support adding erc20 token yet.":i.startsWith("ibc/")&&(o="We don't support adding ibc token yet.")}else n==="coinDecimals"&&(0,N.W)(c)?o="Incorrect decimal value":n==="icon"&&(0,N.S)(c)&&(o="Invalid Icon URL");o?K(i=>({...i,[n]:o})):l[n]&&(delete l[n],K(l)),v(i=>({...i,[n]:c.trim()}))};(0,e.useEffect)(()=>{P&&P.coinMinimalDenom&&h({currentTarget:{name:"coinMinimalDenom",value:P.coinMinimalDenom}})},[P]),(0,e.useEffect)(()=>{U.current&&U.current.focus()},[]);const me=async f=>{f.preventDefault(),G(!0);const n={...M,coinDecimals:Number(M.coinDecimals)};n.name||(n.name=void 0),ee?await J(M.coinMinimalDenom,n,T):ne?await q(M.coinMinimalDenom,n,T):await Q(M.coinMinimalDenom,n,T),G(!1),I("/")},re=!B&&!te&&R&&!l.coinMinimalDenom,de=!F||!R||!Z||ae||B||!!l.coinMinimalDenom||!!l.coinDenom||!!l.coinDecimals||!!l.coinGeckoId||!!l.name||!!l.icon,{coinMinimalDenomPlaceholder:ue,coinDenomPlaceholder:fe}=(0,e.useMemo)(()=>{let f="Coin minimal denom (ex: juno1...5awr)",n="Coin denom (ex: NETA)";return(0,A.l)()&&(f="Coin minimal denom (ex: sei16...xx00)",n="Coin denom (ex: ECLIP)",w&&(f="Contract address/Coin minimal denom (ex: 0x.../sei16...xx00)",n="Symbol/Coin denom (ex: PYTH/ECLIP)")),{coinMinimalDenomPlaceholder:f,coinDenomPlaceholder:n}},[w]);return e.createElement("form",{className:"mx-auto w-[344px] mb-5",onSubmit:me},e.createElement(r.a,{placeholder:ue,value:R,name:"coinMinimalDenom",onChange:h,error:l.coinMinimalDenom,warning:re?`Make sure the coin minimal denom is correct and it belongs to ${z[g].chainName} chain`:"",onBlur:ce,ref:U}),e.createElement(r.a,{placeholder:fe,value:F,name:"coinDenom",onChange:h,error:l.coinDenom}),e.createElement(r.a,{placeholder:"Coin decimals (ex: 6)",value:Z,name:"coinDecimals",onChange:h,error:l.coinDecimals}),e.createElement(r.a,{placeholder:"Token name (optional)",value:ie,name:"name",onChange:h,error:l.name}),e.createElement(r.a,{placeholder:"Coin gecko id (optional)",value:le,name:"coinGeckoId",onChange:h,error:l.coinGeckoId}),e.createElement(r.a,{placeholder:"Icon url (optional)",value:se,name:"icon",onChange:h,error:l.icon}),B?e.createElement("p",{className:"font-bold text-gray-900 dark:text-gray-50 text-center mb-2"},"Finding token info..."):null,e.createElement("div",{className:"flex gap-x-4 mt-3"},e.createElement(s.Buttons.Generic,{className:"rounded-2xl w-full font-bold py-3 dark:bg-gray-900 bg-gray-900 text-gray-900 dark:text-white-100 h-12",type:"reset",onClick:()=>I("/"),style:{boxShadow:"none"}},"Cancel"),e.createElement(s.Buttons.Generic,{className:"rounded-2xl w-full font-bold py-3 text-gray-900 dark:text-white-100 relative h-12",style:{backgroundColor:C.w.getChainColor(g),boxShadow:"none"},type:"submit",disabled:de},"Add Token")))}function V(){const I=(0,_.s0)();return e.createElement("div",{className:"relative overflow-clip m-auto"},e.createElement(y.Z,{header:e.createElement(s.Header,{title:"Add Token",action:{onClick:()=>{I("/home")},type:s.HeaderActionType.BACK}})},e.createElement("div",{className:"w-[400px] h-[600px] max-h-[600px] overflow-y-auto bg-gray-50 dark:bg-black-100"},e.createElement("div",{className:"rounded-xl mx-auto w-[344px] flex items-center h-[68px] bg-white-100 dark:bg-gray-900 py-2 pl-5 pr-[10px] mt-7 mb-4"},e.createElement("img",{className:"mr-[16px]",src:O.r.Misc.Warning,width:"40",height:"40"}),e.createElement("div",{className:"flex flex-col gap-y-[2px]"},e.createElement(D.Z,{size:"sm",color:"text-gray-400 font-medium"},"Caution:"),e.createElement(D.Z,{size:"sm",color:"font-bold dark:text-white-100 text-gray-900"},"Only add tokens you trust."))),e.createElement(H,null))))}},842543:(k,E,t)=>{t.d(E,{s:()=>s});var a=t(722912),d=t(348834).Buffer;async function s(u,r){const y=`${u}/cosmwasm/wasm/v1/contract/${r}/smart/${d.from('{"token_info":{}}').toString("base64")}`,{data:D}=await a.Z.get(y);return D.error&&D.error.toLowerCase().includes("decoding bech32 failed")?"Invalid Contract Address":D.data}},508634:(k,E,t)=>{t.d(E,{S:()=>a,W:()=>d});function a(s){return!/^(http|https):\/\/[^ "]+$/.test(s)}function d(s){return!/^\d+$/.test(s)}}}]);
