"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[7512],{367512:(j,_,a)=>{a.r(_),a.d(_,{default:()=>S});var h=a(124658),F=a.n(h),n=a(964266),D=a(122298),c=a(339279),J=a.n(c),y=a(892742),C=a(128844),i=a(94608),O=a(910416),L=a(634680),N=a(372149),d=a(508181),v=a(378268),e=a(202784),p=a(410289),E=a(610675),w=a(170849),A=a(861111);const R={loading:{title:"In Progress..."},success:{title:"Complete"},failed:{title:"Failed"}};function S(){const{validator:m,mode:l,provider:o}=(0,p.TH)().state,{pendingTx:t,setPendingTx:u}=(0,n.EEe)(),x=(0,p.s0)(),M=(0,N.p)(),g=(0,L.a7)(),[r,U]=(0,e.useState)(""),[I,b]=(0,e.useState)(""),[B,T]=(0,e.useState)(!1),f=(0,n.obn)(),{data:W}=(0,n.pD_)(m),K=(0,n.BJx)(),G=(0,n.f_Q)(),{refetchDelegations:H}=(0,n.fHb)(),{refetchDelegatorRewards:z}=(0,n.nDu)(),{data:Z}=(0,n.S2A)(),{theme:k}=(0,c.useTheme)();(0,e.useEffect)(()=>{U(t?.txHash)},[t?.txHash]),(0,e.useEffect)(()=>{t&&t.promise&&t.promise.then(s=>{s&&(0,h.isDeliverTxSuccess)(s)?u({...t,txStatus:"success"}):u({...t,txStatus:"failed"})},()=>u({...t,txStatus:"failed"})).catch(()=>{u({...t,txStatus:"failed"})}).finally(()=>{K(g),G(),z(),g==="lava"&&Z?.restaking.extension==="active"&&H()})},[]);const P=(0,e.useMemo)(()=>{const s=M[g].txExplorer;return!s?.[f]?.txUrl||!r?"":`${s?.[f]?.txUrl}/${r}`},[M,g,f,r]),$=(0,e.useMemo)(()=>({CLAIM_REWARDS:{loading:"claiming rewards",success:"claimed successfully",failed:"failed claiming"},DELEGATE:{loading:"staking",success:"staked successfully",failed:"failed staking"},UNDELEGATE:{loading:"unstaking",success:"unstaked successfully",failed:"failed unstaking"},CANCEL_UNDELEGATION:{loading:"cancelling unstake",success:"unstake cancelled successfully",failed:"failed cancelling unstake"},REDELEGATE:{loading:`switching ${o?"provider":"validator"}`,success:`${o?"provider":"validator"} switched successfully`,failed:`failed switching ${o?"provider":"validator"}`},CLAIM_AND_DELEGATE:{loading:"claiming and staking rewards",success:"claimed and staked successfully",failed:"failed claiming and staking"}}),[o]);(0,e.useEffect)(()=>{let s=l==="CLAIM_REWARDS"||l==="UNDELEGATE"?t?.receivedUsdValue:t?.sentUsdValue;s==="-"&&(s=l==="CLAIM_REWARDS"||l==="UNDELEGATE"?t?.receivedAmount:t?.sentAmount),b(s)},[l,t?.receivedAmount,t?.receivedUsdValue,t?.sentAmount,t?.sentUsdValue]);const V=()=>{w.i.copyText(r??""),T(!0),setTimeout(()=>{T(!1)},2e3)};return e.createElement(y.Z,null,e.createElement(c.Header,{title:`Transaction ${R[t?.txStatus??"loading"].title}`}),e.createElement("div",{className:"flex flex-col justify-between p-6",style:{height:"calc(100% - 72px)"}},e.createElement("div",{className:"flex flex-col gap-y-4"},e.createElement("div",{className:"bg-white-100 dark:bg-gray-950 rounded-2xl w-full flex flex-col gap-y-2 items-center p-4"},e.createElement("div",{className:"flex items-center justify-center h-[100px] w-[100px]"},t?.txStatus==="loading"&&e.createElement(C.T,{color:"#29a874",className:"w-full h-full"}),t?.txStatus==="success"&&e.createElement("img",{src:d.r.Activity.TxSwapSuccess,width:75,height:75}),t?.txStatus==="failed"&&e.createElement("img",{src:d.r.Activity.TxSwapFailure,width:75,height:75})),e.createElement("div",{className:"flex flex-col gap-y-1 items-center"},e.createElement(i.Z,{size:"lg",className:"font-bold",color:"text-black-100 dark:text-white-100"},I),e.createElement(i.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-medium text-center"},$[l]?.[t?.txStatus??"loading"])),e.createElement("div",{className:"flex gap-x-2"},m&&e.createElement("div",{className:"flex items-center pr-3 pl-2 py-1.5 rounded-full bg-gray-50 dark:bg-gray-900 gap-x-1.5"},e.createElement("img",{className:"rounded-full",width:20,height:20,src:W??m?.image??d.r.Misc.Validator,onError:(0,A._)(v.GenericLight)}),e.createElement("span",{className:"text-sm font-bold text-black-100 dark:text-white-100 text-center"},(0,D.MD)(m?.moniker,10,0))),o&&e.createElement("div",{className:"flex items-center pr-3 pl-2 py-1.5 rounded-full bg-gray-50 dark:bg-gray-900 gap-x-1.5"},e.createElement("img",{className:"rounded-full",width:20,height:20,src:d.r.Misc.Validator,onError:(0,A._)(v.GenericLight)}),e.createElement("span",{className:"text-sm font-bold text-black-100 dark:text-white-100 text-center"},(0,D.MD)(o.moniker,10,0)))),o&&t?.txStatus==="success"&&e.createElement("div",{className:"flex items-start gap-x-3 p-4 rounded-2xl bg-blue-200 dark:bg-blue-900"},e.createElement("span",{className:"material-icons-round text-blue-600 dark:text-blue-400 !text-lg"},"info"),e.createElement(i.Z,{size:"xs",color:"text-black-100 dark:text-white-100"},"Your transaction was successful and updated balance will be reflected shortly. Rest assured, your funds are safe."))),r&&e.createElement(c.GenericCard,{isRounded:!0,title:e.createElement(i.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-1"},"Transaction ID"),subtitle:e.createElement(i.Z,{size:"md",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},(0,n.Hnh)(r)),className:"py-4 px-6 bg-white-100 dark:bg-gray-950",size:"md",icon:e.createElement("div",{className:"flex gap-x-3 items-center"},B?e.createElement("img",{src:d.r.Misc.CheckGreen,width:36,height:36}):e.createElement("span",{className:"material-icons-round text-black-100 dark:text-white-100 p-2 rounded-full bg-gray-50 dark:bg-gray-900 !text-lg",onClick:V},"content_copy"),P&&e.createElement("span",{className:"material-icons-round text-black-100 dark:text-white-100 p-2 rounded-full bg-gray-50 dark:bg-gray-900 !text-lg",onClick:s=>{s.stopPropagation(),window.open(P,"_blank")}},"open_in_new"))})),e.createElement("div",{className:"flex gap-x-4"},e.createElement(c.Buttons.Generic,{onClick:()=>x("/home"),size:"normal",color:k===c.ThemeName.DARK?E.w.gray800:E.w.gray200,className:"mt-auto w-full"},e.createElement(i.Z,{color:"dark:text-white-100 text-black-100"},"Home")),e.createElement(c.Buttons.Generic,{onClick:()=>{x(l==="DELEGATE"?-1:`/stake?pageSource=${O.q.StakeTxnPage}`)},color:t?.txStatus==="failed"||l==="DELEGATE"?E.w.green600:k===c.ThemeName.DARK?E.w.white100:E.w.black100,size:"normal",className:"mt-auto w-full",disabled:t?.txStatus==="loading"},e.createElement(i.Z,{color:`${t?.txStatus==="failed"||l==="DELEGATE"?"text-white-100 dark:text-white-100":"text-white-100 dark:text-black-100"}`},t?.txStatus==="failed"?"Retry":l==="DELEGATE"?"Stake Again":"Done")))))}}}]);
