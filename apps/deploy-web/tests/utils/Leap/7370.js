(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([[7370],{598916:(Be,oe,n)=>{"use strict";n.d(oe,{D:()=>ye,KE:()=>Ee,rb:()=>X});var t=n(202784),M=n(14080);function X(){return t.createElement("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-4 flex-col p-4 w-full"},t.createElement(M.Z,{count:1,width:100,height:16}),t.createElement("div",null,t.createElement(M.Z,{count:1,width:50,height:30}),t.createElement(M.Z,{count:1,width:75,height:20})),t.createElement(M.Z,{count:1,borderRadius:16,height:70}))}function pe(){return React.createElement("div",{className:"flex-1 p-7 gap-y-4 min-w-[344px]"},React.createElement(Skeleton,{count:1}),React.createElement(Skeleton,{count:2}),React.createElement(Skeleton,{count:4}))}function ye(){return t.createElement("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-1.5 flex-col p-4 w-full"},t.createElement(M.Z,{width:100,height:20}),t.createElement(M.Z,{width:336,height:40}),t.createElement(M.Z,{width:100,height:24}))}function Ee(){return t.createElement("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-950 w-full rounded-2xl gap-x-4"},t.createElement(M.Z,{circle:!0,width:28,height:28,className:"!z-0"}),t.createElement(M.Z,{count:1,width:100,height:16,className:"!z-0"}))}},276603:(Be,oe,n)=>{"use strict";n.d(oe,{Z:()=>pe,m:()=>X});var t=n(202784),M=n(14080);function X(){return t.createElement("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-900 w-full rounded-2xl my-2"},t.createElement(M.Z,{circle:!0,width:28,height:28,className:"z-0"}),t.createElement("div",{className:"w-[120px] ml-2"},t.createElement(M.Z,{count:1,className:"z-0"}),t.createElement(M.Z,{count:1,className:"z-0"})))}function pe(){return t.createElement(t.Fragment,null,t.createElement(X,null),t.createElement(X,null),t.createElement(X,null),t.createElement(X,null),t.createElement(X,null))}},675335:(Be,oe,n)=>{"use strict";n.d(oe,{u:()=>t});var t=(M=>(M.signResponse="sign-response",M.signingPopupOpen="signing-popup-open",M.signTransaction="sign-transaction",M.signSeiEvmResponse="sign-sei-evm-response",M))(t||{})},367738:(Be,oe,n)=>{"use strict";n.d(oe,{_d:()=>q,qe:()=>D});var t=n(964266),M=n(564510),X=n(395362),pe=n(389320),ye=n(675335),Ee=n(164012),e=n(336023),C=n.n(e),ve=n(789405),Me=n(105959),Ze=n(472565),ke=n.n(Ze),V=n(348834).Buffer;const Le=400,we=600;ke().tabs.onRemoved.addListener(()=>{});async function be(){const E=await ke().storage.local.get([Ee.Pw]);if(E[Ee.Pw])return JSON.parse(E[Ee.Pw])}const q=async()=>{const E=await be()??{};return Object.assign(M.NOo,Object.keys(E).reduce((y,w)=>(y[E[w].chainId]=w,y),{}),{"elgafar-1":"stargaze"})},Ne=async E=>{const y=await(0,t.eli)(),w=Object.values(y).filter(W=>W.enabled).map(W=>W.chainId),v=Object.values(y).filter(W=>W.enabled).map(W=>W.testnetChainId),k=await be()??{},T=Object.values(k).filter(W=>W.enabled).map(W=>W.chainId),Z=[...w,...v,...T];return E.reduce((W,ue)=>(W[ue]=Z.indexOf(ue)!==-1,W),{})};async function D(E,y,w,v){const k=w.origin===pe.x3||w.origin===pe.s3;let T=!v;v&&E.forEach(ue=>{(y?.[v]?.[ue]||[]).includes(w?.origin)||(T=!0)});const Z=await Ne(E),W=Object.keys(Z).filter(ue=>!!Z[ue]);return W.length&&k&&(T=!1,await(0,ve.E)(E,[v],w.origin)),{validChainIds:W,isNewChainPresent:T}}const de=async()=>{const{connections:E={}}=await browser.storage.local.get(CONNECTIONS);return E},Re=async()=>{const{"active-wallet":E={}}=await browser.storage.local.get([ACTIVE_WALLET]);return E},Ke=async()=>(await browser.storage.local.get([ACTIVE_WALLET_ID]))[ACTIVE_WALLET_ID];async function tt(E,y){const[w,v]=await Promise.all([Ke(),de()]);return await D(E,v,y,w)}const le={},he={};async function $e(){return le.length===0?void 0:[await browser.windows.get(le[0],{populate:!0})]}function a(E){return E?E.find(y=>y.id?y.type==="popup"&&Object.values(le).includes(y.id):!1):void 0}async function z(E,y){let w="index.html#/";E!=="login"&&(w=w+E),y&&(w=w+y);const v={width:Le,height:we,type:"popup",left:0,top:0,url:w};if(le[w]||he[w])try{let k=le[w];if(!k){const Z=await he[w];Z.id&&(k=Z.id)}const T=await browser.windows.get(k,{populate:!0});if(T.tabs?.length){const[Z]=T.tabs;if(Z?.id)await browser.tabs.update(Z.id,{active:!0,url:w});else throw new Error("No tabs")}else throw new Error("No tabs")}catch(k){try{if(k.message.includes("No tab with id")){const T=browser.windows.create(v);he[w]=T;const Z=await T;Z.id&&(le[w]=Z.id)}}finally{delete he[w]}}else try{const k=browser.windows.create(v);he[w]=k;const T=await k;return T.id&&(le[w]=T.id),T}finally{delete he[w]}}ke().windows.onRemoved.addListener(E=>{Object.entries(le).forEach(([w,v])=>{v===E&&delete le[w]})});async function at(E){const[y,w]=await Promise.all([Re(),de()]);return!!(w?.[y.id]?.[E?.chainId]||[]).includes(E.origin)}async function lt(E){const[y,w]=await Promise.all([Re(),de()]);let v=w[y.id]?.[E?.chainId]||[];return v.includes(E.origin)?(v=v.filter(k=>k!==E.origin),w[y.id][E.chainId]=v,await browser.storage.local.set({[CONNECTIONS]:w}),!0):!1}async function ct(){const E=await getChains();try{const w=(await browser.storage.local.get([BETA_CHAINS]))[BETA_CHAINS];return{...E,...JSON.parse(w??"{}")}}catch{return E}}async function rt(E){const{"active-wallet":y}=await browser.storage.local.get([ACTIVE_WALLET]);let v=(await q())[E];return v=v==="cosmoshub"?"cosmos":v,y.addresses[v]}async function Ae(E){const y=await Re(),w=`seed-phrase/${y.id}`,k=(await chrome.storage.local.get([w]))[w];if(k){const Ce=V.from(k,"hex");if(Ce.length===32)return Ce}const T=await rt("secret-4"),Z=getStorageAdapter();initStorage(Z);const W=await KeyChain.getSigner(y.id,E,{addressPrefix:"secret",coinType:"529"}),ue=CryptoJs.SHA256(await W.signAmino(T,V.from(JSON.stringify({account_number:0,chain_id:"secret-4",fee:[],memo:"Create leap Secret encryption key. Only approve requests by Leap.",msgs:[],sequence:0}))));return await chrome.storage.local.set({[`seed-phrase/${y.id}`]:ue.toString()}),V.from(ue.toString())}function je(E){const y=new RegExp(/^(http|https):\/\/[^ "]+$/),w=new RegExp(/^\d+$/);if(!y.test(E.rpc))throw new Error("Invalid RPC URL");if(!y.test(E.rest))throw new Error("Invalid REST URL");if(!w.test(E.bip44.coinType))throw new Error("Invalid bip44 coin type");if(E.feeCurrencies?.length<1)throw new Error("Invalid fee currencies")}function Ge(E){const y=(w,v)=>{if(v.id!==browser.runtime.id)throw new Error("Invalid sender");w.type==="approval-popup-open"&&(browser.runtime.sendMessage({type:"enable-access",payload:E}),browser.runtime.onMessage.removeListener(y))};browser.runtime.onMessage.addListener(y)}async function nt(E){return new Promise((y,w)=>{const v=k=>{k.type===E&&(k.payload.status==="success"?y("success"):w("failed"),browser.runtime.onMessage.removeListener(v))};browser.runtime.onMessage.addListener(v)})}async function it(E){return new Promise((y,w)=>{const v=async(k,T)=>{T.id!==browser.runtime.id&&w("Invalid sender"),k.type==="chain-enabled"&&k.payload.payloadId===E?y({status:"success",payloadId:k.payload.payloadId}):k.type==="chain-approval-rejected"&&k.payload.payloadId===E?(w({status:"rejected",payloadId:k.payload.payloadId}),browser.runtime.onMessage.removeListener(v)):k.type==="popup-closed"?(y("popup-closed"),browser.runtime.onMessage.removeListener(v)):k.type==="user-logged-in"&&k.status!=="success"&&(w("failed"),browser.runtime.onMessage.removeListener(v))};browser.runtime.onMessage.addListener(v)})}function mt(E){const y=(w,v)=>{if(v.id!==browser.runtime.id)throw new Error("Invalid Sender");w.type===MessageTypes.signingPopupOpen&&(browser.runtime.sendMessage({type:MessageTypes.signTransaction,payload:E}),browser.runtime.onMessage.removeListener(y))};browser.runtime.onMessage.addListener(y)}async function p(E){return new Promise((y,w)=>{const v=k=>{k.type===E&&(k.payload.status==="success"?y(k.payload.data):w(k.payload.data),browser.runtime.onMessage.removeListener(v))};browser.runtime.onMessage.addListener(v)})}},481188:(Be,oe,n)=>{"use strict";n.d(oe,{F:()=>we,Z:()=>be});var t=n(964266),M=n(339279),X=n.n(M),pe=n(240483),ye=n(598916),Ee=n(94608),e=n(910416),C=n(496128),ve=n.n(C),Me=n(378268),Ze=n(8891),ke=n.n(Ze),V=n(202784),Le=n(861111);function we({provider:q,backgroundColor:Ne}){const[D]=(0,t.JsT)();return V.createElement(M.GenericCard,{onClick:()=>{window.open(q.url,"_blank"),ke().track(e.B_.ButtonClick,{buttonType:"stake",buttonName:"liquid staking redirection",redirectURL:q.url,stakeToken:D.coinDenom})},className:`${Ne} w-full`,img:V.createElement("img",{src:q.image??Me.GenericLight,onError:(0,Le._)(Me.GenericLight),width:30,height:30,className:"rounded-full mr-4"}),isRounded:!0,size:"md",title:V.createElement(Ee.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden"},q.name),subtitle:V.createElement(Ee.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},q.apy?`APY ${ve()((q.apy*100).toString(),{precision:2,symbol:""}).format()}%`:"N/A"),icon:V.createElement("span",{className:"material-icons-outlined dark:text-white-100 text-black-100 !text-lg"},"open_in_new")})}function be({isVisible:q,onClose:Ne,providers:D}){return V.createElement(pe.Z,{isOpen:q,onClose:Ne,closeOnBackdropClick:!0,title:"Select Provider",className:"p-6"},V.createElement("div",{className:"flex flex-col gap-y-4"},D.length===0&&V.createElement(ye.KE,null),D.length>0&&D.map(de=>V.createElement("div",{className:"relative",key:de.name},de.priority&&V.createElement("div",{className:"text-white-100 dark:text-white-100 absolute top-0 right-4 px-1.5 py-0.5 bg-green-600 rounded-b-[4px] text-[10px] font-bold"},"Promoted"),V.createElement(we,{provider:de,backgroundColor:`${de.priority?"!bg-[#29A87426]":"bg-white-100 dark:bg-gray-950"}`})))))}},877318:(Be,oe,n)=>{"use strict";n.r(oe),n.d(oe,{default:()=>Vt});var t=n(964266),M=n(910416),X=n(389320),pe=n(830911),ye=n(702860),Ee=n(744259),e=n(202784),C=n(339279),ve=n(395516),Me=n(396327),Ze=n(754699),ke=n(896538),V=n(892742),Le=n(606367),we=n(532833),be=n(625890),q=n(656687),Ne=n(825639),D=n(508181),de=n(681),Re=n(597459),Ke=n(701743),tt=n(170849),le=n(111819),he=n(15815),$e=n(372149),a=n(94608),z=n(610675);function at({title:x,message:i,backgroundColor:m,backgroundColorDark:s,color:r,onAction:o}){const{theme:d}=(0,C.useTheme)();return e.createElement(e.Fragment,null,e.createElement("div",{className:`flex flex-col gap-y-2 w-full p-4 rounded-2xl ${m}`},e.createElement("div",{className:"flex gap-x-2"},e.createElement("span",{className:`material-icons-round !text-lg ${r}`},"info"),e.createElement(a.Z,{size:"sm",className:"font-bold",color:"dark:text-white-100"},x)),e.createElement(a.Z,{size:"sm",color:"dark:text-gray-200"},i),e.createElement("div",{className:`rounded-2xl ${s}`},e.createElement("img",{className:"w-[200px] h-[106px] object-cover my-5 mx-auto",src:D.r.Logos.LeapLogo}))),e.createElement(C.Buttons.Generic,{onClick:o,color:d===C.ThemeName.DARK?z.w.white100:z.w.black100,className:"w-full",size:"normal"},e.createElement(a.Z,{color:"text-white-100 dark:text-black-100"},"Stake on a different chain")))}function lt({onAction:x}){const i=(0,t.a74)(),s=(0,$e.p)()[i];return e.createElement(at,{title:"Coming soon!",onAction:x,message:`Staking for ${s.chainName} is coming soon. Devs are hard at work. Stay tuned.`,backgroundColor:"bg-blue-100 dark:bg-blue-900",backgroundColorDark:"bg-blue-200 dark:bg-blue-800",color:"text-blue-600 dark:text-blue-400"})}function ct({onAction:x}){const i=(0,t.a74)(),s=(0,$e.p)()[i];return e.createElement(at,{title:"Uh oh! Staking Unavailable...",onAction:x,message:`Staking is not yet available for ${s.chainName}. You can stake on other
          chains.`,backgroundColor:"bg-orange-100 dark:bg-orange-900",backgroundColorDark:"bg-orange-200 dark:bg-orange-800",color:"text-orange-500 dark:text-orange-300"})}var rt=n(496128),Ae=n.n(rt),je=n(634680),Ge=n(905865);function nt(){const x=(0,je.a7)(),i=(0,$e.p)(),m=(0,Ge.a)(),s=i[x],{apy:r}=(0,t.fHb)(),{network:o}=(0,t.nDu)(),{data:d}=(0,t.S2A)(),u=(0,e.useMemo)(()=>{if(o?.chainApy)return Ae()((o?.chainApy*100).toString(),{precision:2,symbol:""}).format()},[o?.chainApy]),c=(0,e.useMemo)(()=>r?Ae()((r*100).toString(),{precision:0,symbol:""}).format():null,[r]);return e.createElement("div",{className:"flex justify-between items-center w-full"},e.createElement("div",{className:"flex gap-x-[4px]"},e.createElement("img",{width:24,height:24,src:s.chainSymbolImageUrl??m}),e.createElement(a.Z,{size:"md",className:"font-bold"},s.chainName)),x==="lava"&&d?.restaking.extension==="active"?e.createElement("div",{className:"flex gap-x-[18px] items-center"},u&&e.createElement("div",{className:"flex flex-col items-center gap-y-0.5"},e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},"Validator"),e.createElement(a.Z,{size:"md",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},`APY ${u}%`)),u&&c&&e.createElement("div",{className:"w-0.5 h-8 bg-gray-50 dark:bg-gray-900"}),c&&e.createElement("div",{className:"flex flex-col items-center gap-y-0.5"},e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},"Provider"),e.createElement(a.Z,{size:"md",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},`APY ${c}%`))):e.createElement(a.Z,{size:"md",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},u&&`APY ${u}%`))}function it({isStakeNotSupported:x,isStakeComingSoon:i}){const{headerChainImgSrc:m}=(0,we.Cd)(),s=(0,q._)(),r=(0,Ne.G)(),{activeWallet:o}=(0,be.ZP)(),[d,u]=(0,e.useState)(!1),[c,l]=(0,e.useState)(!1),[h,g]=(0,e.useState)(!1),[f,b]=(0,e.useState)(!1),S=(0,e.useCallback)(()=>u(!0),[]),P=(0,e.useCallback)(()=>l(!0),[]),N=(0,e.useCallback)(()=>{b(!0),setTimeout(()=>b(!1),2e3),tt.i.copyText(r?.[0])},[r]),A=(0,e.useMemo)(()=>o?.avatar?o.avatar:(0,he.l)()?D.r.Logos.CompassCircle:D.r.Logos.LeapLogo28,[o?.avatar]);if(!o)return e.createElement("div",{className:"relative w-full overflow-clip"},e.createElement(V.Z,null,e.createElement("div",null,e.createElement(Ze.S,{src:D.r.Logos.LeapCosmos,heading:"No wallet found"}))));const U=o.walletType===t._KQ.LEDGER&&!Le.li.test(o.name)?`${X.dN[o.walletType]} Wallet ${o.addressIndex+1}`:(0,le.k)(o.name);function I(){if(x)return e.createElement(ct,{onAction:()=>u(!0)});if(i)return e.createElement(lt,{onAction:()=>u(!0)})}return e.createElement("div",{className:"relative w-full overflow-clip"},e.createElement(Ke.ZP,{isShown:h,toggler:()=>g(!h)}),e.createElement(V.Z,{header:e.createElement(ke.m,{action:{onClick:()=>g(!0),type:C.HeaderActionType.NAVIGATION,className:"w-[48px] h-[40px] px-3 bg-[#FFFFFF] dark:bg-gray-950 rounded-full"},imgSrc:m,onImgClick:s?void 0:S,title:e.createElement(Me.T,{walletName:U,showWalletAvatar:!0,walletAvatar:A,showDropdown:!0,handleDropdownClick:P,giveCopyOption:!0,handleCopyClick:N,isAddressCopied:f})})},e.createElement("div",{className:"flex flex-col gap-y-6 p-6 mb-10 overflow-scroll"},e.createElement(nt,null),I())),e.createElement(de.Z,{isVisible:d,onClose:()=>u(!1)}),e.createElement(Re.Z,{isVisible:c,onClose:()=>l(!1),title:"Wallets"}),e.createElement(ve.Z,{label:ve.W.Stake}))}var mt=n(206391),p=n.n(mt),E=n(598916),y=n(367738),w=n(14080),v=n(410289),k=n(240483),T=n(428217),Z=n(903049);function W({isOpen:x,onClose:i,onClaim:m,onClaimAndStake:s}){const{formatHideBalance:r}=(0,Z.Zh)(),[o]=(0,T.nB)(),[d]=(0,t.JsT)(),{totalRewardsDollarAmt:u,rewards:c}=(0,t.nDu)(),l=(0,e.useMemo)(()=>{if(c)return c.total?.find(A=>A.denom===d.coinMinimalDenom)},[d.coinMinimalDenom,c]),h=(0,e.useMemo)(()=>!l||new(p())(l.amount).lt(1e-5),[l]),g=(0,e.useMemo)(()=>r((0,t.LHZ)(l?.amount??"",d.coinDenom)),[d.coinDenom,r,l?.amount]),f=(0,e.useMemo)(()=>new(p())(l?.currenyAmount??"").gt(0)?r(o(new(p())(l?.currenyAmount??""))):g,[o,r,g,l?.currenyAmount]),b=(0,e.useMemo)(()=>new(p())(l?.currenyAmount??"").gt(0)?g:"",[g,l?.currenyAmount]),S=(0,e.useMemo)(()=>r(`${(0,t.LHZ)(l?.amount??"",d.coinDenom)} ${c?.total?.length>1?`+${c.total.length-1} more`:""}`),[d.coinDenom,r,l?.amount,c?.total.length]),P=(0,e.useMemo)(()=>new(p())(u).gt(0)?r(o(new(p())(u))):S,[o,r,S,u]),N=(0,e.useMemo)(()=>new(p())(u).gt(0)?S:"",[S,u]);return e.createElement(k.Z,{isOpen:x,onClose:i,title:"Claim Rewards",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},`Claim rewards on ${d.coinDenom}`),e.createElement(C.GenericCard,{title:e.createElement(a.Z,{size:"sm",color:"text-gray-800 dark:text-white-100",className:"font-bold mb-0.5"},P),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},N),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:e.createElement("button",{onClick:m,className:"rounded-full text-xs font-bold text-white-100 dark:text-gray-900 dark:bg-white-100 bg-gray-900 px-4 py-2"},"Claim")})),e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Auto stake the rewards earned"),e.createElement(C.GenericCard,{title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},f),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},b),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:e.createElement("button",{onClick:s,disabled:h,className:`rounded-full text-xs font-bold px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-white-100 text-gray-900 ${h&&"opacity-70 !cursor-not-allowed"} `},"Claim and Stake")}))))}function ue(){const[x]=(0,t.JsT)();return e.createElement("div",{className:"flex flex-col items-center w-full px-4 pt-6 bg-white-100 dark:bg-gray-950 rounded-2xl"},e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400"},"You haven't staked any ",x.coinDenom),e.createElement(a.Z,{className:"text-[18px] font-bold",color:"text-black-100 dark:text-white-100"},"Stake tokens to earn rewards"),e.createElement("img",{className:"w-[200px] h-[106px] object-cover mt-8",src:D.r.Logos.LeapLogo}))}var Ce=n(128844),He=n(244876),_=n(861111),Se=n(608740),_e=n(863262),Ye=n(595196),Je=n(138371),Qe=n(489062),wt=n(8891),Xe=n.n(wt);const pt=He.w.useGetWallet;function ht({isOpen:x,onClose:i,validators:m,chainRewards:s}){const r=pt(),[o]=(0,T.nB)(),{formatHideBalance:d}=(0,Z.Zh)(),u=(0,Ge.a)(),[c]=(0,t.JsT)(),{delegations:l,totalRewardsDollarAmt:h,rewards:g}=(0,t.nDu)(),[f,b]=(0,e.useState)(""),S=(0,Se.e7)(),{claimAndStakeRewards:P,loading:N,recommendedGasLimit:A,userPreferredGasLimit:U,setUserPreferredGasLimit:I,gasOption:O,setGasOption:ee,userPreferredGasPrice:ne,setFeeDenom:Y,setMemo:J,showLedgerPopup:F,ledgerError:H,setLedgerError:Q}=(0,t.QnK)(l,s,b),[K,$]=(0,e.useState)(null),[ge,fe]=(0,e.useState)(!1),[te,xe]=(0,e.useState)({option:O,gasPrice:ne??S.gasPrice}),se=(0,v.s0)(),ae=(0,e.useMemo)(()=>{if(g)return g.total?.find(B=>B.denom===c.coinMinimalDenom)},[c.coinMinimalDenom,g]),R=(0,e.useMemo)(()=>g&&Object.values(m).length?g.rewards.filter(B=>B.reward.some(me=>me.denom===c.coinMinimalDenom)).map(B=>m[B.validator_address]):[],[c.coinMinimalDenom,g,m]),{data:G}=(0,t.pD_)(R&&R[0]);(0,Qe.X)(f),(0,e.useEffect)(()=>{let B=!1;if(R.length){for(const me of R)if(me&&me.custom_attributes?.priority&&me.custom_attributes.priority>0){B=!0;break}}J(B?"Staked with Leap Wallet":"")},[R,J]);const ce=(0,e.useCallback)(()=>{se("/stake-pending-txn",{state:{validator:R&&R[0],mode:"CLAIM_AND_DELEGATE"}}),Xe().track(M.B_.TransactionSigned,{transactionType:"stake_claim_and_delegate"})},[se,R]),L=(0,e.useCallback)(async()=>{try{const B=await r();await P(B,{success:ce})}catch(B){Q(B.message),setTimeout(()=>{Q("")},6e3)}},[P,r,Q,ce]),re=(0,e.useCallback)((B,me)=>{xe(B),Y(me.denom),B.option&&ee(B.option)},[Y,ee]),Te=(0,e.useCallback)(()=>{fe(!1)},[]),ie=(0,e.useMemo)(()=>d((0,t.LHZ)(ae?.amount??"",c.coinDenom)),[c.coinDenom,d,ae?.amount]),Oe=(0,e.useMemo)(()=>new(p())(h).gt(0)?d(o(new(p())(h))):ie,[o,d,ie,h]),We=(0,e.useMemo)(()=>new(p())(h).gt(0)?ie:"",[ie,h]);return e.createElement(Se.ZP,{recommendedGasLimit:A,gasLimit:U?.toString()??A,setGasLimit:B=>I(Number(B.toString())),gasPriceOption:te,onGasPriceOptionChange:re,error:K,setError:$},e.createElement(k.Z,{isOpen:x,onClose:i,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement(C.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:c.icon,onError:(0,_._)(u),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},Oe),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},We)}),e.createElement(C.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:G??(R&&R[0]?.image)??D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},R&&(0,t.MDB)(R[0]?.moniker,10,3)),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},R&&(R.length>1?`+${R.length-1} more validators`:""))})),e.createElement("div",{className:"flex flex-col gap-y-2 items-center"},e.createElement(_e.a,{setShowFeesSettingSheet:fe}),H&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},H),f&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},f),K&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},K),e.createElement(C.Buttons.Generic,{color:z.w.green600,size:"normal",disabled:N||!!f||!!K||!!H||F,className:"w-full",onClick:L},N?e.createElement(Ce.T,{color:z.w.white100}):"Confirm Claim & Stake")))),F&&e.createElement(Je.Z,{showLedgerPopup:F}),e.createElement(Ye.k,{showFeesSettingSheet:ge,onClose:Te,gasError:K}))}const yt=He.w.useGetWallet;function vt({isOpen:x,onClose:i,validator:m,validators:s}){const r=yt(),o=(0,Se.e7)(),[d]=(0,T.nB)(),{formatHideBalance:u}=(0,Z.Zh)(),c=(0,Ge.a)(),[l]=(0,t.JsT)(),{delegations:h,totalRewardsDollarAmt:g,rewards:f,totalRewards:b}=(0,t.nDu)(),{showLedgerPopup:S,onReviewTransaction:P,isLoading:N,error:A,setAmount:U,recommendedGasLimit:I,userPreferredGasLimit:O,setUserPreferredGasLimit:ee,gasOption:ne,setGasOption:Y,userPreferredGasPrice:J,setFeeDenom:F,ledgerError:H,setLedgerError:Q,customFee:K,feeDenom:$}=(0,t.rKd)("CLAIM_REWARDS",m,void 0,Object.values(h??{})),[ge,fe]=(0,e.useState)(!1),[te,xe]=(0,e.useState)(null),[se,ae]=(0,e.useState)({option:ne,gasPrice:J??o.gasPrice}),R=(0,v.s0)(),G=(0,e.useMemo)(()=>{if(f&&s)return f.rewards.map(j=>s[j.validator_address])},[f,s]),{data:ce}=(0,t.pD_)(G&&G[0]),L=(0,e.useMemo)(()=>{if(f)return f?.total?.find(j=>j.denom===l.coinMinimalDenom)},[l.coinMinimalDenom,f]);(0,Qe.X)(A),(0,e.useEffect)(()=>{U(L?.amount??"0")},[b]);const re=(0,e.useCallback)((j,ze)=>{ae(j),F(ze.denom),j.option&&Y(j.option)},[F,Y]),Te=(0,e.useCallback)(()=>{fe(!1)},[]),ie=(0,e.useMemo)(()=>u(`${(0,t.LHZ)(L?.amount??"",l.coinDenom)} ${f?.total?.length>1?`+${f.total.length-1} more`:""}`),[l.coinDenom,u,L?.amount,f?.total.length]),Oe=(0,e.useMemo)(()=>new(p())(g).gt(0)?u(d(new(p())(g))):ie,[d,u,ie,g]),We=(0,e.useMemo)(()=>new(p())(g).gt(0)?ie:"",[ie,g]),B=(0,e.useCallback)(()=>{R("/stake-pending-txn",{state:{validator:G&&G[0],mode:"CLAIM_REWARDS"}}),Xe().track(M.B_.TransactionSigned,{transactionType:"stake_claim"})},[R,G]),me=(0,e.useCallback)(async()=>{try{const j=await r();P(j,B,!1,{stdFee:K,feeDenom:$})}catch(j){Q(j.message),setTimeout(()=>{Q("")},6e3)}},[K,$,r,P,Q,B]);return e.createElement(Se.ZP,{recommendedGasLimit:I,gasLimit:O?.toString()??I,setGasLimit:j=>ee(Number(j.toString())),gasPriceOption:se,onGasPriceOptionChange:re,error:te,setError:xe},e.createElement(k.Z,{isOpen:x,onClose:i,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement(C.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:l.icon,onError:(0,_._)(c),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},Oe),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},We)}),e.createElement(C.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:ce??(G&&G[0]?.image)??D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},G&&(0,t.MDB)(G[0]?.moniker,10,3)),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},G&&(G.length>1?`+${G.length-1} more validators`:""))})),e.createElement("div",{className:"flex flex-col items-center w-full gap-y-2"},e.createElement(_e.a,{setShowFeesSettingSheet:fe}),H&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},H),A&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},A),te&&!ge&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},te),e.createElement(C.Buttons.Generic,{color:z.w.green600,size:"normal",disabled:N||!!A||!!te||S||!!H,className:"w-full",onClick:me},N?e.createElement(Ce.T,{color:z.w.white100}):"Confirm Claim")))),S&&e.createElement(Je.Z,{showLedgerPopup:S}),e.createElement(Ye.k,{showFeesSettingSheet:ge,onClose:Te,gasError:te}))}var kt=n(481188);function bt({onClaim:x,onClaimAndStake:i}){const[m]=(0,T.nB)(),{formatHideBalance:s}=(0,Z.Zh)(),{rewards:r}=(0,t.fHb)(),[o]=(0,t.JsT)(),{totalRewards:d,totalRewardsDollarAmt:u,loadingRewards:c,rewards:l}=(0,t.nDu)(),h=(0,e.useMemo)(()=>!d||new(p())(d).lt(1e-5),[d]),g=(0,t.a74)(),{data:f}=(0,t.S2A)(),b=(0,e.useMemo)(()=>{if(l)return l.total?.find(P=>P.denom===o.coinMinimalDenom)},[o.coinMinimalDenom,l]),S=(0,e.useMemo)(()=>new(p())(u).gt(0)?s(m(new(p())(u))):s(`${(0,t.LHZ)(b?.amount??"",o.coinDenom)} ${l?.total?.length>1?`+${l.total.length-1} more`:""}`),[o.coinDenom,m,s,b?.amount,l.total.length,u]);return e.createElement("div",{className:"rounded-2xl flex items-center p-4 bg-gray-50 dark:bg-gray-900 justify-between w-full"},e.createElement("div",{className:"flex flex-col gap-y-0.5"},e.createElement(a.Z,{size:"xs",className:"font-medium",color:"text-gray-700 dark:text-gray-400"},"You have earned"),c&&e.createElement(w.Z,{width:50,height:14}),!c&&e.createElement(a.Z,{size:"sm",className:"font-bold",color:"text-black-100 dark:text-white-100"},S)),c&&e.createElement(w.Z,{width:95,height:28,borderRadius:100}),!c&&(g==="lava"&&f?.restaking.extension==="active"?e.createElement("button",{disabled:h&&new(p())(r.totalRewards).lt(1e-5),onClick:x,className:`hover:cursor-pointer flex items-center rounded-full bg-gray-200 dark:bg-gray-800 gap-x-2 ${h&&new(p())(r.totalRewards).lt(1e-5)&&"opacity-70 !cursor-not-allowed"}`},e.createElement("span",{className:"font-bold text-xs text-black-100 dark:text-white-100 py-2 pl-4"},"Claim"),e.createElement("span",{className:"material-icons-round pr-3 py-2 text-black-100 dark:text-white-100 !text-md"},"expand_more")):e.createElement("button",{disabled:h,className:`hover:cursor-pointer flex items-center rounded-full bg-gray-200 dark:bg-gray-800 gap-x-2 ${h&&"opacity-70 !cursor-not-allowed"}`},e.createElement("span",{onClick:x,className:"font-bold text-xs text-black-100 dark:text-white-100 py-2 pl-4"},"Claim"),e.createElement("div",{className:"w-px h-4 bg-gray-400 dark:bg-gray-700"}),e.createElement("span",{onClick:i,className:"material-icons-round pr-3 py-2 text-black-100 dark:text-white-100 !text-md"},"expand_more"))))}function Nt({onClaim:x,onClaimAndStake:i}){const{formatHideBalance:m}=(0,Z.Zh)(),{loadingDelegations:s,currencyAmountDelegation:r,totalDelegationAmount:o}=(0,t.nDu)(),[d]=(0,T.nB)(),u=(0,e.useMemo)(()=>{if(new(p())(r).gt(0))return d(new(p())(r))},[r,d]);return e.createElement("div",{className:"flex flex-col w-full bg-white-100 dark:bg-gray-950 rounded-2xl p-4 gap-y-4"},e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},"Your deposited amount"),s&&e.createElement(w.Z,{width:100,count:2}),!s&&e.createElement("div",null,e.createElement(a.Z,{size:"lg",className:"font-black"},u&&m(u)),e.createElement(a.Z,{size:"sm",className:"font-medium",color:"text-gray-800 dark:text-gray-200"},m(o))),e.createElement(bt,{onClaim:x,onClaimAndStake:i}))}function Ct({isOpen:x,onClose:i,onSwitchValidator:m,provider:s,delegation:r}){const[o]=(0,t.JsT)(),[d]=(0,T.nB)(),{theme:u}=(0,C.useTheme)(),{formatHideBalance:c}=(0,Z.Zh)(),l=(0,e.useMemo)(()=>new(p())(r.amount.currenyAmount??"").gt(0)?c(d(new(p())(r.amount.currenyAmount??""))):c(r.amount.formatted_amount??r.amount.amount),[r.amount.amount,r.amount.currenyAmount,r.amount.formatted_amount,d,c]),h=(0,e.useMemo)(()=>new(p())(r.amount.currenyAmount??"").gt(0)?c(r.amount.formatted_amount??r.amount.amount):"",[r.amount.amount,r.amount.currenyAmount,r.amount.formatted_amount,c]);return e.createElement(k.Z,{isOpen:x,onClose:i,title:"Provider Details",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col w-full gap-y-4"},e.createElement("div",{className:"flex w-full gap-x-2 items-center"},e.createElement("img",{width:24,height:24,className:"rounded-full",src:D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator)}),e.createElement(a.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold"},(0,t.MDB)(s?.moniker,15,3))),e.createElement("div",{className:"flex w-full rounded-lg p-3 bg-white-100 dark:bg-gray-950 border  border-gray-100 dark:border-gray-850"},e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"Total Staked"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},"N/A")),e.createElement("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"Commission"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},"N/A")),e.createElement("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"APY"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},"N/A"))),e.createElement("div",{className:"w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg"},e.createElement(a.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium"},"Your deposited amount"),e.createElement("div",{className:"flex gap-x-4 mt-4"},e.createElement("img",{className:"w-9 h-9",src:o.icon}),e.createElement("div",{className:"flex flex-col justify-center"},e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},l),e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},h)))),e.createElement(C.Buttons.Generic,{onClick:m,color:u===C.ThemeName.DARK?z.w.white100:z.w.black100,className:"w-full",size:"normal"},e.createElement(a.Z,{color:"text-white-100 dark:text-black-100"},"Switch provider"))))}function dt({provider:x,delegation:i,onClick:m}){const[s]=(0,T.nB)(),{formatHideBalance:r}=(0,Z.Zh)(),o=(0,e.useMemo)(()=>new(p())(i.amount.currenyAmount??"").gt(0)?r(s(new(p())(i.amount.currenyAmount??""))):r(i.amount.formatted_amount??i.amount.amount),[i.amount.amount,i.amount.currenyAmount,i.amount.formatted_amount,s,r]),d=(0,e.useMemo)(()=>new(p())(i.amount.currenyAmount??"").gt(0)?r(i.amount.formatted_amount??i.amount.amount):"",[i.amount.amount,i.amount.currenyAmount,i.amount.formatted_amount,r]);return e.createElement("div",{onClick:m,className:"flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl"},e.createElement("div",{className:"flex items-center w-full"},e.createElement("img",{src:D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),e.createElement("div",{className:"flex justify-between items-center w-full"},e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden"},(0,t.MDB)(x?.moniker,15,3)),e.createElement("div",{className:"flex flex-col items-end gap-y-0.5"},e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold"},o),e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},d)))))}function St(){const x=(0,v.s0)(),[i,m]=(0,e.useState)(!1),[s,r]=(0,e.useState)(),{delegations:o,loadingDelegations:d,providers:u}=(0,t.fHb)(),c=(0,e.useMemo)(()=>Object.values(o??{}).find(g=>g.provider==="empty_provider"),[o]),l=(0,e.useMemo)(()=>Object.values(o??{}).sort((f,b)=>parseFloat(b.amount.amount)-parseFloat(f.amount.amount)),[o]),h=(0,e.useMemo)(()=>({provider:c?.provider??"",moniker:"Empty Provider",address:c?.provider??"",chain:c?.chainID??"",spec:c?.chainID??""}),[c?.chainID,c?.provider]);return e.createElement(e.Fragment,null,d&&e.createElement(E.KE,null),e.createElement("div",{className:"flex flex-col w-full gap-y-2"},!d&&u&&l.length>0&&e.createElement(e.Fragment,null,c&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Empty Provider"),e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Amount Staked")),e.createElement(dt,{delegation:c,provider:h,onClick:()=>{r(c),m(!0)}})),e.createElement("div",{className:"flex justify-between"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Provider"),e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Amount Staked")),l.map(g=>{const f=u?.find(b=>b.address===g.provider);return f&&e.createElement(dt,{key:f?.address,delegation:g,provider:f,onClick:()=>{r(g),m(!0)}})}))),s&&e.createElement(Ct,{isOpen:i,onClose:()=>m(!1),provider:s.provider===c?.provider?h:u.find(g=>g.address===s.provider),delegation:s,onSwitchValidator:()=>{x("/stakeInput",{state:{mode:"REDELEGATE",fromProvider:s.provider===c?.provider?h:u.find(g=>g.address===s.provider),providerDelegation:s}})}}))}var Dt=n(276603),st=n(470726),At=n(378268);const Tt=He.w.useGetWallet;function Pt({isOpen:x,onClose:i,validator:m,unbondingDelegationEntry:s}){const r=Tt(),o=(0,Se.e7)(),[d]=(0,T.nB)(),[u]=(0,t.JsT)(),c=(0,we.a1)(),{theme:l}=(0,C.useTheme)(),{showLedgerPopup:h,onReviewTransaction:g,isLoading:f,error:b,setAmount:S,recommendedGasLimit:P,userPreferredGasLimit:N,setUserPreferredGasLimit:A,gasOption:U,setGasOption:I,userPreferredGasPrice:O,setFeeDenom:ee,setCreationHeight:ne,ledgerError:Y,setLedgerError:J,customFee:F,feeDenom:H}=(0,t.rKd)("CANCEL_UNDELEGATION",m),[Q,K]=(0,e.useState)(!1),[$,ge]=(0,e.useState)(null),[fe,te]=(0,e.useState)({option:U,gasPrice:O??o.gasPrice}),xe=(0,v.s0)(),{data:se}=(0,t.pD_)(m);(0,Qe.X)(b),(0,e.useEffect)(()=>{ne(s.creation_height),S(s.balance)},[s]);const ae=(0,e.useCallback)((L,re)=>{te(L),ee(re.denom),L.option&&I(L.option)},[ee,I]),R=(0,e.useCallback)(()=>{K(!1)},[]),G=(0,e.useCallback)(()=>{xe("/stake-pending-txn",{state:{validator:m,mode:"CANCEL_UNDELEGATION"}}),Xe().track(M.B_.TransactionSigned,{transactionType:"stake_cancel_undelegate"})},[xe,m]),ce=(0,e.useCallback)(async()=>{try{const L=await r();g(L,G,!1,{stdFee:F,feeDenom:H})}catch(L){J(L.message),setTimeout(()=>{J("")},6e3)}},[F,H,r,g,J,G]);return e.createElement(Se.ZP,{recommendedGasLimit:P,gasLimit:N?.toString()??P,setGasLimit:L=>A(Number(L.toString())),gasPriceOption:fe,onGasPriceOptionChange:ae,error:$,setError:ge},e.createElement(k.Z,{isOpen:x,onClose:i,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement("div",{className:"flex items-center gap-x-2"},e.createElement("span",{className:"material-icons-round text-black-100 dark:text-white-100 !text-lg"},"info"),e.createElement(a.Z,{size:"sm",className:"font-bold"},"Confirm Unstaking")),e.createElement(a.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200"},"This will reset the unstaking period and stake the tokens back to the validator")),e.createElement("div",{className:"flex gap-x-4 w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg"},e.createElement("img",{className:"w-9 h-9",src:u.icon,onError:(0,_._)(c)}),e.createElement("div",null,e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mb-0.5"},d(new(p())(s?.currencyBalance??""))),e.createElement(a.Z,{color:"text-gray-600 dark:text-gray-400",size:"xs",className:"font-medium"},s?.formattedBalance)),e.createElement("div",{className:"ml-auto flex flex-col items-end"},e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mb-0.5"},(0,st.z)(s?.completion_time??"")),e.createElement(a.Z,{color:"text-gray-600 dark:text-gray-400",size:"xs",className:"font-medium"},s?.completion_time&&(0,t.E0P)(s?.completion_time)))),e.createElement("div",{className:"flex gap-x-4 w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg"},e.createElement("img",{className:"w-9 h-9",src:se??m?.image??D.r.Misc.Validator,onError:(0,_._)(At.GenericLight)}),e.createElement("div",null,e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mb-0.5"},(0,t.MDB)(m?.moniker,10,3)),e.createElement(a.Z,{color:"text-gray-600 dark:text-gray-400",size:"xs",className:"font-medium"},"Validator"))),e.createElement(_e.a,{setShowFeesSettingSheet:K}),Y&&e.createElement("p",{className:"text-sm font-bold text-red-300 my-1 px-2"},Y),b&&e.createElement("p",{className:"text-sm font-bold text-red-300 my-1 px-2"},b),$&&!Q&&e.createElement("p",{className:"text-sm font-bold text-red-300 my-1 px-2"},$),e.createElement("div",{className:"flex gap-x-4 w-full"},e.createElement(C.Buttons.Generic,{onClick:i,color:l===C.ThemeName.DARK?z.w.gray800:z.w.gray200,className:"w-full",size:"normal"},e.createElement(a.Z,{color:"dark:text-white-100 text-black-100"},"Cancel")),e.createElement(C.Buttons.Generic,{onClick:ce,color:z.w.green600,className:"w-full",size:"normal",disabled:f||!!b||!!$||!!Y},f?e.createElement(Ce.T,{color:z.w.white100}):"Confirm")))),h&&e.createElement(Je.Z,{showLedgerPopup:h}),e.createElement(Ye.k,{showFeesSettingSheet:Q,onClose:R,gasError:$}))}function Mt({isOpen:x,onClose:i,validator:m,unbondingDelegationEntry:s}){const[r]=(0,t.JsT)(),o=(0,we.a1)(),[d]=(0,T.nB)(),{formatHideBalance:u}=(0,Z.Zh)(),{theme:c}=(0,C.useTheme)(),[l,h]=(0,e.useState)(!1),{network:g}=(0,t.nDu)(),f=(0,e.useMemo)(()=>g?g.validatorApys:{},[g]),{data:b}=(0,t.pD_)(m),S=(0,e.useMemo)(()=>new(p())(s?.currencyBalance??"").gt(0)?u(d(new(p())(s?.currencyBalance??""))):u(s?.formattedBalance??""),[d,u,s?.currencyBalance,s?.formattedBalance]),P=(0,e.useMemo)(()=>new(p())(s?.currencyBalance??"").gt(0)?u(s?.formattedBalance??""):"",[u,s?.currencyBalance,s?.formattedBalance]);return e.createElement(e.Fragment,null,e.createElement(k.Z,{isOpen:x,onClose:i,title:"Validator Details",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col w-full gap-y-4"},e.createElement("div",{className:"flex w-full gap-x-2 items-center"},e.createElement("img",{width:24,height:24,className:"rounded-full",src:b??m?.image??D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator)}),e.createElement(a.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold"},(0,t.MDB)(m.moniker,10,3))),e.createElement("div",{className:"flex w-full rounded-lg p-3 bg-white-100 dark:bg-gray-950 border  border-gray-100 dark:border-gray-850"},e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"Total Staked"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},Ae()(m?.delegations?.total_tokens_display??m?.tokens??"",{symbol:"",precision:0}).format())),e.createElement("div",{className:"w-px h-10 bg-gray-200 dark:bg-gray-850"}),e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"Commission"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},m.commission?.commission_rates.rate?`${new(p())(m.commission.commission_rates.rate).multipliedBy(100).toFixed(0)}%`:"N/A")),e.createElement("div",{className:"w-px h-10 bg-gray-200 dark:bg-gray-850"}),e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"APY"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},f&&(f[m?.address]?`${Ae()(f[m?.address]*100,{precision:2,symbol:""}).format()}%`:"N/A")))),e.createElement(a.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium"},"Pending Unstake"),e.createElement("div",{className:"flex gap-x-4 w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg"},e.createElement("img",{className:"w-9 h-9",src:r.icon,onError:(0,_._)(o)}),e.createElement("div",{className:"flex flex-col justify-center"},e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mt-0.5"},S),e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},P)),e.createElement("div",{className:"ml-auto flex flex-col items-end"},e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mt-0.5"},(0,st.z)(s?.completion_time??"")),e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},s?.completion_time&&(0,t.E0P)(s?.completion_time)))),e.createElement(C.Buttons.Generic,{onClick:()=>{h(!0),i()},className:"w-full",size:"normal",color:c===C.ThemeName.DARK?z.w.white100:z.w.black100},e.createElement(a.Z,{color:"text-white-100 dark:text-black-100"},"Cancel Unstake")))),e.createElement(Pt,{isOpen:l,onClose:()=>h(!1),unbondingDelegationEntry:s,validator:m}))}function Zt(){const{isCancleUnstakeSupported:x}=(0,t.MY5)(),{unboundingDelegationsInfo:i,network:m,loadingUnboundingDelegations:s}=(0,t.nDu)(),r=s,[o]=(0,T.nB)(),{formatHideBalance:d}=(0,Z.Zh)(),[u,c]=(0,e.useState)(!1),[l,h]=(0,e.useState)(),[g,f]=(0,e.useState)(),b=(0,e.useMemo)(()=>m?m.getValidators({}):{},[m]);return!r&&(Object.values(i??{}).length===0||!b)?e.createElement(e.Fragment,null):e.createElement(e.Fragment,null,r&&e.createElement(Dt.m,null),!r&&b&&i&&e.createElement("div",{className:"flex flex-col w-full gap-y-2"},e.createElement("div",{className:"flex justify-between"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Validator"),e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Amount Staked")),Object.values(i??{}).map(S=>{const P=b[S?.validator_address];return P?S.entries.map((N,A)=>{const U=(0,st.z)(N.completion_time),I=()=>{const{data:O}=(0,t.pD_)(P),ee=(0,e.useMemo)(()=>new(p())(N.currencyBalance??"").gt(0)?d(o(new(p())(N.currencyBalance??""))):d(N.formattedBalance??""),[]),ne=(0,e.useMemo)(()=>new(p())(N.currencyBalance??"").gt(0)?d(N.formattedBalance??""):"",[]);return e.createElement("div",{onClick:()=>{x&&(c(!0),h(S),f(N))},className:`flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl ${x&&"cursor-pointer"}`},e.createElement("div",{className:"flex items-center w-full"},e.createElement("img",{src:O??P?.image??D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),e.createElement("div",{className:"flex justify-between items-center w-full"},e.createElement("div",{className:"flex flex-col"},e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden"},(0,t.MDB)(P.moniker,10,3)),e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},U)),e.createElement("div",{className:"flex flex-col items-end"},e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold"},ee),e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium"},ne)))))};return e.createElement(I,{key:`${P?.address} ${A}`})}):null})),l&&g&&b&&e.createElement(Mt,{isOpen:u,onClose:()=>c(!1),unbondingDelegation:l,unbondingDelegationEntry:g,validator:b[l.validator_address]}))}function Lt({isOpen:x,onClose:i,onSwitchValidator:m,onUnstake:s,validator:r,delegation:o}){const[d]=(0,t.JsT)(),u=(0,we.a1)(),{formatHideBalance:c}=(0,Z.Zh)(),[l]=(0,T.nB)(),{network:h}=(0,t.nDu)(),g=(0,e.useMemo)(()=>h?h.validatorApys:{},[h]),{data:f}=(0,t.pD_)(r),{theme:b}=(0,C.useTheme)(),S=(0,e.useMemo)(()=>new(p())(o.balance.currenyAmount??"").gt(0)?c(l(new(p())(o.balance.currenyAmount??""))):c(o.balance.formatted_amount??o.balance.amount),[o.balance.amount,o.balance.currenyAmount,o.balance.formatted_amount,l,c]),P=(0,e.useMemo)(()=>new(p())(o.balance.currenyAmount??"").gt(0)?c(o.balance.formatted_amount??o.balance.amount):"",[o.balance.amount,o.balance.currenyAmount,o.balance.formatted_amount,c]);return e.createElement(k.Z,{isOpen:x,onClose:i,title:"Validator Details",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col w-full gap-y-4"},e.createElement("div",{className:"flex w-full gap-x-2 items-center"},e.createElement("img",{width:24,height:24,className:"rounded-full",src:f??r.image??D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator)}),e.createElement(a.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold"},(0,t.MDB)(r.moniker,10,3))),e.createElement("div",{className:"flex w-full rounded-lg p-3 bg-white-100 dark:bg-gray-950 border  border-gray-100 dark:border-gray-850"},e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"Total Staked"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},Ae()(r?.delegations?.total_tokens_display??r?.tokens??"",{symbol:"",precision:0}).format())),e.createElement("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"Commission"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},r?.commission?.commission_rates?.rate?`${new(p())(r.commission.commission_rates.rate).multipliedBy(100).toFixed(0)}%`:"N/A")),e.createElement("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),e.createElement("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3"},e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},"APY"),e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},g&&(g[r?.address]?`${Ae()(g[r?.address]*100,{precision:2,symbol:""}).format()}%`:"N/A")))),e.createElement("div",{className:"w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg"},e.createElement(a.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium"},"Your deposited amount"),e.createElement("div",{className:"flex gap-x-4 mt-4"},e.createElement("img",{className:"w-9 h-9",src:d.icon,onError:(0,_._)(u)}),e.createElement("div",{className:"flex flex-col justify-center"},e.createElement(a.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold"},S),e.createElement(a.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium"},P)))),e.createElement("div",{className:"flex gap-x-4 w-full"},e.createElement(C.Buttons.Generic,{onClick:m,color:b===C.ThemeName.DARK?z.w.gray800:z.w.gray200,className:"w-full",size:"normal"},e.createElement(a.Z,{color:"dark:text-white-100 text-black-100"},"Switch validator")),e.createElement(C.Buttons.Generic,{onClick:s,color:z.w.red300,className:"w-full",size:"normal"},e.createElement(a.Z,{color:"dark:text-white-100 text-white-100"},"Unstake")))))}function ut({validator:x,delegation:i,onClick:m}){const[s]=(0,T.nB)(),{formatHideBalance:r}=(0,Z.Zh)(),{data:o}=(0,t.pD_)(x),d=(0,e.useMemo)(()=>new(p())(i.balance.currenyAmount??"").gt(0)?r(s(new(p())(i.balance.currenyAmount??""))):r(i.balance.formatted_amount??i.balance.amount),[i.balance.amount,i.balance.currenyAmount,i.balance.formatted_amount,s,r]),u=(0,e.useMemo)(()=>new(p())(i.balance.currenyAmount??"").gt(0)?r(i.balance.formatted_amount??i.balance.amount):"",[i.balance.amount,i.balance.currenyAmount,i.balance.formatted_amount,r]);return e.createElement("div",{onClick:m,className:"flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl"},e.createElement("div",{className:"flex items-center w-full"},e.createElement("img",{src:o??x.image??D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),e.createElement("div",{className:"flex justify-between items-center w-full"},e.createElement("div",{className:"flex flex-col items-start gap-y-1"},e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden"},(0,t.MDB)(x.moniker,10,3)),x.jailed&&e.createElement(a.Z,{color:"text-red-600 dark:text-red-300",className:"font-bold text-[10px] px-1.5 py-0.5 rounded-[4px] bg-red-600 dark:bg-red-300 bg-opacity-10 dark:bg-opacity-10"},"Jailed")),e.createElement("div",{className:"flex flex-col items-end gap-y-0.5"},e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold"},d),e.createElement(a.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium"},u)))))}function Rt(){const x=(0,v.s0)(),[i,m]=(0,e.useState)(!1),[s,r]=(0,e.useState)(),{delegations:o,network:d,loadingNetwork:u,loadingDelegations:c}=(0,t.nDu)(),l=(0,e.useMemo)(()=>d?d.getValidators({}):{},[d]),h=u||c,g=(0,ye.Z)(),f=g.get("validatorAddress")??void 0,b=g.get("action")??void 0;(0,e.useEffect)(()=>{if(f&&b!=="DELEGATE"){const N=Object.values(o??{}).find(A=>A.delegation.validator_address===f);N&&(r(N),m(!0))}},[o,b,f]);const[S,P]=(0,e.useMemo)(()=>{const N=Object.values(o??{}).sort((I,O)=>parseFloat(O.balance.amount)-parseFloat(I.balance.amount)),A=N.filter(I=>{const O=l?.[I?.delegation?.validator_address];return!(!O||O.active===!1)}),U=N.filter(I=>{const O=l?.[I?.delegation?.validator_address];return!(!O||O.active!==!1)});return[A,U]},[o,l]);return e.createElement(e.Fragment,null,h&&e.createElement(E.KE,null),e.createElement("div",{className:"flex flex-col w-full gap-y-2"},!h&&l&&S.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Validator"),e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Amount Staked")),S.map(N=>{const A=l?.[N?.delegation?.validator_address];return e.createElement(ut,{key:A.address,delegation:N,validator:A,onClick:()=>{r(N),m(!0)}})})),!h&&l&&P.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between mt-2"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Inactive validator"),e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Amount Staked")),P.map(N=>{const A=l[N?.delegation?.validator_address];return e.createElement(ut,{key:A.address,delegation:N,validator:A,onClick:()=>{r(N),m(!0)}})}))),s&&d&&e.createElement(Lt,{isOpen:i,onClose:()=>m(!1),onSwitchValidator:()=>{x("/stakeInput",{state:{mode:"REDELEGATE",fromValidator:l[s.delegation.validator_address],delegation:s}})},onUnstake:()=>{x("/stakeInput",{state:{mode:"UNDELEGATE",toValidator:l[s.delegation.validator_address],delegation:s}})},validator:l[s?.delegation?.validator_address],delegation:s}))}var Ot=(x=>(x.YOUR_VALIDATORS="Your validators",x.PENDING_UNSTAKE="Pending unstake",x.YOUR_PROVIDERS="Your providers",x))(Ot||{});function zt(){const{delegations:x,unboundingDelegationsInfo:i,loadingDelegations:m,loadingUnboundingDelegations:s}=(0,t.nDu)(),{delegations:r}=(0,t.fHb)(),o=(0,je.a7)(),{activeWallet:d}=(0,be.ZP)(),[u,c]=(0,e.useState)(),l=m||s,{data:h}=(0,t.S2A)(),g=(0,e.useMemo)(()=>{const f=[];return Object.values(x??{}).length>0&&f.push("Your validators"),Object.values(r??{}).length>0&&d?.walletType!==t._KQ.LEDGER&&h?.restaking.extension==="active"&&o==="lava"&&f.push("Your providers"),Object.values(i??{}).length>0&&f.push("Pending unstake"),f.length>0&&c(f[0]),f},[o,d?.walletType,x,h?.restaking.extension,r,i]);return l?e.createElement(e.Fragment,null):e.createElement("div",{className:"flex flex-col gap-y-4"},e.createElement("div",{className:"flex gap-x-2"},g.map(f=>e.createElement("div",{onClick:()=>{u!==f&&c(f)},key:f},e.createElement(a.Z,{className:`rounded-full hover:cursor-pointer px-3 py-2 border bg-white-100 dark:bg-gray-950 font-bold ${u===f?"dark:border-white-100 border-gray-800":"border-white-100 dark:border-gray-950"}`,size:"xs",color:u===f?"text-gray-900 dark:text-white-100":"text-gray-800 dark:text-gray-200"},f)))),u==="Your validators"&&e.createElement(Rt,null),u==="Pending unstake"&&e.createElement(Zt,null),u==="Your providers"&&e.createElement(St,null))}function It({isOpen:x,onClose:i,onClaimValidatorRewards:m,onClaimProviderRewards:s}){const{formatHideBalance:r}=(0,Z.Zh)(),[o]=(0,T.nB)(),[d]=(0,t.JsT)(),{totalRewardsDollarAmt:u,rewards:c,totalRewards:l}=(0,t.nDu)(),h=(0,e.useMemo)(()=>!l||new(p())(l).lt(1e-5),[l]),{rewards:g}=(0,t.fHb)(),f=(0,e.useMemo)(()=>!g?.totalRewards||new(p())(g?.totalRewards).lt(1e-5),[g?.totalRewards]),b=(0,e.useMemo)(()=>{if(c)return c?.total?.find(O=>O.denom===d?.coinMinimalDenom)},[d?.coinMinimalDenom,c]),S=(0,e.useMemo)(()=>r(`${(0,t.LHZ)(b?.amount??"",d.coinDenom)} ${c?.total?.length>1?`+${c?.total?.length-1} more`:""}`),[d?.coinDenom,r,b?.amount,c?.total.length]),P=(0,e.useMemo)(()=>new(p())(u).gt(0)?r(o(new(p())(u))):S,[o,r,S,u]),N=(0,e.useMemo)(()=>new(p())(u).gt(0)?S:"",[S,u]),A=(0,e.useMemo)(()=>r((0,t.LHZ)(g?.totalRewards??"",d?.coinDenom)),[d?.coinDenom,r,g?.totalRewards]),U=(0,e.useMemo)(()=>new(p())(g?.totalRewardsDollarAmt).gt(0)?r(o(new(p())(g?.totalRewardsDollarAmt))):A,[o,r,A,g?.totalRewardsDollarAmt]),I=(0,e.useMemo)(()=>new(p())(g?.totalRewardsDollarAmt).gt(0)?A:"",[A,g?.totalRewardsDollarAmt]);return e.createElement(k.Z,{isOpen:x,onClose:i,title:"Claim Rewards",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Validator Rewards"),e.createElement(C.GenericCard,{title:e.createElement(a.Z,{size:"sm",color:"text-gray-800 dark:text-white-100",className:"font-bold mb-0.5"},P),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},N),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:e.createElement("button",{onClick:m,disabled:h,className:`rounded-full text-xs font-bold text-white-100 dark:text-gray-900 dark:bg-white-100 bg-gray-900 px-4 py-2 ${h&&"opacity-70 !cursor-not-allowed"}`},"Claim")})),e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement(a.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400"},"Provider Rewards"),e.createElement(C.GenericCard,{title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},U),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},I),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:e.createElement("button",{onClick:s,disabled:f,className:`rounded-full text-xs font-bold text-white-100 dark:text-gray-900 dark:bg-white-100 bg-gray-900 px-4 py-2 ${f&&"opacity-70 !cursor-not-allowed"}`},"Claim")}))))}function Bt(){return e.createElement("div",{className:"flex items-start gap-x-3 p-4 rounded-2xl bg-blue-200 dark:bg-blue-900"},e.createElement("span",{className:"material-icons-round text-blue-600 dark:text-blue-400 !text-lg"},"info"),e.createElement(a.Z,{size:"xs",color:"text-black-100 dark:text-white-100"},"Ledger support for restaking will be introduced in the upcoming software upgrade, which is planned for release soon"))}const Gt=He.w.useGetWallet;function Wt({isOpen:x,onClose:i,validator:m}){const s=Gt(),r=(0,Se.e7)(),[o]=(0,T.nB)(),{formatHideBalance:d}=(0,Z.Zh)(),u=(0,Ge.a)(),[c]=(0,t.JsT)(),{showLedgerPopup:l,onReviewTransaction:h,isLoading:g,error:f,setAmount:b,recommendedGasLimit:S,userPreferredGasLimit:P,setUserPreferredGasLimit:N,gasOption:A,setGasOption:U,userPreferredGasPrice:I,setFeeDenom:O,customFee:ee,feeDenom:ne,ledgerError:Y,setLedgerError:J}=(0,t.$l7)("CLAIM_REWARDS",m),{rewards:F,providers:H}=(0,t.fHb)(),[Q,K]=(0,e.useState)(!1),[$,ge]=(0,e.useState)(null),[fe,te]=(0,e.useState)({option:A,gasPrice:I??r.gasPrice}),xe=(0,v.s0)();(0,Qe.X)(f),(0,e.useEffect)(()=>{b(F?.totalRewards??"0")},[F?.totalRewards]);const se=(0,e.useCallback)((L,re)=>{te(L),O(re.denom),L.option&&U(L.option)},[O,U]),ae=(0,e.useMemo)(()=>{if(F&&H)return F?.rewards?.map(L=>H.find(re=>re.address===L.provider))},[H,F]),R=(0,e.useCallback)(()=>{K(!1)},[]),G=(0,e.useCallback)(()=>{xe("/stake-pending-txn",{state:{mode:"CLAIM_REWARDS"}}),Xe().track(M.B_.TransactionSigned,{transactionType:"stake_claim"})},[xe]),ce=(0,e.useCallback)(async()=>{try{const L=await s();h(L,G,!1,{stdFee:ee,feeDenom:ne})}catch(L){J(L.message),setTimeout(()=>{J("")},6e3)}},[ee,ne,s,h,J,G]);return e.createElement(Se.ZP,{recommendedGasLimit:S,gasLimit:P?.toString()??S,setGasLimit:L=>N(Number(L.toString())),gasPriceOption:fe,onGasPriceOptionChange:se,error:$,setError:ge},e.createElement(k.Z,{isOpen:x,onClose:i,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6"},e.createElement("div",{className:"flex flex-col gap-y-6"},e.createElement("div",{className:"flex flex-col items-center w-full gap-y-4"},e.createElement(C.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:c.icon,onError:(0,_._)(u),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},d(o(new(p())(F?.totalRewardsDollarAmt??"0")))),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},d(`${(0,t.LHZ)(F?.totalRewards??"",c.coinDenom)}`))}),e.createElement(C.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:e.createElement("img",{src:D.r.Misc.Validator,onError:(0,_._)(D.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:e.createElement(a.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5"},ae&&(0,t.MDB)(ae[0]?.address,10,3)),subtitle:e.createElement(a.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium"},ae&&(ae.length>1?`+${ae.length-1} more providers`:""))})),e.createElement("div",{className:"flex flex-col items-center w-full gap-y-2"},e.createElement(_e.a,{setShowFeesSettingSheet:K}),Y&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},Y),f&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},f),$&&!Q&&e.createElement("p",{className:"text-sm font-bold text-red-300 px-2"},$),e.createElement(C.Buttons.Generic,{color:z.w.green600,size:"normal",disabled:g||!!f||!!$||l||!!Y,className:"w-full",onClick:ce},g?e.createElement(Ce.T,{color:z.w.white100}):"Confirm Claim")))),l&&e.createElement(Je.Z,{showLedgerPopup:l}),e.createElement(Ye.k,{showFeesSettingSheet:Q,onClose:R,gasError:$}))}function Ut(){const{headerChainImgSrc:x}=(0,we.Cd)(),i=(0,q._)(),m=(0,Ne.G)(),s=(0,je.N8)(),r=(0,ye.Z)(),o=r.get("validatorAddress")??void 0,d=r.get("chainId")??void 0,u=r.get("action")??void 0,c=(0,v.s0)(),{activeWallet:l}=(0,be.ZP)(),{network:h,rewards:g,delegations:f,loadingDelegations:b,loadingNetwork:S,loadingRewards:P,loadingUnboundingDelegations:N}=(0,t.nDu)(),A=(0,e.useMemo)(()=>b||S||P||N,[b,S,P,N]),[U]=(0,t.JsT)(),{theme:I}=(0,C.useTheme)(),O=(0,t.a74)(),[ee,ne]=(0,e.useState)(!1),[Y,J]=(0,e.useState)(!1),[F,H]=(0,e.useState)(!1),[Q,K]=(0,e.useState)(!1),[$,ge]=(0,e.useState)(!1),[fe,te]=(0,e.useState)(!1),[xe,se]=(0,e.useState)(!1),[ae,R]=(0,e.useState)(!1),[G,ce]=(0,e.useState)(!1),[L,re]=(0,e.useState)(!1),{isLoading:Te,data:ie}=(0,t.ViV)(),{data:Oe}=(0,t.S2A)(),We=(0,e.useCallback)(()=>ne(!0),[]),B=(0,e.useCallback)(()=>J(!0),[]),me=(0,e.useCallback)(()=>{re(!0),setTimeout(()=>re(!1),2e3),tt.i.copyText(m?.[0])},[m]),j=(0,e.useMemo)(()=>h?h.getValidators({}):{},[h]),ze=(0,e.useMemo)(()=>ie[U.coinDenom]?.sort((Ie,Ue)=>{const Ve=Ie.priority,De=Ue.priority;return Ve!==void 0&&De!==void 0?Ve-De:Ve!==void 0?-1:De!==void 0?1:0}),[U.coinDenom,ie]),Ft=(0,e.useMemo)(()=>l?.avatar?l.avatar:(0,he.l)()?D.r.Logos.CompassCircle:D.r.Logos.LeapLogo28,[l?.avatar]),gt=(0,e.useMemo)(()=>{const Pe={};g?.rewards?.forEach(De=>{const qe=De.validator_address;Pe[qe]||(Pe[qe]={validator_address:qe,reward:[]});const Fe={};De.reward.forEach(et=>{const{denom:ot,amount:jt,tokenInfo:xt}=et,Et=parseFloat(jt);Fe[ot]?Fe[ot]+=Et*Math.pow(10,xt?.coinDecimals??6):Fe[ot]=Et*Math.pow(10,xt?.coinDecimals??6)}),Pe[qe].reward.push(...Object.keys(Fe).map(et=>({denom:et,amount:Fe[et]})))});const Ie=g?.total.find(De=>De.denom===U.coinMinimalDenom),Ue="",Ve="";return{rewardsUsdValue:new(p())(Ie?.currenyAmount??"0"),rewardsStatus:Ue,usdValueStatus:Ve,denom:Ie?.denom,rewardsDenomValue:new(p())(Ie?.amount??"0"),rewards:{rewardMap:Pe}}},[U,g]);(0,e.useEffect)(()=>{async function Pe(){if(d){const Ue=(await(0,y._d)())[d];s(Ue)}}Pe()},[d]);const ft=(0,e.useCallback)(()=>{c("/stakeInput",{state:{mode:"DELEGATE",toValidator:o?j[o]:void 0},replace:!0})},[c,j,o]);(0,e.useEffect)(()=>{switch(u){case"CLAIM_REWARDS":K(!0);break;case"OPEN_LIQUID_STAKING":ce(!0);break;case"DELEGATE":ft();break;default:break}},[u,ft]);const Kt=(0,e.useCallback)(()=>{ce(!1)},[]),$t=(0,e.useMemo)(()=>l?l.walletType===t._KQ.LEDGER&&!Le.li.test(l.name)?`${X.dN[l.walletType]} Wallet ${l.addressIndex+1}`:(0,le.k)(l.name):"-",[l]);return l?e.createElement("div",{className:"relative w-full overflow-clip"},e.createElement(Ke.ZP,{isShown:F,toggler:()=>H(!F)}),e.createElement(V.Z,{header:e.createElement(ke.m,{action:{onClick:()=>H(!0),type:C.HeaderActionType.NAVIGATION,className:"w-[48px] h-[40px] px-3 bg-[#FFFFFF] dark:bg-gray-950 rounded-full"},imgSrc:x,onImgClick:i?void 0:We,title:e.createElement(Me.T,{walletName:$t,showWalletAvatar:!0,walletAvatar:Ft,showDropdown:!0,handleDropdownClick:B,giveCopyOption:!0,handleCopyClick:me,isAddressCopied:L})})},e.createElement("div",{className:"flex flex-col gap-y-6 p-6 mb-10 overflow-scroll"},e.createElement(nt,null),A&&e.createElement(E.rb,null),!A&&(Object.values(f??{}).length>0?e.createElement(Nt,{onClaim:()=>{O==="lava"&&Oe?.restaking.extension==="active"?R(!0):K(!0)},onClaimAndStake:()=>se(!0)}):e.createElement(ue,null)),O==="lava"&&Oe?.restaking.extension==="active"&&l?.walletType===t._KQ.LEDGER&&e.createElement(Bt,null),e.createElement("div",{className:"flex gap-x-4 w-full"},Te&&e.createElement(w.Z,{width:352,borderRadius:100,height:50}),!Te&&e.createElement(e.Fragment,null,ze?.length>0&&e.createElement(C.Buttons.Generic,{size:"normal",className:"w-full",color:I===C.ThemeName.DARK?z.w.gray800:z.w.gray200,disabled:Te,onClick:()=>ce(!0)},e.createElement(a.Z,{color:"dark:text-white-100 text-black-100"},"Liquid Stake")),e.createElement(C.Buttons.Generic,{size:"normal",className:"w-full",color:z.w.green600,onClick:async()=>{c("/stakeInput",{state:{mode:"DELEGATE"}})}},"Stake"))),e.createElement(zt,null))),e.createElement(de.Z,{isVisible:ee,onClose:()=>ne(!1)}),e.createElement(Re.Z,{isVisible:Y,onClose:()=>J(!1),title:"Wallets"}),!S&&e.createElement(e.Fragment,null,e.createElement(vt,{isOpen:Q,onClose:()=>K(!1),validators:j}),O==="lava"&&e.createElement(Wt,{isOpen:$,onClose:()=>ge(!1)}),e.createElement(W,{isOpen:xe,onClose:()=>se(!1),onClaim:()=>{se(!1),K(!0)},onClaimAndStake:()=>{se(!1),te(!0)}}),O==="lava"&&e.createElement(It,{isOpen:ae,onClose:()=>R(!1),onClaimValidatorRewards:()=>{R(!1),K(!0)},onClaimProviderRewards:()=>{R(!1),ge(!0)}}),gt&&e.createElement(ht,{isOpen:fe,onClose:()=>te(!1),validators:j,chainRewards:gt})),ze&&e.createElement(kt.Z,{isVisible:G,onClose:Kt,providers:ze}),e.createElement(ve.Z,{label:ve.W.Stake})):e.createElement("div",{className:"relative w-full overflow-clip"},e.createElement(V.Z,null,e.createElement("div",null,e.createElement(Ze.S,{src:D.r.Logos.LeapCosmos,heading:"No wallet found"}))))}function Vt(){const x=(0,ye.Z)().get("pageSource")??void 0,i=(0,e.useMemo)(()=>({pageViewSource:x}),[x]);(0,pe.a)(M.q.Stake,!0,i);const m=(0,t.a74)(),s=(0,t.Xmk)({checkForExistenceType:"comingSoon",feature:"stake",platform:"Extension"}),r=(0,t.Xmk)({checkForExistenceType:"notSupported",feature:"stake",platform:"Extension"});return m===X.HW?e.createElement(Ee.jc,null):r||s?e.createElement(it,{isStakeComingSoon:s,isStakeNotSupported:r}):e.createElement(Ut,null)}},150633:()=>{}}]);
